import{_ as k,d as v,c as l,o as a,m as s,j as n,t as u,f as S,n as $,F as B,q as g,r as b,a as c,w as V,p as T,e as L,u as _,g as x,l as E}from"./global.properties-ieI6Xwik.js";import{f as I}from"./application-DnsIlr-S.js";import{H as P}from"./HeadingBlock-BfyZ0XzM.js";import{A as w}from"./AvatarLarge-CKH2wML0.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./inbox.store-DKf8FrGP.js";import"./index-CaocF3Et.js";const C=v({props:{inputError:{type:String,default:""},modelValue:{type:String,required:!0},textLength:{type:[String,Number],default:""},hasLabel:{type:Boolean,default:!0},hasFeedback:{type:Boolean,default:!0},labelText:{type:String,default:""},placeholder:{type:String,default:""},classes:{type:String,default:""},name:{type:String,default:""}},emits:["update:modelValue"],setup:function(e,t){return g(e.inputType),{updateModelValue:o=>{t.emit("update:modelValue",o.target.value)}}}}),F={key:0,class:"mb-2 text-cap-l block text-lab-pr"},A=["value","classes","placeholder","name"],H={key:1,class:"flex justify-between"},N={key:0,class:"inline-flex"},z={class:"text-cap-l text-lab-sc"},M={key:2,class:"text-cap-l text-red-900 px-4 py-3.5 bg-red-900/10 rounded-md mt-3"};function j(e,t,o,r,i,d){return a(),l(B,null,[e.hasLabel?(a(),l("label",F,u(e.labelText),1)):s("",!0),n("textarea",{onInput:t[0]||(t[0]=(...p)=>e.updateModelValue&&e.updateModelValue(...p)),value:e.modelValue,classes:e.classes,placeholder:e.placeholder,class:"resize-none border border-bord-tr rounded-xl bg-fill-qt w-full pl-4 pr-12 leading-5 pt-3 text-par-n text-lab-pr2 max-h-96 overflow-y-auto min-h-20 outline-hidden placeholder:font-light placeholder:text-par-m",name:e.name},null,40,A),e.hasFeedback?(a(),l("div",H,[e.$slots.feedbackInfo?(a(),l("span",N,[n("span",z,[S(e.$slots,"feedbackInfo")])])):s("",!0),e.textLength?(a(),l("span",{key:1,class:$(["ml-4 text-cap-l",e.modelValue.length>e.textLength?"text-red-900":"text-lab-sc"])},u(e.modelValue.length)+"/"+u(e.textLength),3)):s("",!0)])):s("",!0),e.inputError?(a(),l("p",M,u(e.inputError),1)):s("",!0)],64)}const q=k(C,[["render",j]]),D=v({props:{isSkippable:{type:Boolean,default:!1}},emits:["close"],setup:function(e,t){const o=x({isSubmitting:!1}),r=g(""),i=g(""),d=p=>{i.value="",o.isSubmitting=!0,E().tips().with(p).sendTo("bio/update").then(m=>{t.emit("close")}).catch(m=>{i.value=m.response.data.message,o.isSubmitting=!1})};return{state:o,bio:r,validationError:i,submitForm:()=>{d({bio:r.value,skip:!1})},skip:()=>{d({bio:r.value,skip:!0})}}},components:{SoloTextInput:q,PrimaryPillButton:I,HeadingBlock:P,AvatarLarge:w}}),R={class:"mb-6"},U={class:"flex items-center flex-col select-none mb-4"},G={class:"mb-6"},J={class:"flex justify-between"};function K(e,t,o,r,i,d){const p=b("AvatarLarge"),m=b("HeadingBlock"),y=b("SoloTextInput"),h=b("PrimaryPillButton");return a(),l("form",{class:"block",onSubmit:t[1]||(t[1]=_((...f)=>e.submitForm&&e.submitForm(...f),["prevent"]))},[n("div",R,[n("div",U,[c(p,{avatarSrc:e.$embedder("assets.images.bio_avatar")},null,8,["avatarSrc"])]),c(m,{title:e.$t("tips.onboarding_bio.title"),caption:e.$t("tips.onboarding_bio.caption")},null,8,["title","caption"])]),n("div",G,[c(y,{modelValue:e.bio,"onUpdate:modelValue":t[0]||(t[0]=f=>e.bio=f),inputError:e.validationError,placeholder:e.$t("labels.about_you"),hasLabel:!1,textLength:e.$embedder("config.validation.user.bio.max")},{feedbackInfo:V(()=>[T(u(e.$t("tips.onboarding_bio.input_helper_text")),1)]),_:1},8,["modelValue","inputError","placeholder","textLength"])]),n("div",J,[c(h,{loading:e.state.isSubmitting,type:"submit",buttonText:e.$t("labels.save"),buttonSize:"lm"},null,8,["loading","buttonText"]),!e.state.isSubmitting&&e.isSkippable?(a(),L(h,{key:0,onClick:e.skip,buttonText:e.$t("labels.no_skip_it"),buttonSize:"lm",buttonRole:"marginalDanger"},null,8,["onClick","buttonText"])):s("",!0)])],32)}const te=k(D,[["render",K]]);export{te as default};
