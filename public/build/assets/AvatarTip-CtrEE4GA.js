import{_ as g,d as b,r as l,c as f,o as m,j as i,a as p,e as v,m as k,q as _,g as B,l as A}from"./global.properties-ieI6Xwik.js";import{f as S}from"./application-DnsIlr-S.js";import{H as h}from"./HeadingBlock-BfyZ0XzM.js";import{A as y}from"./AvatarLarge-CKH2wML0.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./inbox.store-DKf8FrGP.js";import"./index-CaocF3Et.js";const C=b({props:{isSkippable:{type:Boolean,default:!1}},emits:["close"],setup:function(t,e){const s=_(null),o=B({isSubmitting:!1}),r=n=>{o.isSubmitting=!0,A().tips().with(n).withHeaders({"Content-Type":"multipart/form-data"}).sendTo("avatar/update").then(a=>{e.emit("close")}).catch(a=>{o.isSubmitting=!1})};return{state:o,imageInput:s,skip:()=>{r({skip:!0})},selectAvatar:()=>{s.value.click()},uploadAvatar:n=>{const a=new FormData;a.append("image",n.target.files[0]),r(a)}}},components:{PrimaryPillButton:S,HeadingBlock:h,AvatarLarge:y}}),P={class:"block"},$={class:"block mb-12"},T={class:"flex items-center flex-col select-none mb-4"},H={class:"flex justify-between"};function w(t,e,s,o,r,n){const a=l("AvatarLarge"),u=l("HeadingBlock"),c=l("PrimaryPillButton");return m(),f("form",P,[i("div",$,[i("div",T,[p(a,{avatarSrc:t.$embedder("assets.images.upload_avatar")},null,8,["avatarSrc"])]),p(u,{title:t.$t("tips.onboarding_avatar.title"),caption:t.$t("tips.onboarding_avatar.caption")},null,8,["title","caption"])]),i("div",H,[p(c,{loading:t.state.isSubmitting,onClick:t.selectAvatar,type:"button",buttonText:t.$t("labels.upload_avatar"),buttonSize:"lm"},null,8,["loading","onClick","buttonText"]),!t.state.isSubmitting&&t.isSkippable?(m(),v(c,{key:0,onClick:t.skip,buttonText:t.$t("labels.no_skip_it"),buttonSize:"lm",buttonRole:"marginalDanger"},null,8,["onClick","buttonText"])):k("",!0)]),i("input",{type:"file",onChange:e[0]||(e[0]=(...d)=>t.uploadAvatar&&t.uploadAvatar(...d)),accept:"image/*",ref:"imageInput",class:"hidden"},null,544)])}const q=g(C,[["render",w]]);export{q as default};
