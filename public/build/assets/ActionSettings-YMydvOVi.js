import{_ as h,d as T,c as l,j as o,a as r,r as n,w as u,u as _,F as P,g as w,q as E,h as $,l as v,o as m,p,t as c}from"./global.properties-ieI6Xwik.js";import{f as y,a as S}from"./application-DnsIlr-S.js";import{T as k}from"./TextInput-CE1Bv1lI.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./inbox.store-DKf8FrGP.js";import"./index-CaocF3Et.js";const V=T({setup:function(){const e=w({isLoading:!0,isSubmitting:!1,formErrors:{password:[],message:[]}}),s=E({password:"",message:""});return $(async()=>{setTimeout(()=>{e.isLoading=!1},500)}),{state:e,formData:s,submitForm:()=>{e.isSubmitting===!1&&(e.isSubmitting=!0,Object.keys(e.formErrors).forEach(t=>{e.formErrors[t]=[]}),v().userSettings().with(s.value).delete("account/delete").then(t=>{toastSuccess(t.data.message),setTimeout(()=>{window.location.href=embedder("routes.user_auth_index")},3e3)}).catch(t=>{e.isSubmitting=!1,t.response&&(toastError(t.response.data.message),t.response.data.errors&&Object.keys(t.response.data.errors).forEach(i=>{e.formErrors[i]=t.response.data.errors[i]}))}))}}},components:{PageTitle:S,TextInput:k,PrimaryPillButton:y}}),B={class:"mb-8"},D={key:0,class:"block"},I={class:"mb-8"},L=["innerHTML"],M={class:"mb-6"},x={class:"mb-10"},F={class:"block"},A={key:1,class:"block"},j={class:"flex-center h-96"};function C(e,s,t,i,N,H){const f=n("PageTitle"),d=n("TextInput"),g=n("PrimaryPillButton"),b=n("PrimarySpinAnimation");return m(),l(P,null,[o("div",B,[r(f,{hasBack:!0,titleText:e.$t("settings.account_actions")},null,8,["titleText"])]),e.state.isLoading?(m(),l("div",A,[o("div",j,[r(b)])])):(m(),l("div",D,[o("div",I,[o("h6",{class:"text-par-s text-red-900",innerHTML:e.$t("settings.forms.actions.page_desc")},null,8,L)]),o("form",{onSubmit:s[2]||(s[2]=_((...a)=>e.submitForm&&e.submitForm(...a),["prevent"]))},[o("div",M,[r(d,{modelValue:e.formData.password,"onUpdate:modelValue":s[0]||(s[0]=a=>e.formData.password=a),modelModifiers:{trim:!0},textLength:120,isPassword:!0,inputErrors:e.state.formErrors.password,labelText:e.$t("settings.forms.actions.password"),placeholder:e.$t("settings.forms.actions.password_placeholder")},{feedbackInfo:u(()=>[p(c(e.$t("settings.forms.actions.password_helper")),1)]),_:1},8,["modelValue","inputErrors","labelText","placeholder"])]),o("div",x,[r(d,{modelValue:e.formData.message,"onUpdate:modelValue":s[1]||(s[1]=a=>e.formData.message=a),modelModifiers:{trim:!0},textLength:1200,asText:!0,inputErrors:e.state.formErrors.message,labelText:e.$t("settings.forms.actions.message"),placeholder:e.$t("settings.forms.actions.message_placeholder")},{feedbackInfo:u(()=>[p(c(e.$t("settings.forms.actions.message_helper")),1)]),_:1},8,["modelValue","inputErrors","labelText","placeholder"])]),o("div",F,[r(g,{loading:e.state.isSubmitting,buttonType:"submit",buttonRole:"danger",buttonText:e.$t("settings.forms.actions.delete_account")},null,8,["loading","buttonText"])])],32)]))],64)}const J=h(V,[["render",C]]);export{J as default};
