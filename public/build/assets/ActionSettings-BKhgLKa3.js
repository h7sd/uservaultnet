import{_,d as S,r as a,c as l,o as m,a as o,j as n,w as p,p as u,t as c,u as w,F as $,g as y,q as E,h as P,l as v}from"./global.properties-ieI6Xwik.js";import{P as D,b as k}from"./application-B35z453N.js";import{S as B}from"./SettingsDesc-DEUPbs60.js";import{T as V}from"./TextInput-B4zdhJy8.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./swiper-element-bundle-DBu82uhE.js";const I=S({setup:function(){const t=y({isLoading:!0,isSubmitting:!1,formErrors:{password:[],message:[]}}),e=E({password:"",message:""});return P(async()=>{setTimeout(()=>{t.isLoading=!1},500)}),{state:t,formData:e,submitForm:()=>{t.isSubmitting===!1&&(t.isSubmitting=!0,Object.keys(t.formErrors).forEach(s=>{t.formErrors[s]=[]}),v().userSettings().with(e.value).delete("account/delete").then(s=>{toastSuccess(s.data.message),setTimeout(()=>{window.location.href=embedder("routes.user_auth_index")},3e3)}).catch(s=>{t.isSubmitting=!1,s.response&&(toastError(s.response.data.message),s.response.data.errors&&Object.keys(s.response.data.errors).forEach(i=>{t.formErrors[i]=s.response.data.errors[i]}))}))}}},components:{TextInput:V,Toolbar:k,SettingsDesc:B,PrimaryPillButton:D}}),F={class:"mb-3"},L={key:0,class:"px-4"},x={class:"mb-6"},A={class:"mb-10"},C={class:"block"},M={key:1,class:"block"},j={class:"flex-center h-96"};function N(t,e,s,i,O,U){const f=a("Toolbar"),g=a("SettingsDesc"),b=a("Border"),d=a("TextInput"),h=a("PrimaryPillButton"),T=a("PrimarySpinAnimation");return m(),l($,null,[o(f,{onClose:e[0]||(e[0]=r=>t.$router.back()),title:t.$t("settings.account_actions")},null,8,["title"]),o(g,{color:"text-red-900",text:t.$t("settings.forms.actions.page_desc")},null,8,["text"]),n("div",F,[o(b,{height:"h-2",opacity:"opacity-50"})]),t.state.isLoading?(m(),l("div",M,[n("div",j,[o(T)])])):(m(),l("div",L,[n("form",{onSubmit:e[3]||(e[3]=w((...r)=>t.submitForm&&t.submitForm(...r),["prevent"]))},[n("div",x,[o(d,{modelValue:t.formData.password,"onUpdate:modelValue":e[1]||(e[1]=r=>t.formData.password=r),modelModifiers:{trim:!0},textLength:120,isPassword:!0,inputErrors:t.state.formErrors.password,labelText:t.$t("settings.forms.actions.password"),placeholder:t.$t("settings.forms.actions.password_placeholder")},{feedbackInfo:p(()=>[u(c(t.$t("settings.forms.actions.password_helper")),1)]),_:1},8,["modelValue","inputErrors","labelText","placeholder"])]),n("div",A,[o(d,{modelValue:t.formData.message,"onUpdate:modelValue":e[2]||(e[2]=r=>t.formData.message=r),modelModifiers:{trim:!0},textLength:1200,asText:!0,inputErrors:t.state.formErrors.message,labelText:t.$t("settings.forms.actions.message"),placeholder:t.$t("settings.forms.actions.message_placeholder")},{feedbackInfo:p(()=>[u(c(t.$t("settings.forms.actions.message_helper")),1)]),_:1},8,["modelValue","inputErrors","labelText","placeholder"])]),n("div",C,[o(h,{loading:t.state.isSubmitting,buttonType:"submit",buttonRole:"danger",buttonText:t.$t("settings.forms.actions.delete_account")},null,8,["loading","buttonText"])])],32)]))],64)}const K=_(I,[["render",N]]);export{K as default};
