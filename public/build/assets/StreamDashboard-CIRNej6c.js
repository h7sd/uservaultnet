import{k as T,c as u,s as t,i as C,e as D,t as n,z as g,K as b,r as o,o as U,L as c,d as y}from"./vendor-20TtR0Rd.js";import{a as K}from"./application-DEz9sPnz.js";import{_ as P}from"./global.properties-DKM1fd6s.js";import"./inbox.store-CHx7CB4w.js";import"./index-ciglwFMH.js";import"./ui-Bp8YvxdW.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";const $=T({components:{PageTitle:K},setup(){const s=o(!0),e=o(!1),p=o({}),i=o(""),d=o(""),m=o(""),l=o(""),r=o(""),f=a=>{const v=Math.floor(a/3600),x=Math.floor(a%3600/60);return v>0?`${v}h ${x}m`:`${x}m`},S=async()=>{try{const a=await c.get("/api/streams/my/dashboard");p.value=a.data.stats||{},l.value=a.data.stream_key||"",a.data.stream&&(i.value=a.data.stream.title||"",d.value=a.data.stream.category||"",m.value=a.data.stream.description||""),r.value=`https://ingest.uservault.de/${l.value}/whip`}catch(a){console.error("Error fetching dashboard data:",a)}finally{s.value=!1}},w=async()=>{e.value=!0;try{await c.post("/api/streams/start",{title:i.value||"Untitled Stream",category:d.value||"Just Chatting",description:m.value}),alert("Settings saved!")}catch(a){console.error("Error saving settings:",a),alert("Error saving settings")}finally{e.value=!1}},h=()=>{navigator.clipboard.writeText(r.value),alert("Stream URL copied!")},k=async()=>{try{const a=await c.post("/api/streams/generate-key");l.value=a.data.stream_key,r.value=`https://ingest.uservault.de/${l.value}/whip`,alert("New stream key generated!")}catch(a){console.error("Error regenerating key:",a),alert("Error generating key")}};return U(()=>{S()}),{loading:s,isSaving:e,stats:p,streamTitle:i,streamCategory:d,streamDescription:m,whipUrl:r,formatTime:f,saveStreamSettings:w,copyStreamKey:h,regenerateStreamKey:k}}}),B={class:"mt-top-offset block"},V={class:"mb-6"},E={class:"min-w-content w-content max-w-5xl mx-auto space-y-6"},L={key:0,class:"flex items-center justify-center min-h-[200px]"},_={key:1},N={class:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},W={class:"bg-secondary/20 rounded-xl p-4"},H={class:"text-2xl font-bold text-white"},I={class:"bg-secondary/20 rounded-xl p-4"},M={class:"text-2xl font-bold text-white"},R={class:"bg-secondary/20 rounded-xl p-4"},O={class:"text-2xl font-bold text-white"},z={class:"bg-secondary/20 rounded-xl p-4"},G={class:"text-2xl font-bold text-white"},J={class:"bg-secondary/10 rounded-xl p-6 space-y-4"},j={class:"space-y-2"},q={class:"space-y-2"},A={class:"space-y-2"},F=["disabled"],Q={class:"bg-secondary/10 rounded-xl p-6 space-y-4"},X={class:"space-y-2"},Y={class:"flex gap-2"},Z=["value"];function tt(s,e,p,i,d,m){const l=D("PageTitle");return y(),u("div",B,[t("div",V,[C(l,{hasBack:!0,titleText:"Stream Dashboard"})]),t("div",E,[s.loading?(y(),u("div",L,e[6]||(e[6]=[t("div",{class:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"},null,-1)]))):(y(),u("div",_,[t("div",N,[t("div",W,[e[7]||(e[7]=t("p",{class:"text-xs text-gray-400 mb-1"},"Total Streams",-1)),t("p",H,n(s.stats.total_streams||0),1)]),t("div",I,[e[8]||(e[8]=t("p",{class:"text-xs text-gray-400 mb-1"},"Total Views",-1)),t("p",M,n(s.stats.total_views||0),1)]),t("div",R,[e[9]||(e[9]=t("p",{class:"text-xs text-gray-400 mb-1"},"Peak Viewers",-1)),t("p",O,n(s.stats.peak_viewers||0),1)]),t("div",z,[e[10]||(e[10]=t("p",{class:"text-xs text-gray-400 mb-1"},"Stream Time",-1)),t("p",G,n(s.formatTime(s.stats.total_stream_time_seconds||0)),1)])]),t("div",J,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold text-white"},"Stream Settings",-1)),t("div",j,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-white"},"Title",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s.streamTitle=r),type:"text",placeholder:"Stream Title",class:"w-full px-4 py-2 bg-background border border-border rounded-lg text-white"},null,512),[[b,s.streamTitle]])]),t("div",q,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-white"},"Category",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>s.streamCategory=r),type:"text",placeholder:"e.g. Gaming, Just Chatting",class:"w-full px-4 py-2 bg-background border border-border rounded-lg text-white"},null,512),[[b,s.streamCategory]])]),t("div",A,[e[13]||(e[13]=t("label",{class:"text-sm font-medium text-white"},"Description",-1)),g(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>s.streamDescription=r),placeholder:"What is your stream about?",rows:"3",class:"w-full px-4 py-2 bg-background border border-border rounded-lg resize-none text-white"},null,512),[[b,s.streamDescription]])]),t("button",{onClick:e[3]||(e[3]=(...r)=>s.saveStreamSettings&&s.saveStreamSettings(...r)),disabled:s.isSaving,class:"btn btn-primary w-full"},n(s.isSaving?"Saving...":"Save Settings"),9,F)]),t("div",Q,[e[16]||(e[16]=t("h2",{class:"text-lg font-semibold text-white"},"Stream Connection (OBS)",-1)),e[17]||(e[17]=t("div",{class:"p-3 bg-destructive/10 rounded-lg border border-destructive/20 mb-4"},[t("p",{class:"text-xs text-red-400"}," ⚠️ Never share your Stream URL with others! ")],-1)),t("div",X,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-white"},"WHIP Server URL",-1)),t("div",Y,[t("input",{value:s.whipUrl,readonly:"",class:"flex-1 px-4 py-2 bg-background border border-border rounded-lg font-mono text-xs text-white"},null,8,Z),t("button",{onClick:e[4]||(e[4]=(...r)=>s.copyStreamKey&&s.copyStreamKey(...r)),class:"btn btn-secondary px-4"}," Copy ")])]),t("button",{onClick:e[5]||(e[5]=(...r)=>s.regenerateStreamKey&&s.regenerateStreamKey(...r)),class:"btn btn-outline w-full"}," Generate New Stream Key "),e[18]||(e[18]=t("div",{class:"pt-4 border-t border-border/50 space-y-2"},[t("h3",{class:"text-sm font-semibold text-white"},"OBS Setup (WHIP)"),t("ol",{class:"text-xs text-gray-300 space-y-1 list-decimal list-inside"},[t("li",null,"Open Settings → Stream"),t("li",null,'Select "WHIP" as Service'),t("li",null,"Copy and paste WHIP Server URL above"),t("li",null,"Leave Bearer Token empty"),t("li",null,"Start streaming")])],-1))])]))])])}const dt=P($,[["render",tt]]);export{dt as default};
