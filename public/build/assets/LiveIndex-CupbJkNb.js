import{k as x,c as a,s,i as p,e as m,F as f,f as _,r as h,o as y,L as b,d as n,D as w,p as k,q as N,v as S,t as l}from"./vendor-20TtR0Rd.js";import{a as U}from"./application-DEz9sPnz.js";import{_ as C}from"./global.properties-DKM1fd6s.js";import"./inbox.store-CHx7CB4w.js";import"./index-ciglwFMH.js";import"./ui-Bp8YvxdW.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";const I=x({components:{PageTitle:U},setup(){const r=h([]),o=h(!0),u=e=>e?e.first_name&&e.first_name.length>0?e.first_name.charAt(0).toUpperCase():e.username&&e.username.length>0?e.username.charAt(0).toUpperCase():"U":"U",g=e=>{if(!e)return"Unknown";const c=e.first_name||"",d=e.last_name||"";return(c+" "+d).trim()||e.username||"Unknown"},i=async()=>{try{console.log("Fetching live streams from /api/streams...");const e=await b.get("/api/streams");console.log("Live streams response:",e.data),r.value=e.data.data||[],console.log("Live streams count:",r.value.length)}catch(e){console.error("Error fetching live streams:",e),console.error("Error details:",e.response)}finally{o.value=!1}};return y(()=>{i();const e=setInterval(i,3e4);return()=>clearInterval(e)}),{liveStreams:r,loading:o,getUserInitial:u,getUserName:g}}}),L={class:"mt-top-offset block"},T={class:"mb-6"},j={class:"min-w-content w-content"},B={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5"},V={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5"},$={class:"relative aspect-video bg-secondary rounded-xl overflow-hidden mb-3"},E=["src"],P={class:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs rounded"},F={class:"flex gap-3"},A=["src"],D={key:1,class:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center text-lg font-bold text-white"},q={class:"flex-1 min-w-0"},J={class:"font-semibold truncate group-hover:text-primary transition text-white"},M={class:"text-sm text-gray-300 truncate"},z={class:"text-xs text-gray-400"},G={key:2,class:"flex flex-col items-center justify-center py-24 text-center"},H={class:"w-20 h-20 rounded-full bg-secondary flex items-center justify-center mb-6"};function K(r,o,u,g,i,e){const c=m("PageTitle"),d=m("router-link"),v=m("SvgIcon");return n(),a("div",L,[s("div",T,[p(c,{hasBack:!0,titleText:r.$t("labels.live_stream")},null,8,["titleText"])]),s("div",j,[r.loading?(n(),a("div",B,[(n(),a(f,null,_(8,t=>s("div",{key:t,class:"space-y-3 animate-pulse"},o[0]||(o[0]=[w('<div class="aspect-video bg-secondary rounded-xl"></div><div class="flex gap-3"><div class="w-10 h-10 rounded-full bg-secondary"></div><div class="flex-1 space-y-2"><div class="h-4 bg-secondary rounded w-3/4"></div><div class="h-3 bg-secondary rounded w-1/2"></div></div></div>',2)]))),64))])):r.liveStreams.length>0?(n(),a("div",V,[(n(!0),a(f,null,_(r.liveStreams,t=>(n(),k(d,{key:t.id,to:{name:"stream_view",params:{id:t.id}},class:"block group"},{default:N(()=>[s("div",$,[t.thumbnail_url?(n(),a("img",{key:0,src:t.thumbnail_url,alt:"Stream thumbnail",class:"w-full h-full object-cover"},null,8,E)):S("",!0),o[1]||(o[1]=s("div",{class:"absolute top-2 left-2 px-2 py-1 bg-red-600 text-white text-xs font-bold rounded"}," LIVE ",-1)),s("div",P,l(t.viewer_count)+" viewers ",1)]),s("div",F,[t.user&&t.user.avatar_url?(n(),a("img",{key:0,src:t.user.avatar_url,alt:"Streamer",class:"w-10 h-10 rounded-full object-cover"},null,8,A)):(n(),a("div",D,l(r.getUserInitial(t.user)),1)),s("div",q,[s("h3",J,l(t.title),1),s("p",M,l(r.getUserName(t.user)),1),s("p",z,l(t.category||"Just Chatting"),1)])])]),_:2},1032,["to"]))),128))])):(n(),a("div",G,[s("div",H,[p(v,{name:"video-recorder",type:"solid",class:"w-8 h-8 text-gray-400"})]),o[2]||(o[2]=s("h2",{class:"text-xl font-semibold mb-2 text-white"},"No Live Streams",-1)),o[3]||(o[3]=s("p",{class:"text-gray-300 max-w-sm"}," No one is streaming right now. Check back later! ",-1))]))])])}const te=C(I,[["render",K]]);export{te as default};
