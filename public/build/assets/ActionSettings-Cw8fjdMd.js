import{k as _,e as a,c as m,d as l,i as o,s as n,q as p,x as u,t as c,y as S,F as y,b as $,r as w,o as E}from"./vendor-20TtR0Rd.js";import{_ as P,c as v}from"./global.properties-DKM1fd6s.js";import{P as k,b as D}from"./application-C3zsOS77.js";import{S as B}from"./SettingsDesc-BsK5yx7U.js";import{T as V}from"./TextInput-BqGeesCJ.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./swiper-element-bundle-DBu82uhE.js";const I=_({setup:function(){const t=$({isLoading:!0,isSubmitting:!1,formErrors:{password:[],message:[]}}),e=w({password:"",message:""});return E(async()=>{setTimeout(()=>{t.isLoading=!1},500)}),{state:t,formData:e,submitForm:()=>{t.isSubmitting===!1&&(t.isSubmitting=!0,Object.keys(t.formErrors).forEach(s=>{t.formErrors[s]=[]}),v().userSettings().with(e.value).delete("account/delete").then(s=>{toastSuccess(s.data.message),setTimeout(()=>{window.location.href=embedder("routes.user_auth_index")},3e3)}).catch(s=>{t.isSubmitting=!1,s.response&&(toastError(s.response.data.message),s.response.data.errors&&Object.keys(s.response.data.errors).forEach(i=>{t.formErrors[i]=s.response.data.errors[i]}))}))}}},components:{TextInput:V,Toolbar:D,SettingsDesc:B,PrimaryPillButton:k}}),x={class:"mb-3"},F={key:0,class:"px-4"},L={class:"mb-6"},A={class:"mb-10"},C={class:"block"},M={key:1,class:"block"},N={class:"flex-center h-96"};function j(t,e,s,i,O,U){const f=a("Toolbar"),g=a("SettingsDesc"),b=a("Border"),d=a("TextInput"),h=a("PrimaryPillButton"),T=a("PrimarySpinAnimation");return l(),m(y,null,[o(f,{onClose:e[0]||(e[0]=r=>t.$router.back()),title:t.$t("settings.account_actions")},null,8,["title"]),o(g,{color:"text-red-900",text:t.$t("settings.forms.actions.page_desc")},null,8,["text"]),n("div",x,[o(b,{height:"h-2",opacity:"opacity-50"})]),t.state.isLoading?(l(),m("div",M,[n("div",N,[o(T)])])):(l(),m("div",F,[n("form",{onSubmit:e[3]||(e[3]=S((...r)=>t.submitForm&&t.submitForm(...r),["prevent"]))},[n("div",L,[o(d,{modelValue:t.formData.password,"onUpdate:modelValue":e[1]||(e[1]=r=>t.formData.password=r),modelModifiers:{trim:!0},textLength:120,isPassword:!0,inputErrors:t.state.formErrors.password,labelText:t.$t("settings.forms.actions.password"),placeholder:t.$t("settings.forms.actions.password_placeholder")},{feedbackInfo:p(()=>[u(c(t.$t("settings.forms.actions.password_helper")),1)]),_:1},8,["modelValue","inputErrors","labelText","placeholder"])]),n("div",A,[o(d,{modelValue:t.formData.message,"onUpdate:modelValue":e[2]||(e[2]=r=>t.formData.message=r),modelModifiers:{trim:!0},textLength:1200,asText:!0,inputErrors:t.state.formErrors.message,labelText:t.$t("settings.forms.actions.message"),placeholder:t.$t("settings.forms.actions.message_placeholder")},{feedbackInfo:p(()=>[u(c(t.$t("settings.forms.actions.message_helper")),1)]),_:1},8,["modelValue","inputErrors","labelText","placeholder"])]),n("div",C,[o(h,{loading:t.state.isSubmitting,buttonType:"submit",buttonRole:"danger",buttonText:t.$t("settings.forms.actions.delete_account")},null,8,["loading","buttonText"])])],32)]))],64)}const W=P(I,[["render",j]]);export{W as default};
