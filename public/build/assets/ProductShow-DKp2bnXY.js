const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatLauncher-BRHnQtcY.js","assets/global.properties-ieI6Xwik.js","assets/_commonjsHelpers-Cpj98o6Y.js","assets/index-CaocF3Et.js","assets/AvatarMedium-BDR98hYM.js","assets/application-DnsIlr-S.js","assets/inbox.store-DKf8FrGP.js"])))=>i.map(i=>d[i]);
import{_ as f,d as w,e as $,r as s,o as n,c as u,j as o,F as k,i as O,a as r,u as V,m as _,t as i,w as b,q as T,g as L,b as m,p as C,n as A,h as B,C as S,W as z,y as E,z as F,M as N,H as j}from"./global.properties-ieI6Xwik.js";import{u as x}from"./market.store-C3T3fL7B.js";import{P as q}from"./PageHeader-BUJw24wb.js";import{A as G,T as W,S as J}from"./AdGridItem-DIuPUQRu.js";import{F as K}from"./FollowRecommendationList-BYFEBsjn.js";import{r as Q}from"./swiper-element-bundle-DBu82uhE.js";import{e as U,P as X,f as Y,u as Z,g as ee}from"./application-DnsIlr-S.js";import{V as te}from"./ViewsCounter-7KyRmWQv.js";import{c as oe}from"./index-DyH4rDzV.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./inbox.store-DKf8FrGP.js";import"./index-CaocF3Et.js";const ae=w({components:{PageHeader:q}});function se(e,a,t,d,p,v){const l=s("PageHeader");return n(),$(l,{hasBack:!0,titleText:e.$t("market.product_title")},null,8,["titleText"])}const re=f(ae,[["render",se]]),ne=w({props:{productData:{type:Object,required:!0}},emits:["ask"],setup(e){Q();const a=Z(),t=T(e.productData),d=t.value.relations.merchant.is_store,p=x(),v=L({isSubmitting:!1}),l=m(()=>t.value.relations.merchant);return{state:v,slidesPerView:m(()=>t.value.relations.media.length==1?1:t.value.relations.media.length==2?2:2.4),bookmarkProduct:async function(){v.isSubmitting=!0,await p.bookmarkProduct(t.value.id).then(c=>{c.data.data.bookmarked?(t.value.meta.activity.bookmarked=!0,toastSuccess(__t("toast.product.product_bookmarked"))):(t.value.meta.activity.bookmarked=!1,toastSuccess(__t("toast.product.product_unbookmarked")))}).catch(c=>{c.response&&alert(c.response.data.message)}),v.isSubmitting=!1},productData:t,isStore:d,price:m(()=>t.value.sale_price?t.value.sale_price.formatted:t.value.price.formatted),hasBookmarked:m(()=>t.value.meta.activity.bookmarked),merchantRoute:m(()=>({name:d?"market_store_page":"profile_index",params:{id:t.value.relations.merchant.username}})),merchantData:l,productMedia:m(()=>t.value.relations.media.length?t.value.relations.media:[{source_url:t.value.preview_image_url}]),lightboxImages:function(){a.add({albumName:`${l.value.name} ${l.value.caption}`,images:t.value.relations.media.map(c=>c.source_url),date:t.value.date.iso})}}},components:{PrimaryPillButton:Y,PrimaryIconButton:X,AvatarRightSided:U,ViewsCounter:te}}),ie={class:"border-b border-bord-pr"},de={class:"overflow-hidden relative group bg-fill-tr"},le=["slides-per-view"],ce=["src"],ue={class:"p-4"},pe={class:"flex justify-between items-center mb-2"},me={class:"shrink-0"},ve={class:"shrink-0"},_e={class:"mb-2"},he=["innerHTML"],be={class:"mb-1"},ke={class:"leading-tight flex gap-2 items-center"},fe={class:"text-title-3 text-lab-pr font-bold"},ge={key:0,class:"text-cap-l text-lab-sc line-through"},$e={class:"mb-3"},we={class:"text-par-n text-lab-sc cursor-pointer"},Pe={class:"flex gap-3 leading-none"},ye={class:"shrink-0 self-end ml-auto"};function De(e,a,t,d,p,v){const l=s("AvatarRightSided"),c=s("PrimaryIconButton"),g=s("PrimaryPillButton"),P=s("RouterLink"),y=s("ViewsCounter");return n(),u(k,null,[o("div",ie,[o("div",de,[o("swiper-container",{"slides-per-view":e.slidesPerView,"space-between":"1",mousewheel:"true"},[(n(!0),u(k,null,O(e.productMedia,h=>(n(),u("swiper-slide",{key:h.id},[o("div",{onClick:a[0]||(a[0]=(...D)=>e.lightboxImages&&e.lightboxImages(...D)),class:"cursor-pointer overflow-hidden"},[o("img",{class:"w-full hover:scale-105 smoothing",src:h.source_url,alt:"Image"},null,8,ce)])]))),128))],8,le)])]),o("div",ue,[o("div",pe,[o("div",me,[r(l,{name:e.merchantData.name,verified:e.merchantData.verified,avatarSrc:e.merchantData.avatar_url,linkRoute:e.merchantRoute,caption:e.merchantData.caption},null,8,["name","verified","avatarSrc","linkRoute","caption"])]),o("div",ve,[r(c,{onClick:V(e.bookmarkProduct,["prevent"]),iconName:"bookmark",hoverText:"hover:text-brand-900",iconSize:"icon-normal",buttonColor:e.hasBookmarked?"text-brand-900":"text-lab-pr2",iconType:e.hasBookmarked?"solid":"line"},null,8,["onClick","buttonColor","iconType"])])]),o("div",_e,[o("h4",{class:"text-title-3 text-lab-pr2 leading-snug font-medium max-w-11/12",innerHTML:e.productData.title},null,8,he)]),o("div",be,[o("span",ke,[o("span",fe,i(e.price),1),e.productData.sale_price?(n(),u("span",ge,i(e.productData.price.formatted),1)):_("",!0)])]),o("div",$e,[o("span",we,i(e.productData.category_name)+", "+i(e.$t("market.in_stock"))+" Â· "+i(e.productData.date.time_ago),1)]),o("div",Pe,[e.productData.meta.is_owner?_("",!0):(n(),$(g,{key:0,onClick:a[1]||(a[1]=h=>e.$emit("ask")),buttonSize:"lm",buttonText:e.$t("market.ask_seller")},null,8,["buttonText"])),r(P,{to:e.merchantRoute},{default:b(()=>[r(g,{buttonRole:"stroked",buttonSize:"lm",buttonText:e.isStore?e.$t("market.view_store"):e.$t("labels.view_profile")},null,8,["buttonText"])]),_:1},8,["to"]),o("div",ye,[r(y,{counterValue:e.productData.views_count.formatted},null,8,["counterValue"])])])])],64)}const Ce=f(ne,[["render",De]]),Se=w({props:{productData:{type:Object,required:!0}},setup(e){const a=T(e.productData),t=T(null),d=L({textExpanded:!1,textOverflow:!1});return B(()=>{d.textOverflow=oe(t.value,12)}),{state:d,productData:a,productDescriptionHolder:t}},components:{PrimaryTextButton:ee}}),Te={class:"block p-4"},Le={class:"text-title-3 text-lab-pr2 font-semibold mb-4"},Be={class:"text-par-m text-lab-pr2"},xe={class:"mb-3 flex flex-col gap-2 text-lab-sc"},Re={class:"text-par-s"},He={class:"font-semibold text-lab-pr2"},Ie={class:"text-par-s"},Me={class:"font-semibold text-lab-pr2"},Oe={key:0,class:"text-par-s"},Ve={class:"font-semibold text-lab-pr2"},Ae={class:"block break-words"},ze=["innerHTML"],Ee={key:0,class:"block mt-2"};function Fe(e,a,t,d,p,v){const l=s("PrimaryTextButton");return n(),u("div",Te,[o("h3",Le,i(e.$t("labels.description")),1),o("div",Be,[o("ul",xe,[o("li",Re,[o("span",He,i(e.$t("labels.condition"))+":",1),C(" "+i(e.productData.condition),1)]),o("li",Ie,[o("span",Me,i(e.$t("labels.published_at"))+":",1),C(" "+i(e.productData.date.iso),1)]),e.productData.address?(n(),u("li",Oe,[o("span",Ve,i(e.$t("labels.address"))+":",1),C(" "+i(e.productData.address),1)])):_("",!0)]),o("div",Ae,[o("p",{ref:"productDescriptionHolder",class:A([e.state.textExpanded?"":"line-clamp-[12]"]),innerHTML:e.$mdInline(e.productData.description)},null,10,ze)]),e.state.textOverflow?(n(),u("div",Ee,[r(l,{onClick:a[0]||(a[0]=c=>e.state.textExpanded=!e.state.textExpanded),buttonRole:"marginal",buttonText:e.state.textExpanded?e.$t("labels.see_less_description"):e.$t("labels.see_full_description")},null,8,["buttonText"])])):_("",!0)])])}const Ne=f(Se,[["render",Fe]]),je={},qe={class:"block"};function Ge(e,a){const t=s("Border");return n(),u("div",qe,[a[0]||(a[0]=S('<div class="p-4"><div class="flex justify-between items-center mb-4"><div class="inline-flex items-center gap-2"><div class="skeleton-circle size-small-avatar"></div><div class="skeleton h-4 w-16"></div></div><div class="skeleton-circle size-icon-normal"></div></div><div class="block"><div class="h-52 skeleton-rounded"></div></div></div>',1)),r(t),a[1]||(a[1]=S('<div class="p-4"><div class="block mb-4"><div class="skeleton h-4 w-20 mb-2"></div><div class="skeleton h-4 w-8/12"></div></div><div class="flex gap-3"><div class="skeleton-circle h-9 w-20"></div><div class="skeleton-circle h-9 w-24"></div></div></div>',1)),r(t),a[2]||(a[2]=S('<div class="block p-4"><div class="skeleton h-4 w-20 mb-2"></div><div class="skeleton h-4 w-8/12 mb-2"></div><div class="skeleton h-4 w-6/12 mb-2"></div><div class="skeleton h-4 w-4/12"></div></div>',1))])}const We=f(je,[["render",Ge]]),Je=w({props:{product_id:{type:String,required:!0}},setup:function(e){const a=L({isLoading:!0,chatMenu:N()}),t=x(),d=j(),p=m(()=>t.product);return B(async()=>{await t.fetchProduct(e.product_id),p.value||d.push({name:"error_404"}),a.isLoading=!1}),{state:a,productData:p,chatLauncherPayload:m(()=>({type:"product",id:p.value.id}))}},components:{ProductHeader:re,SidedContentLayout:J,TimelineContainer:W,FollowRecommendationList:K,AdGridItem:G,ProductOverviewCard:Ce,ProductDescriptionCard:Ne,ProductOverviewSkeleton:We,ChatLauncher:E(function(){return F(()=>import("./ChatLauncher-BRHnQtcY.js"),__vite__mapDeps([0,1,2,3,4,5,6]))})}}),Ke={class:"sticky top-0 popup-background-tr z-10 border-b border-bord-pr"};function Qe(e,a,t,d,p,v){const l=s("ProductHeader"),c=s("ProductOverviewSkeleton"),g=s("ProductOverviewCard"),P=s("Border"),y=s("ProductDescriptionCard"),h=s("TimelineContainer"),D=s("FollowRecommendationList"),R=s("AdGridItem"),H=s("SidedContentLayout"),I=s("ChatLauncher"),M=s("PrimaryTransition");return n(),u(k,null,[r(H,null,{content:b(()=>[r(h,null,{default:b(()=>[o("div",Ke,[r(l)]),e.state.isLoading?(n(),$(c,{key:0})):(n(),u(k,{key:1},[r(g,{onAsk:e.state.chatMenu.open,productData:e.productData},null,8,["onAsk","productData"]),r(P),r(y,{productData:e.productData},null,8,["productData"])],64))]),_:1})]),sidebar:b(()=>[r(D),r(R)]),_:1}),e.state.isLoading?_("",!0):(n(),u(k,{key:0},[e.state.chatMenu.status?(n(),$(z,{key:0,to:"body"},[r(M,null,{default:b(()=>[r(I,{userId:e.productData.relations.merchant.id,payload:e.chatLauncherPayload,onClose:e.state.chatMenu.close},null,8,["userId","payload","onClose"])]),_:1})])):_("",!0)],64))],64)}const dt=f(Je,[["render",Qe]]);export{dt as default};
