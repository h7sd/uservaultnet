const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PollVoterUsers-whrdtLWG.js","assets/AvatarExtraSmall-CzXHXk-G.js","assets/global.properties-ieI6Xwik.js","assets/_commonjsHelpers-Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{_ as f,d as b,r as d,c as i,o as s,j as o,Q as I,e as v,t as c,n as y,b as n,m as g,a as u,F as V,i as k,y as x,z as C,l as w}from"./global.properties-ieI6Xwik.js";import{m as z}from"./application-DnsIlr-S.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./inbox.store-DKf8FrGP.js";import"./index-CaocF3Et.js";const S=b({props:{choiceItem:{type:Object,default:{}},index:{type:Number,default:0},hasVotedPoll:{type:Boolean,default:!1}},emits:["vote"],setup:function(e,t){return{choiceItem:n(()=>e.choiceItem),vote:function(l){t.emit("vote",l)}}}}),T={class:"block"},j={class:"h-full absolute top-0 left-0 rounded-xs overflow-hidden w-full flex"},B={class:"flex gap-2 justify-between items-center leading-none relative z-10"},U={class:"size-4 shrink-0"},N={class:"flex-1 flex justify-between text-lab-pr overflow-hidden items-center"},A={class:"text-par-m font-medium flex-1 truncate mr-4 leading-normal"},D={class:"text-par-s font-semibold"};function E(e,t,a,l,p,m){const r=d("SvgIcon");return s(),i("div",T,[o("div",{onClick:t[0]||(t[0]=h=>e.vote(e.index)),class:y(["px-4 py-2.5 border border-bord-pr overflow-hidden rounded-xl relative",[!e.choiceItem.has_voted_choice&&e.hasVotedPoll?"cursor-default opacity-80":"cursor-pointer"]])},[o("div",j,[o("div",{class:"max-w-full h-full bg-bord-pr smoothing",style:I({width:`${e.choiceItem.percentage}%`})},null,4)]),o("div",B,[o("div",U,[e.choiceItem.has_voted_choice?(s(),v(r,{key:0,type:"solid",name:"check-circle",classes:"size-full text-green-900"})):(s(),v(r,{key:1,type:"line",name:"circle",classes:"size-full text-lab-sc"}))]),o("div",N,[o("span",A,c(e.choiceItem.choice_text),1),o("span",D,c(e.choiceItem.percentage)+"%",1)])])],2)])}const O=f(S,[["render",E]]),F=b({props:{postPoll:{type:Object,default:{}}},setup:function(e){const t=n(()=>e.postPoll),a=z(),l=n(()=>t.value.has_voted);return{postPoll:t,pollChoices:n(()=>t.value.choices),pollVotesTotal:n(()=>t.value.votes.length),hasVotedPoll:l,votePoll:p=>{l.value||w().userTimeline().with({choice_id:p,poll_id:t.value.id}).sendTo("post/poll/vote").then(m=>{a.setPostPollData(m.data.data)})},pollHasVoters:n(()=>t.value.voter_users.length>0)}},components:{PollChoiceItem:O,PollVoterUsers:x(()=>C(()=>import("./PollVoterUsers-whrdtLWG.js"),__vite__mapDeps([0,1,2,3])))}}),H={class:"block"},L={class:""},Q={class:"mb-2 flex items-center gap-1 text-lab-sc"},R={class:"size-icon-x-small shrink-0"},q={class:"text-par-s"},G={class:"block mb-2"},J={class:"text-center text-cap-l text-lab-sc"},K={key:0,class:"mt-2"};function M(e,t,a,l,p,m){const r=d("SvgIcon"),h=d("PollChoiceItem"),P=d("PollVoterUsers");return s(),i("div",H,[o("div",L,[o("div",Q,[o("span",R,[u(r,{type:"solid",name:"globe-01",classes:"size-full"})]),o("span",q,c(e.$t("labels.public_poll")),1)]),o("div",G,[(s(!0),i(V,null,k(e.pollChoices,($,_)=>(s(),i("div",{key:_,class:"mb-2 last:mb-0"},[u(h,{onVote:e.votePoll,index:_,choiceItem:$},null,8,["onVote","index","choiceItem"])]))),128))]),o("div",J,c(e.$t("labels.votes_number",{number:e.pollVotesTotal}))+" - "+c(e.postPoll.is_expired?e.$t("labels.final_results"):e.$t("labels.active_poll")),1),e.pollHasVoters?(s(),i("div",K,[u(P,{voterUsers:e.postPoll.voter_users},null,8,["voterUsers"])])):g("",!0)])])}const oe=f(F,[["render",M]]);export{oe as default};
