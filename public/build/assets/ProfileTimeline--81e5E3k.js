import{u as T}from"./index-Dl0ZWYHh.js";import{_ as g,d as h,c as l,F as c,i as P,a as v,r as d,m as _,e as m,j as k,q as b,g as C,h as D,l as L,L as S,o}from"./global.properties-ieI6Xwik.js";import{u as $}from"./index-DABlbPqL.js";import{T as E}from"./TimelinePublicationSkeleton-BKOwceKg.js";import{T as I}from"./TimelinePublication-Cg7erd3h.js";import{T as M}from"./TimelineEmptyState-B2wHyFZm.js";const B=h({props:{contentType:{type:String,default:"posts"}},setup(e){const r=S("profileData"),s=b([]),{postDeleter:u}=$(),n=C({noMoreContent:!1,isLoading:!0,isLoadingContent:!1}),p=async()=>{try{if(!n.isLoadingContent&&!n.noMoreContent){n.isLoadingContent=!0;let i=0;s.value.length&&(i=s.value.at(-1).id),await L().userProfile().params({id:r.value.id,filter:{type:e.contentType,cursor:i}}).getFrom("profile/posts").then(function(a){let t=a.data.data;t.length?s.value=s.value.concat(t):n.noMoreContent=!0}).catch(a=>{a.response&&(n.noMoreContent=!0)}),n.isLoadingContent=!1}}catch(i){console.log(i)}};return T({callback:p}),D(async()=>{await p(),n.isLoading=!1}),{state:n,profilePosts:s,handleDeletePost:i=>{u(i,a=>{let t=s.value.findIndex(y=>y.id==a);t!==-1&&s.value.splice(t,1)})}}},components:{TimelinePublication:I,TimelinePublicationSkeleton:E,TimelineEmptyState:M}}),j={key:0,class:"block"},F={key:0},N={key:1,class:"block py-40"};function V(e,r,s,u,n,p){const f=d("TimelinePublicationSkeleton"),i=d("TimelinePublication"),a=d("TimelineEmptyState");return e.state.isLoading?(o(),l("div",j,[(o(),l(c,null,P(3,t=>v(f)),64))])):(o(),l(c,{key:1},[e.profilePosts.length?(o(),l(c,{key:0},[(o(!0),l(c,null,P(e.profilePosts,t=>(o(),m(i,{postData:t,onDelete:y=>e.handleDeletePost(t),key:t.hash_id},null,8,["postData","onDelete"]))),128)),e.state.isLoadingContent?(o(),l("div",F,r[0]||(r[0]=[k("div",{class:"flex justify-center my-4"},[k("div",{class:"colibri-primary-animation"})],-1)]))):_("",!0)],64)):(o(),l("div",N,[e.contentType=="posts"?(o(),m(a,{key:0,desc:e.$t("empty_state.profile.posts.desc")},null,8,["desc"])):(o(),m(a,{key:1,desc:e.$t("empty_state.profile.media.desc")},null,8,["desc"]))]))],64))}const J=g(B,[["render",V]]);export{J as P};
