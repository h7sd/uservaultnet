import{k as h,c as m,s as o,i as r,e as i,q as p,y as T,F as _,b as P,r as w,o as E,d as l,x as u,t as c}from"./vendor-20TtR0Rd.js";import{_ as y,c as $}from"./global.properties-DKM1fd6s.js";import{f as k,a as v}from"./application-DEz9sPnz.js";import{T as S}from"./TextInput-Bad2IYlx.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./inbox.store-CHx7CB4w.js";import"./index-ciglwFMH.js";import"./ui-Bp8YvxdW.js";const V=h({setup:function(){const t=P({isLoading:!0,isSubmitting:!1,formErrors:{password:[],message:[]}}),s=w({password:"",message:""});return E(async()=>{setTimeout(()=>{t.isLoading=!1},500)}),{state:t,formData:s,submitForm:()=>{t.isSubmitting===!1&&(t.isSubmitting=!0,Object.keys(t.formErrors).forEach(e=>{t.formErrors[e]=[]}),$().userSettings().with(s.value).delete("account/delete").then(e=>{toastSuccess(e.data.message),setTimeout(()=>{window.location.href=embedder("routes.user_auth_index")},3e3)}).catch(e=>{t.isSubmitting=!1,e.response&&(toastError(e.response.data.message),e.response.data.errors&&Object.keys(e.response.data.errors).forEach(n=>{t.formErrors[n]=e.response.data.errors[n]}))}))}}},components:{PageTitle:v,TextInput:S,PrimaryPillButton:k}}),B={class:"mb-8"},D={key:0,class:"block"},I={class:"mb-8"},L=["innerHTML"],x={class:"mb-6"},M={class:"mb-10"},F={class:"block"},A={key:1,class:"block"},C={class:"flex-center h-96"};function N(t,s,e,n,j,H){const f=i("PageTitle"),d=i("TextInput"),g=i("PrimaryPillButton"),b=i("PrimarySpinAnimation");return l(),m(_,null,[o("div",B,[r(f,{hasBack:!0,titleText:t.$t("settings.account_actions")},null,8,["titleText"])]),t.state.isLoading?(l(),m("div",A,[o("div",C,[r(b)])])):(l(),m("div",D,[o("div",I,[o("h6",{class:"text-par-s text-red-900",innerHTML:t.$t("settings.forms.actions.page_desc")},null,8,L)]),o("form",{onSubmit:s[2]||(s[2]=T((...a)=>t.submitForm&&t.submitForm(...a),["prevent"]))},[o("div",x,[r(d,{modelValue:t.formData.password,"onUpdate:modelValue":s[0]||(s[0]=a=>t.formData.password=a),modelModifiers:{trim:!0},textLength:120,isPassword:!0,inputErrors:t.state.formErrors.password,labelText:t.$t("settings.forms.actions.password"),placeholder:t.$t("settings.forms.actions.password_placeholder")},{feedbackInfo:p(()=>[u(c(t.$t("settings.forms.actions.password_helper")),1)]),_:1},8,["modelValue","inputErrors","labelText","placeholder"])]),o("div",M,[r(d,{modelValue:t.formData.message,"onUpdate:modelValue":s[1]||(s[1]=a=>t.formData.message=a),modelModifiers:{trim:!0},textLength:1200,asText:!0,inputErrors:t.state.formErrors.message,labelText:t.$t("settings.forms.actions.message"),placeholder:t.$t("settings.forms.actions.message_placeholder")},{feedbackInfo:p(()=>[u(c(t.$t("settings.forms.actions.message_helper")),1)]),_:1},8,["modelValue","inputErrors","labelText","placeholder"])]),o("div",F,[r(g,{loading:t.state.isSubmitting,buttonType:"submit",buttonRole:"danger",buttonText:t.$t("settings.forms.actions.delete_account")},null,8,["loading","buttonText"])])],32)]))],64)}const W=y(V,[["render",N]]);export{W as default};
