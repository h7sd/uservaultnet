import{k as S,c as p,s as n,i as l,e as m,t as u,q as d,y as P,F as $,r as h,b as k,o as E,H as V,d as c,x as f}from"./vendor-20TtR0Rd.js";import{_ as B,c as g}from"./global.properties-DKM1fd6s.js";import{a as x,f as D}from"./application-DEz9sPnz.js";import{T as F}from"./TextInput-Bad2IYlx.js";import{S as I}from"./SectionToggle-BmUma1X-.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./inbox.store-CHx7CB4w.js";import"./index-ciglwFMH.js";import"./ui-Bp8YvxdW.js";const w=S({setup:function(){const e=h({}),s=V(),o=k({isLoading:!0,isSubmitting:!1,formErrors:{phone:[]}}),i=h({phone:"",phone_privacy:!0});return E(async()=>{await g().userSettings().getFrom("phone/settings").then(t=>{let a=t.data.data;e.value=a.validation_rules,i.value.phone=a.phone,i.value.phone_privacy=a.privacy_settings.phone_privacy}),o.isLoading=!1}),{state:o,formData:i,validationRules:e,submitForm:async()=>{o.isSubmitting===!1&&(o.isSubmitting=!0,Object.keys(o.formErrors).forEach(t=>{o.formErrors[t]=[]}),await g().userSettings().with(i.value).putTo("phone/update").then(t=>{t.data.data.confirmation_required?s.push({name:"settings_phone_confirm"}):toastSuccess(__t("toast.forms.changes_saved"))}).catch(t=>{t.response&&(toastError(t.response.data.message),t.response.data.errors&&Object.keys(t.response.data.errors).forEach(a=>{o.formErrors[a]=t.response.data.errors[a]}))}),o.isSubmitting=!1)}}},components:{PrimaryPillButton:D,TextInput:F,PageTitle:x,SectionToggle:I}}),L={class:"mb-8"},N={key:0,class:"block"},R={class:"mb-8"},A={class:"text-par-m text-lab-sc"},C={class:"mb-10"},j={class:"mb-10"},q={class:"block mb-16"},M={key:1,class:"block"},O={class:"flex-center h-96"};function U(e,s,o,i,t,a){const _=m("PageTitle"),b=m("TextInput"),v=m("SectionToggle"),T=m("PrimaryPillButton"),y=m("PrimarySpinAnimation");return c(),p($,null,[n("div",L,[l(_,{hasBack:!0,titleText:e.$t("settings.phone_settings")},null,8,["titleText"])]),e.state.isLoading?(c(),p("div",M,[n("div",O,[l(y)])])):(c(),p("div",N,[n("div",R,[n("h6",A,u(e.$t("settings.forms.phone_number.page_desc")),1)]),n("form",{onSubmit:s[2]||(s[2]=P((...r)=>e.submitForm&&e.submitForm(...r),["prevent"]))},[n("div",C,[l(b,{textLength:e.validationRules.phone.max,inputErrors:e.state.formErrors.phone,modelValue:e.formData.phone,"onUpdate:modelValue":s[0]||(s[0]=r=>e.formData.phone=r),labelText:e.$t("settings.forms.phone_number.phone_number"),placeholder:e.$t("settings.forms.phone_number.phone_number_placeholder")},{feedbackInfo:d(()=>[f(u(e.$t("settings.forms.phone_number.phone_number_helper")),1)]),_:1},8,["textLength","inputErrors","modelValue","labelText","placeholder"])]),n("div",j,[l(v,{iconName:"shield-01",modelValue:e.formData.phone_privacy,"onUpdate:modelValue":s[1]||(s[1]=r=>e.formData.phone_privacy=r),titleText:e.$t("labels.privacy")},{captionText:d(()=>[f(u(e.$t("settings.forms.phone_number.privacy_helper")),1)]),_:1},8,["modelValue","titleText"])]),n("div",q,[l(T,{loading:e.state.isSubmitting,buttonType:"submit",buttonText:e.$t("labels.save_changes")},null,8,["loading","buttonText"])])],32)]))],64)}const ee=B(w,[["render",U]]);export{ee as default};
