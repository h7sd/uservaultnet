import{A as O}from"./index-CZvQntMR.js";import{_ as b}from"./global.properties-DKM1fd6s.js";import{k as y,e as p,c as s,d as i,s as n,v as x,j as g,t as h,i as u,l as m,F as P,f as V,r as _,w as I}from"./vendor-20TtR0Rd.js";import{g as B,r as C}from"./application-DEz9sPnz.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./inbox.store-CHx7CB4w.js";import"./index-ciglwFMH.js";import"./ui-Bp8YvxdW.js";const S=y({props:{optionData:{type:Object,default:0},optionIndex:{type:Number,default:0},removable:{type:Boolean,default:!0},textLength:{type:String,default:""},labelTextBrackets:{type:String,default:""},placeholder:{type:String,default:""},name:{type:String,default:""},modelValue:{type:String,required:!0}},emits:["update:modelValue","remove"],setup:function(e,o){const l=m(()=>e.optionIndex),r=m(()=>e.optionData);return{optionIndex:l,optionData:r,updateModelValue:t=>{o.emit("update:modelValue",t.target.value)},removeOption:()=>{o.emit("remove",l.value)}}}}),w={class:"block"},A={class:"flex-1"},L=["value","placeholder","name"],D={class:"shrink-0 h-11 inline-flex items-center"},T=["disabled"],z={class:"size-5"};function R(e,o,l,r,t,c){const d=p("SvgIcon");return i(),s("div",w,[n("div",{class:g(["flex bg-fill-qt rounded-xs overflow-hidden px-3 group",{"ring-1 ring-red-900 bg-transparent":e.optionData.isInvalid}])},[n("div",A,[n("input",{onInput:o[0]||(o[0]=(...a)=>e.updateModelValue&&e.updateModelValue(...a)),value:e.modelValue,class:"block w-full bg-transparent outline-hidden text-par-m text-lab-pr h-11 pr-4 placeholder:text-lab-tr hover:placeholder:text-lab-sc",placeholder:e.placeholder,name:e.name},null,40,L)]),n("div",D,[e.textLength?(i(),s("span",{key:0,class:g(["text-cap-l group-hover:invisible",e.modelValue.length>e.textLength?"text-red-900":"text-lab-sc"])},h(e.modelValue.length)+"/"+h(e.textLength),3)):x("",!0),n("button",{disabled:!e.removable,onClick:o[1]||(o[1]=(...a)=>e.removeOption&&e.removeOption(...a)),type:"button",class:"hidden group-hover:inline-flex items-center justify-center ml-2 size-6 bg-fill-sc rounded-full text-lab-tr cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"},[n("span",z,[u(d,{name:"x"})])],8,T)])],2)])}const j=b(S,[["render",R]]),N={},E={class:"overflow-hidden inline-flex-center size-medium-avatar bg-fill-tr"};function F(e,o){const l=p("SvgIcon");return i(),s("button",{class:"block overflow-hidden size-medium-avatar hover:shadow-md rounded-full smoothing",onClick:o[0]||(o[0]=(...r)=>e.makeAction&&e.makeAction(...r)),type:"button"},[n("div",E,[u(l,{name:"plus",classes:"size-6 text-brand-900"})])])}const M=b(N,[["render",F]]),q=y({emits:["remove"],setup:function(e,o){const l=_(!1),r=C(),t=_([]);r.pollHasChoices()?t.value=r.pollChoices:t.value=[{choice_text:""},{choice_text:""},{choice_text:""}];const c=m(()=>t.value.length<10);I(t,a=>{r.setPollChoices(a)},{deep:!0});const d=m(()=>t.value.length>2);return{isLoading:l,pollOptions:t,canAddOption:c,canRemoveOption:d,addOption:()=>{c.value&&t.value.push({choice_text:""})},removeOption:a=>{d.value&&O.make(t.value).removeItem(a)},removePoll:()=>{o.emit("remove"),l.value=!0}}},components:{PollOptionInput:j,PrimaryTextButton:B,PrimaryAddButton:M}}),U={class:"overflow-hidden rounded-2xl border border-fill-pr"},H={class:"p-4"},G={class:"mb-4"},J={class:"text-lab-pr2 text-par-s mb-1.5"},K={class:"block overflow-hidden rounded-md"},Q={key:0,class:"flex justify-center mt-4"},W={class:"flex justify-center border-t border-fill-pr p-4"};function X(e,o,l,r,t,c){const d=p("PollOptionInput"),a=p("PrimaryAddButton"),$=p("PrimaryTextButton");return i(),s("div",U,[n("div",H,[n("div",G,[n("h4",J,h(e.$t("labels.answer_options")),1)]),n("div",K,[(i(!0),s(P,null,V(e.pollOptions,(v,f)=>(i(),s("div",{key:f,class:"border-b border-fill-pr last:border-none"},[u(d,{onRemove:e.removeOption,modelValue:v.choice_text,"onUpdate:modelValue":k=>v.choice_text=k,optionIndex:f,optionData:v,removable:e.canRemoveOption,placeholder:e.$t("labels.option_number",{number:f+1}),textLength:"40"},null,8,["onRemove","modelValue","onUpdate:modelValue","optionIndex","optionData","removable","placeholder"])]))),128))]),e.canAddOption?(i(),s("div",Q,[u(a,{onClick:e.addOption},null,8,["onClick"])])):x("",!0)]),n("div",W,[u($,{onClick:e.removePoll,loading:e.isLoading,buttonText:e.$t("editor.remove_poll"),buttonRole:"danger"},null,8,["onClick","loading","buttonText"])])])}const se=b(q,[["render",X]]);export{se as default};
