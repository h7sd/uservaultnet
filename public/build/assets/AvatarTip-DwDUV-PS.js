import{_ as b,c as f}from"./global.properties-DKM1fd6s.js";import{f as g}from"./application-DEz9sPnz.js";import{H as v}from"./HeadingBlock-CnHEzSL2.js";import{A as k}from"./AvatarLarge-CBtIYgLF.js";import{k as _,e as l,c as B,d as c,s as n,i as p,p as A,v as S,r as h,b as y}from"./vendor-20TtR0Rd.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./inbox.store-CHx7CB4w.js";import"./index-ciglwFMH.js";import"./ui-Bp8YvxdW.js";const C=_({props:{isSkippable:{type:Boolean,default:!1}},emits:["close"],setup:function(t,a){const s=h(null),o=y({isSubmitting:!1}),r=i=>{o.isSubmitting=!0,f().tips().with(i).withHeaders({"Content-Type":"multipart/form-data"}).sendTo("avatar/update").then(e=>{a.emit("close")}).catch(e=>{o.isSubmitting=!1})};return{state:o,imageInput:s,skip:()=>{r({skip:!0})},selectAvatar:()=>{s.value.click()},uploadAvatar:i=>{const e=new FormData;e.append("image",i.target.files[0]),r(e)}}},components:{PrimaryPillButton:g,HeadingBlock:v,AvatarLarge:k}}),P={class:"block"},$={class:"block mb-12"},T={class:"flex items-center flex-col select-none mb-4"},H={class:"flex justify-between"};function w(t,a,s,o,r,i){const e=l("AvatarLarge"),u=l("HeadingBlock"),m=l("PrimaryPillButton");return c(),B("form",P,[n("div",$,[n("div",T,[p(e,{avatarSrc:t.$embedder("assets.images.upload_avatar")},null,8,["avatarSrc"])]),p(u,{title:t.$t("tips.onboarding_avatar.title"),caption:t.$t("tips.onboarding_avatar.caption")},null,8,["title","caption"])]),n("div",H,[p(m,{loading:t.state.isSubmitting,onClick:t.selectAvatar,type:"button",buttonText:t.$t("labels.upload_avatar"),buttonSize:"lm"},null,8,["loading","onClick","buttonText"]),!t.state.isSubmitting&&t.isSkippable?(c(),A(m,{key:0,onClick:t.skip,buttonText:t.$t("labels.no_skip_it"),buttonSize:"lm",buttonRole:"marginalDanger"},null,8,["onClick","buttonText"])):S("",!0)]),n("input",{type:"file",onChange:a[0]||(a[0]=(...d)=>t.uploadAvatar&&t.uploadAvatar(...d)),accept:"image/*",ref:"imageInput",class:"hidden"},null,544)])}const q=b(C,[["render",w]]);export{q as default};
