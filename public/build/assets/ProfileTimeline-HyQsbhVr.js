import{u as T}from"./index-B5kc-12x.js";import{_ as v,c as g}from"./global.properties-DKM1fd6s.js";import{u as h}from"./index-CA1Yx5qL.js";import{T as b}from"./TimelinePublicationSkeleton-BPtyMk-B.js";import{T as _}from"./TimelinePublication-AFX4WV3m.js";import{T as C}from"./TimelineEmptyState-BFq-oSbr.js";import{k as D,c as l,F as c,f as P,i as S,e as d,v as L,p as m,s as k,r as $,b as M,o as E,M as I,d as o}from"./vendor-20TtR0Rd.js";const B=D({props:{contentType:{type:String,default:"posts"}},setup(e){const r=I("profileData"),s=$([]),{postDeleter:u}=h(),n=M({noMoreContent:!1,isLoading:!0,isLoadingContent:!1}),p=async()=>{try{if(!n.isLoadingContent&&!n.noMoreContent){n.isLoadingContent=!0;let i=0;s.value.length&&(i=s.value.at(-1).id),await g().userProfile().params({id:r.value.id,filter:{type:e.contentType,cursor:i}}).getFrom("profile/posts").then(function(a){let t=a.data.data;t.length?s.value=s.value.concat(t):n.noMoreContent=!0}).catch(a=>{a.response&&(n.noMoreContent=!0)}),n.isLoadingContent=!1}}catch(i){console.log(i)}};return T({callback:p}),E(async()=>{await p(),n.isLoading=!1}),{state:n,profilePosts:s,handleDeletePost:i=>{u(i,a=>{let t=s.value.findIndex(y=>y.id==a);t!==-1&&s.value.splice(t,1)})}}},components:{TimelinePublication:_,TimelinePublicationSkeleton:b,TimelineEmptyState:C}}),F={key:0,class:"block"},N={key:0},V={key:1,class:"block py-40"};function j(e,r,s,u,n,p){const f=d("TimelinePublicationSkeleton"),i=d("TimelinePublication"),a=d("TimelineEmptyState");return e.state.isLoading?(o(),l("div",F,[(o(),l(c,null,P(3,t=>S(f)),64))])):(o(),l(c,{key:1},[e.profilePosts.length?(o(),l(c,{key:0},[(o(!0),l(c,null,P(e.profilePosts,t=>(o(),m(i,{postData:t,onDelete:y=>e.handleDeletePost(t),key:t.hash_id},null,8,["postData","onDelete"]))),128)),e.state.isLoadingContent?(o(),l("div",N,r[0]||(r[0]=[k("div",{class:"flex justify-center my-4"},[k("div",{class:"colibri-primary-animation"})],-1)]))):L("",!0)],64)):(o(),l("div",V,[e.contentType=="posts"?(o(),m(a,{key:0,desc:e.$t("empty_state.profile.posts.desc")},null,8,["desc"])):(o(),m(a,{key:1,desc:e.$t("empty_state.profile.media.desc")},null,8,["desc"]))]))],64))}const K=v(B,[["render",j]]);export{K as P};
