import{_ as k,d as g,r as s,c as l,o,C as J,a,F as b,i as B,j as n,p as C,e as _,m as f,t as h,L as D,u as N,w as v,g as M,M as O,H as A,B as E,q as S,h as I,l as T,A as K,I as Q,$ as W}from"./global.properties-ieI6Xwik.js";import{T as X,L as z}from"./TimelinePublicationSkeleton-BlliYZGM.js";import{l as Y,a as Z,j as x,N as ee,i as te,d as F,P as oe}from"./application-B35z453N.js";import{A as ne}from"./AvatarLarge-CweW1Ivl.js";import{D as V}from"./DropdownButton-b5Hfnztp.js";import{S as se}from"./SheetInfo-CiZv0yAD.js";import{S as j}from"./SheetTitle-Cb1vf6Xi.js";import{P as H,F as ae}from"./PeopleListItem-q67tTG6c.js";import{P as R}from"./PeopleListItemSkeleton-Cg2wog8e.js";import{T as q}from"./TimelineEmptyState-D2cMbIuH.js";import{C as ie}from"./TabsItem-BjTkiLQH.js";import{T as le}from"./TabsLink-BILPIXUq.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./swiper-element-bundle-DBu82uhE.js";import"./AvatarRightSided-DIsCtZes.js";const re=g({setup:function(){return{}},components:{TimelinePublicationSkeleton:X}});function ce(e,t,r,i,u,c){const p=s("Border"),m=s("TimelinePublicationSkeleton");return o(),l(b,null,[t[0]||(t[0]=J('<div class="block relative mb-4"><div class="h-32 skeleton-square mb-4"></div><div class="relative z-10 border-4 border-bg-pr skeleton-circle rounded-full backdrop-blur-2xl size-large-avatar -mt-14 ml-4"></div><div class="px-4 mt-2"><div class="w-10/12 h-4 skeleton mb-2"></div><div class="h-2 skeleton w-6/12 mb-2"></div><div class="h-2 skeleton w-4/12 mb-4"></div><div class="h-7 skeleton"></div></div></div>',1)),a(p),(o(),l(b,null,B(3,d=>a(m)),64))],64)}const pe=k(re,[["render",ce]]),ue=g({setup:function(){const e=D("profileData"),t=Y();return{profileData:e,lightboxAvatar:function(){t.add({albumName:`${e.value.name} ${e.value.caption}`,images:[e.value.avatar_url]})}}},components:{AvatarLarge:ne}}),de={class:"flex items-center gap-3"},fe={class:"block"},me={class:"text-title-2 font-semibold leading-none text-lab-pr2"},_e={class:"text-par-n text-lab-sc"},he={class:"inline-flex items-center gap-1"};function be(e,t,r,i,u,c){const p=s("AvatarLarge"),m=s("VerificationBadge");return o(),l("div",de,[n("div",{onClick:t[0]||(t[0]=(...d)=>e.lightboxAvatar&&e.lightboxAvatar(...d)),class:"cursor-pointer"},[a(p,{avatarSrc:e.profileData.avatar_url},null,8,["avatarSrc"])]),n("div",fe,[n("h1",me,[C(h(e.profileData.name)+" ",1),e.profileData.verified?(o(),_(m,{key:0,size:"sm"})):f("",!0)]),n("p",_e,[n("span",he,[n("span",null,h(e.profileData.caption),1)])])])])}const $e=k(ue,[["render",be]]),ve=g({setup:function(){return{profileData:D("profileData")}}}),ke={class:"block"},ge={key:0},ye=["innerHTML"],Pe={key:1},we=["href"];function De(e,t,r,i,u,c){return o(),l("div",ke,[e.profileData.bio?(o(),l("div",ge,[n("p",{class:"text-par-n text-lab-pr2",innerHTML:e.$mdInline(e.profileData.bio)},null,8,ye)])):f("",!0),e.profileData.website?(o(),l("div",Pe,[n("a",{href:e.profileData.website,target:"_blank",class:"text-lab-pr text-par-m underline"},h(e.profileData.website),9,we)])):f("",!0)])}const Le=k(ve,[["render",De]]),Ce=g({setup:function(){const e=M({mainMenu:O(),editProfileMenu:O()}),t=A(),r=D("profileData");return{permissions:r.value.meta.permissions,state:e,profileData:r,goBack:function(){t.go(-1)},mentionUser:()=>{E.emit("post-editor:open",{mentionName:r.value.username})},copyProfileLink:()=>{try{navigator.clipboard.writeText(r.value.profile_url).then(()=>{toastSuccess(__t("toast.profile_link_copied"),1e3)})}catch(i){toastError(i,1e3)}},reportProfile:()=>{E.emit("report:open",{type:"user",reportableId:r.value.id})}}},components:{DropdownButton:V,ActionSheet:F,ActionSheetItem:te,NotificationsButton:ee,ActionSheetGroup:x,PrimaryIconButton:Z,SheetInfo:se}}),Se={class:"flex items-center leading-none gap-2"},Me={class:"text-lab-pr2 font-medium text-par-l"},Be={class:"shrink-0 ml-auto"},Te={class:"shrink-0"},Ae={class:"mb-4"};function Ie(e,t,r,i,u,c){const p=s("PrimaryIconButton"),m=s("NotificationsButton"),d=s("ActionSheetItem"),y=s("ActionSheetGroup"),P=s("RouterLink"),w=s("ActionSheet"),$=s("SheetInfo");return o(),l(b,null,[n("div",Se,[n("span",{onClick:t[0]||(t[0]=(...L)=>e.goBack&&e.goBack(...L)),class:"flex items-center -translate-x-1.5 cursor-pointer"},[a(p,{iconName:"chevron-left",buttonColor:"text-lab-pr2"}),n("span",Me,h(e.profileData.username),1)]),n("div",Be,[a(m)]),n("div",Te,[a(p,{onClick:N(e.state.mainMenu.open,["stop"]),iconName:"circle-dots",iconType:"line",buttonColor:"text-lab-pr2"},null,8,["onClick"])])]),e.state.mainMenu.status?(o(),_(w,{key:0,onClose:e.state.mainMenu.close,isMuted:!0},{default:v(()=>[n("div",{onClick:t[1]||(t[1]=N((...L)=>e.state.mainMenu.close&&e.state.mainMenu.close(...L),["stop"]))},[n("div",Ae,[a(y,null,{default:v(()=>[e.permissions.can_mention?(o(),_(d,{key:0,onClick:e.mentionUser,iconName:"at-sign",textLabel:e.$t("dd.user.mention",{username:e.profileData.username})},null,8,["onClick","textLabel"])):f("",!0),a(d,{onClick:e.copyProfileLink,iconName:"link-01",iconType:"solid",textLabel:e.$t("dd.user.copy_link")},null,8,["onClick","textLabel"])]),_:1})]),a(y,null,{default:v(()=>[e.permissions.can_report?(o(),_(d,{key:0,onClick:e.reportProfile,itemColor:"text-red-900",iconName:"annotation-alert",textLabel:e.$t("dd.user.report",{username:e.profileData.username})},null,8,["onClick","textLabel"])):f("",!0),e.permissions.can_block?(o(),_(d,{key:1,disabled:!0,onClick:e.$comingSoon,itemColor:"text-red-900",iconName:"slash-circle-01",textLabel:e.$t("dd.user.block",{username:e.profileData.username})},null,8,["onClick","textLabel"])):f("",!0),e.permissions.can_mute?(o(),_(d,{key:2,disabled:!0,onClick:e.$comingSoon,itemColor:"text-red-900",iconName:"volume-x",textLabel:e.$t("dd.user.mute",{username:e.profileData.username})},null,8,["onClick","textLabel"])):f("",!0),a(P,{to:{name:"profile_info",params:{id:e.profileData.username}}},{default:v(()=>[a(d,{notLast:!0,iconName:"info-circle",textLabel:e.$t("dd.user.about")},null,8,["textLabel"])]),_:1},8,["to"]),e.permissions.can_follow?f("",!0):(o(),l(b,{key:3},[a(d,{onClick:e.state.editProfileMenu.open,iconName:"pencil-02",textLabel:e.$t("labels.edit_profile")},null,8,["onClick","textLabel"]),a(P,{to:{name:"settings_navigator"}},{default:v(()=>[a(d,{iconName:"settings-04",textLabel:e.$t("labels.account_settings")},null,8,["textLabel"])]),_:1})],64))]),_:1})])]),_:1},8,["onClose"])):f("",!0),e.state.editProfileMenu.status?(o(),_(w,{key:1,onClose:e.state.editProfileMenu.close},{default:v(()=>[a($,{onClose:e.state.editProfileMenu.close,sheetTitle:e.$t("info.only_desktop.title"),sheetDesc:e.$t("info.only_desktop.profile_edit")},null,8,["onClose","sheetTitle","sheetDesc"])]),_:1},8,["onClose"])):f("",!0)],64)}const Fe=k(Ce,[["render",Ie]]),Ne=g({setup:function(){return{profileData:D("profileData")}}}),Oe={class:"flex flex-col gap-3"},Ee={key:0,class:"inline-flex gap-1 text-lab-pr2 leading-zero items-center"},ze={class:"text-lab-pr3"},Ve={class:"text-par-n"},je={key:0},He={key:1},Re={key:2},qe={class:"inline-flex gap-1 text-lab-pr2 leading-zero items-center"},Ge={class:"text-lab-pr3"},Ue={class:"text-par-n"};function Je(e,t,r,i,u,c){const p=s("SvgIcon");return o(),l("div",Oe,[e.profileData.country?(o(),l("div",Ee,[n("span",ze,[a(p,{name:"marker-pin-01",type:"line",classes:"size-icon-small"})]),n("span",Ve,[e.profileData.country_name?(o(),l("span",je,h(e.profileData.country_name),1)):f("",!0),e.profileData.country_name&&e.profileData.city?(o(),l("span",He,", ")):f("",!0),e.profileData.city?(o(),l("span",Re,h(e.profileData.city),1)):f("",!0)])])):f("",!0),n("div",qe,[n("span",Ge,[a(p,{name:"calendar-check-01",type:"line",classes:"size-icon-small"})]),n("span",Ue,h(e.$t("labels.joined_at_date",{date:e.profileData.join_date.formatted})),1)])])}const Ke=k(Ne,[["render",Je]]),Qe=g({setup:function(){const e=D("profileData"),t=S([]),r=S(0),i=M({isLoading:!0,isLoadingContent:!1,noMoreContent:!1}),u=async()=>{await T().userProfile().params({id:e.value.id,cursor:r.value}).getFrom("profile/followers").then(function(c){r.value?c.data.data.length?t.value=t.value.concat(c.data.data):i.noMoreContent=!0:t.value=c.data.data}).catch(c=>{t.value=[]})};return I(async()=>{await u(),i.isLoading=!1}),{profileData:e,state:i,people:t,loadMoreContent:async()=>{if(i.isLoadingContent||!t.value.length)return!1;i.isLoadingContent=!0,r.value=t.value.at(-1).cursor_id,await u(),i.isLoadingContent=!1}}},components:{ActionSheet:F,PeopleListItem:H,PeopleListItemSkeleton:R,SheetTitle:j,LoadmoreButton:z,TimelineEmptyState:q}}),We={class:"h-full flex flex-col"},Xe={class:"px-4 pb-4 border-b border-b-bord-pr text-center"},Ye={class:"flex-1 overflow-y-auto"},Ze={key:1,class:"py-42"},xe={key:0,class:"flex justify-center py-4"};function et(e,t,r,i,u,c){const p=s("SheetTitle"),m=s("PeopleListItemSkeleton"),d=s("TimelineEmptyState"),y=s("PeopleListItem"),P=s("LoadmoreButton"),w=s("ActionSheet");return o(),_(w,null,{default:v(()=>[n("div",We,[n("div",Xe,[a(p,{title:e.$t("labels.followers_count",e.profileData.followers_count.raw)+" "+e.profileData.followers_count.formatted},null,8,["title"])]),n("div",Ye,[e.state.isLoading?(o(),l(b,{key:0},B(3,$=>a(m,{key:$})),64)):e.people.length===0?(o(),l("div",Ze,[a(d,{desc:e.$t("labels.user_no_followers",{name:e.profileData.name})},null,8,["desc"])])):(o(),l(b,{key:2},[(o(!0),l(b,null,B(e.people,$=>(o(),_(y,{key:$.id,userData:$},null,8,["userData"]))),128)),e.state.isLoadingContent?(o(),l("div",xe,t[0]||(t[0]=[n("div",{class:"colibri-primary-animation"},null,-1)]))):(o(),l(b,{key:1},[e.state.noMoreContent?f("",!0):(o(),_(P,{key:0,onClick:e.loadMoreContent},null,8,["onClick"]))],64))],64))])])]),_:1})}const tt=k(Qe,[["render",et]]),ot=g({setup:function(){const e=D("profileData"),t=S([]),r=S(0),i=M({isLoading:!0,isLoadingContent:!1,noMoreContent:!1}),u=async()=>{await T().userProfile().params({id:e.value.id,cursor:r.value}).getFrom("profile/followings").then(function(c){r.value?c.data.data.length?t.value=t.value.concat(c.data.data):i.noMoreContent=!0:t.value=c.data.data}).catch(c=>{t.value=[]})};return I(async()=>{await u(),i.isLoading=!1}),{profileData:e,state:i,people:t,loadMoreContent:async()=>{if(i.isLoadingContent||!t.value.length)return!1;i.isLoadingContent=!0,r.value=t.value.at(-1).cursor_id,await u(),i.isLoadingContent=!1}}},components:{ActionSheet:F,PeopleListItem:H,PeopleListItemSkeleton:R,SheetTitle:j,LoadmoreButton:z,TimelineEmptyState:q}}),nt={class:"h-full flex flex-col"},st={class:"px-4 pb-4 border-b border-b-bord-pr text-center"},at={class:"flex-1 overflow-y-auto"},it={key:1,class:"py-42"},lt={key:0,class:"flex justify-center py-4"};function rt(e,t,r,i,u,c){const p=s("SheetTitle"),m=s("PeopleListItemSkeleton"),d=s("TimelineEmptyState"),y=s("PeopleListItem"),P=s("LoadmoreButton"),w=s("ActionSheet");return o(),_(w,null,{default:v(()=>[n("div",nt,[n("div",st,[a(p,{title:e.$t("labels.following_count",e.profileData.following_count.raw)+" "+e.profileData.following_count.formatted},null,8,["title"])]),n("div",at,[e.state.isLoading?(o(),l(b,{key:0},B(3,$=>a(m,{key:$})),64)):e.people.length===0?(o(),l("div",it,[a(d,{desc:e.$t("labels.user_no_following",{name:e.profileData.name})},null,8,["desc"])])):(o(),l(b,{key:2},[(o(!0),l(b,null,B(e.people,$=>(o(),_(y,{key:$.id,userData:$},null,8,["userData"]))),128)),e.state.isLoadingContent?(o(),l("div",lt,t[0]||(t[0]=[n("div",{class:"colibri-primary-animation"},null,-1)]))):(o(),l(b,{key:1},[e.state.noMoreContent?f("",!0):(o(),_(P,{key:0,onClick:e.loadMoreContent},null,8,["onClick"]))],64))],64))])])]),_:1})}const ct=k(ot,[["render",rt]]),pt=g({setup:function(){const e=D("profileData");return{state:M({isFollowersModalOpen:!1,isFollowingsModalOpen:!1}),profileData:e}},components:{ProfileFollowers:tt,ProfileFollowings:ct}}),ut={class:"flex gap-4"},dt={class:"font-semibold"},ft={class:"font-semibold"},mt={class:"text-lab-pr2 text-par-m"},_t={class:"font-semibold"};function ht(e,t,r,i,u,c){const p=s("ProfileFollowers"),m=s("ProfileFollowings");return o(),l(b,null,[n("div",ut,[n("span",{onClick:t[0]||(t[0]=d=>e.state.isFollowersModalOpen=!0),class:"cursor-pointer text-lab-pr2 text-par-m"},[n("span",dt,h(e.profileData.followers_count.formatted),1),C(" "+h(e.$t("labels.followers_count",e.profileData.followers_count.raw)),1)]),n("span",{onClick:t[1]||(t[1]=d=>e.state.isFollowingsModalOpen=!0),class:"cursor-pointer text-lab-pr2 text-par-m"},[n("span",ft,h(e.profileData.following_count.formatted),1),C(" "+h(e.$t("labels.following_count",e.profileData.following_count.raw)),1)]),n("span",mt,[n("span",_t,h(e.profileData.publications_count.formatted),1),C(" "+h(e.$t("labels.posts_count",e.profileData.publications_count.raw)),1)])]),e.state.isFollowersModalOpen?(o(),_(p,{key:0,onClose:t[2]||(t[2]=d=>e.state.isFollowersModalOpen=!1)})):f("",!0),e.state.isFollowingsModalOpen?(o(),_(m,{key:1,onClose:t[3]||(t[3]=d=>e.state.isFollowingsModalOpen=!1)})):f("",!0)],64)}const bt=k(pt,[["render",ht]]),$t=g({setup:function(){const e=D("profileData"),t=A(),r=M({sendingMessage:!1});return{profileData:e,state:r,sendMessage:async()=>{r.sendingMessage=!0,await T().messenger().with({user_id:e.value.id}).sendTo("chats/create").then(i=>{let u=i.data.data;t.push({name:"messenger_chat",params:{chat_id:u.chat_id}})}).catch(i=>{i.response&&toastError(i.response.data.message)})}}},components:{FollowPillButton:ae,PrimaryPillButton:oe}}),vt={class:"grid grid-cols-2 gap-2"},kt={class:"col-span-1"},gt={class:"col-span-1"};function yt(e,t,r,i,u,c){const p=s("FollowPillButton"),m=s("PrimaryPillButton");return o(),l("div",vt,[n("div",kt,[a(p,{buttonFluid:!0,relationship:e.profileData.meta.relationship.follow,followableId:e.profileData.id,buttonSize:"md"},null,8,["relationship","followableId"])]),n("div",gt,[a(m,{onClick:e.sendMessage,loading:e.state.sendingMessage,buttonFluid:!0,buttonText:e.$t("dd.user.send_message"),buttonSize:"md",buttonRole:"stroked"},null,8,["onClick","loading","buttonText"])])])}const Pt=k($t,[["render",yt]]),wt=g({props:["id"],setup:function(e){const t=K(),r=A(),i=M({isLoading:!0}),u=S(e.id);Q(()=>t.params.id,()=>{t.params.id!==u.value&&(u.value=t.params.id,p())});const c=S({});W("profileData",c),I(async()=>{u.value=e.id,await p()});const p=async()=>{i.isLoading=!0,await T().userProfile().params({id:e.id}).getFrom("profile").then(function(m){c.value=m.data.data}).catch(function(m){r.push({name:"error_404",params:{pathMatch:t.path.substring(1).split("/")},query:t.query,hash:t.hash})}),i.isLoading=!1};return{state:i,profileData:c}},components:{HeaderSkeleton:pe,ProfileAvatar:$e,ProfileBio:Le,ProfileOverview:Ke,ProfileMetrics:bt,ContentTabs:ie,TabsLink:le,ProfileActions:Pt,DropdownButton:V,ProfileControls:Fe}}),Dt={class:"px-4 pt-4 mb-2"},Lt={class:"mb-4"},Ct={class:"mb-2 px-4"},St={class:"mb-3 px-4"},Mt={class:"px-4"},Bt={key:0,class:"px-4 py-3"},Tt={key:1,class:"block sticky top-0 bg-bg-pr z-20"},At={class:"block border-t border-t-bord-pr"};function It(e,t,r,i,u,c){const p=s("HeaderSkeleton"),m=s("ProfileControls"),d=s("ProfileAvatar"),y=s("ProfileBio"),P=s("ProfileOverview"),w=s("ProfileMetrics"),$=s("ProfileActions"),L=s("TabsLink"),G=s("ContentTabs"),U=s("RouterView");return e.state.isLoading?(o(),_(p,{key:0})):(o(),l(b,{key:1},[n("div",Dt,[n("div",Lt,[a(m)]),a(d)]),n("div",Ct,[a(y)]),n("div",St,[a(P)]),n("div",Mt,[a(w)]),e.profileData.meta.permissions.can_follow?(o(),l("div",Bt,[a($)])):f("",!0),e.state.isLoading?f("",!0):(o(),l("div",Tt,[a(G,null,{default:v(()=>[a(L,{link:{name:"profile_posts"}},{default:v(()=>[C(h(e.$t("labels.posts")),1)]),_:1}),a(L,{link:{name:"profile_media"}},{default:v(()=>[C(h(e.$t("labels.media")),1)]),_:1}),a(L,{link:{name:"profile_info"}},{default:v(()=>[C(h(e.$t("labels.info")),1)]),_:1})]),_:1})])),n("div",At,[a(U)])],64))}const Wt=k(wt,[["render",It]]);export{Wt as default};
