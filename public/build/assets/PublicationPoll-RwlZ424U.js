const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PollVoterUsers-DPTGSqxP.js","assets/AvatarExtraSmall-CDoWzwp5.js","assets/vendor-20TtR0Rd.js","assets/global.properties-DKM1fd6s.js","assets/editor-CpZ7vO5P.js","assets/media-D4ZD3EDk.js"])))=>i.map(i=>d[i]);
import{_ as f,a as I,c as y}from"./global.properties-DKM1fd6s.js";import{m as g}from"./application-DEz9sPnz.js";import{k as b,e as d,c as i,d as s,s as o,P as V,p as v,t as c,j as k,l as n,v as x,i as u,F as C,f as w,B as z}from"./vendor-20TtR0Rd.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./inbox.store-CHx7CB4w.js";import"./index-ciglwFMH.js";import"./ui-Bp8YvxdW.js";const S=b({props:{choiceItem:{type:Object,default:{}},index:{type:Number,default:0},hasVotedPoll:{type:Boolean,default:!1}},emits:["vote"],setup:function(e,t){return{choiceItem:n(()=>e.choiceItem),vote:function(l){t.emit("vote",l)}}}}),B={class:"block"},T={class:"h-full absolute top-0 left-0 rounded-xs overflow-hidden w-full flex"},j={class:"flex gap-2 justify-between items-center leading-none relative z-10"},U={class:"size-4 shrink-0"},N={class:"flex-1 flex justify-between text-lab-pr overflow-hidden items-center"},A={class:"text-par-m font-medium flex-1 truncate mr-4 leading-normal"},D={class:"text-par-s font-semibold"};function E(e,t,r,l,p,m){const a=d("SvgIcon");return s(),i("div",B,[o("div",{onClick:t[0]||(t[0]=h=>e.vote(e.index)),class:k(["px-4 py-2.5 border border-bord-pr overflow-hidden rounded-xl relative",[!e.choiceItem.has_voted_choice&&e.hasVotedPoll?"cursor-default opacity-80":"cursor-pointer"]])},[o("div",T,[o("div",{class:"max-w-full h-full bg-bord-pr smoothing",style:V({width:`${e.choiceItem.percentage}%`})},null,4)]),o("div",j,[o("div",U,[e.choiceItem.has_voted_choice?(s(),v(a,{key:0,type:"solid",name:"check-circle",classes:"size-full text-green-900"})):(s(),v(a,{key:1,type:"line",name:"circle",classes:"size-full text-lab-sc"}))]),o("div",N,[o("span",A,c(e.choiceItem.choice_text),1),o("span",D,c(e.choiceItem.percentage)+"%",1)])])],2)])}const O=f(S,[["render",E]]),F=b({props:{postPoll:{type:Object,default:{}}},setup:function(e){const t=n(()=>e.postPoll),r=g(),l=n(()=>t.value.has_voted);return{postPoll:t,pollChoices:n(()=>t.value.choices),pollVotesTotal:n(()=>t.value.votes.length),hasVotedPoll:l,votePoll:p=>{l.value||y().userTimeline().with({choice_id:p,poll_id:t.value.id}).sendTo("post/poll/vote").then(m=>{r.setPostPollData(m.data.data)})},pollHasVoters:n(()=>t.value.voter_users.length>0)}},components:{PollChoiceItem:O,PollVoterUsers:z(()=>I(()=>import("./PollVoterUsers-DPTGSqxP.js"),__vite__mapDeps([0,1,2,3,4,5])))}}),H={class:"block"},L={class:""},R={class:"mb-2 flex items-center gap-1 text-lab-sc"},q={class:"size-icon-x-small shrink-0"},G={class:"text-par-s"},J={class:"block mb-2"},K={class:"text-center text-cap-l text-lab-sc"},M={key:0,class:"mt-2"};function Q(e,t,r,l,p,m){const a=d("SvgIcon"),h=d("PollChoiceItem"),P=d("PollVoterUsers");return s(),i("div",H,[o("div",L,[o("div",R,[o("span",q,[u(a,{type:"solid",name:"globe-01",classes:"size-full"})]),o("span",G,c(e.$t("labels.public_poll")),1)]),o("div",J,[(s(!0),i(C,null,w(e.pollChoices,($,_)=>(s(),i("div",{key:_,class:"mb-2 last:mb-0"},[u(h,{onVote:e.votePoll,index:_,choiceItem:$},null,8,["onVote","index","choiceItem"])]))),128))]),o("div",K,c(e.$t("labels.votes_number",{number:e.pollVotesTotal}))+" - "+c(e.postPoll.is_expired?e.$t("labels.final_results"):e.$t("labels.active_poll")),1),e.pollHasVoters?(s(),i("div",M,[u(P,{voterUsers:e.postPoll.voter_users},null,8,["voterUsers"])])):x("",!0)])])}const le=f(F,[["render",Q]]);export{le as default};
