const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ReactionsViewer-BgT-ASy9.js","assets/global.properties-DKM1fd6s.js","assets/editor-CpZ7vO5P.js","assets/media-D4ZD3EDk.js","assets/vendor-20TtR0Rd.js","assets/ReactionsPicker-B_sulSG4.js","assets/smileys-and-emotions-Beo3QNJK.js","assets/swiper-element-bundle-DBu82uhE.js","assets/PanelHeader-DgagRawP.js","assets/application-DEz9sPnz.js","assets/inbox.store-CHx7CB4w.js","assets/index-ciglwFMH.js","assets/ui-Bp8YvxdW.js","assets/PublicationImage-D1NE2IFm.js","assets/index-CZvQntMR.js","assets/ProgressiveImageLoader-8evwBPct.js","assets/SpinnerIcon-BFpWBik4.js","assets/PublicationGif-DBnOPKt4.js","assets/GiphyAttribution-79F8UUld.js","assets/PublicationVideo-BTtpk4iC.js","assets/media.status-D6lx-p4W.js","assets/index-DvUAJ3ty.js","assets/VideoDurationTime-DjdOjCKw.js","assets/PublicationDocument-Ujbo64j_.js","assets/PublicationAudio-BSs7M1C_.js","assets/audio.store-DZtZQsA_.js","assets/PublicationPoll-RwlZ424U.js","assets/PublicationText-B2zNzT87.js","assets/index-DyH4rDzV.js","assets/mention.plugin-6T_AP_1M.js","assets/AvatarExtraSmall-CDoWzwp5.js","assets/PublicationShare-BJw5WGmA.js","assets/ShareContent-Dh5TgM4L.js","assets/MarginalTextButton-ByvfW649.js","assets/PublicationQuotePlaceholder-CUz2fQQg.js","assets/LinkSnapshot-FVQp6Fpk.js","assets/LinkSnapshot-C0Z1Turo.js"])))=>i.map(i=>d[i]);
import{_ as ee,a as p,P as te,b as A,c as V}from"./global.properties-DKM1fd6s.js";import{k as oe,c as l,s,i as o,e as a,q as b,v as i,p as r,t as f,y as C,z as M,A as ne,F as L,f as ae,x as O,B as m,b as se,r as ie,l as u,C as le,d as t}from"./vendor-20TtR0Rd.js";import{P as re,D as de,b as ue,c as ce,A as pe,u as me}from"./application-DEz9sPnz.js";import{T as _e,a as ke,D as be,c as he}from"./TranslationService-CWFwUQ3g.js";import{V as ve}from"./ViewsCounter-DDf6U7Tj.js";import Pe from"./PublicationQuote-C7H0KLSU.js";const fe=oe({props:{isPinned:{type:Boolean,default:!1},postData:{type:Object,default:{}}},setup:function(e){const h=le(),c=se({isMenuOpen:!1,isReactionPickerOpen:!1,isTranslating:!1,isTranslated:!1,isSharePostOpen:!1}),T=ie(""),n=u(()=>e.postData),I=me(),S=function(){debounce(()=>{c.isReactionPickerOpen=!0},50)},D=function(){c.isReactionPickerOpen=!1},v=u(()=>c.isTranslated?T.value:n.value.content),k=u(()=>base_url(`publication/${n.value.hash_id}`));return{toggleMenu:()=>{c.isMenuOpen=!c.isMenuOpen},postContent:v,openReactionsPicker:S,PostTypeUtils:te,closeReactionsPicker:D,postData:n,state:c,isSensitive:u(()=>n.value.meta.is_sensitive),userLocaleName:embedder("locale_name"),addReaction:d=>{D(),V().userTimeline().with({unified_id:d,post_id:n.value.id}).sendTo("post/reaction/add").then(P=>{n.value.relations.reactions=P.data.data}).catch(P=>{P.response&&toastError(P.response.data.message)})},postHasMedia:u(()=>{var d;return(d=n.value.relations.media)==null?void 0:d.length}),postHasPoll:u(()=>n.value.relations.poll),postHasContent:u(()=>n.value.content.length),postLinkSnapshot:u(()=>n.value.relations.link_snapshot),quotedPost:u(()=>n.value.relations.quoted_post),isTranslatable:u(()=>n.value.meta.is_translatable),postMedia:u(()=>n.value.relations.media),postPoll:u(()=>n.value.relations.poll),postLink:k,postReactions:u(()=>n.value.relations.reactions),lightboxImages:()=>{I.add({albumName:`${n.value.relations.user.name} ${n.value.relations.user.caption}`,date:n.value.date.iso,images:n.value.relations.media.map(d=>d.source_url)})},postUserCaption:u(()=>n.value.relations.user.caption),canDeletePost:u(()=>n.value.meta.permissions.can_delete),canReportPost:u(()=>n.value.meta.permissions.can_report),mentionAuthor:()=>{A.emit("post-editor:open",{mentionName:n.value.relations.user.username})},bookmarkPost:()=>{V().userTimeline().with({id:n.value.id}).sendTo("post/bookmarks/add").then(d=>{n.value.meta.activity.bookmarked=d.data.data.bookmarked,d.data.data.bookmarked?toastSuccess(__t("toast.post.bookmarked")):toastSuccess(__t("toast.post.unbookmarked"))}).catch(d=>{d.response&&toastError(d.response.data.message)})},translate:async()=>{if(c.isTranslating||c.isTranslated)return!1;c.isTranslating=!0;const d=await he().translate(v.value);d&&(T.value=d,c.isTranslated=!0),c.isTranslating=!1},cancelTranslation:()=>{c.isTranslated=!1,T.value=""},copyContent:()=>{navigator.clipboard.writeText(v.value).then(()=>{toastSuccess(__t("toast.post.content_copied"),1e3)})},copyLink:()=>{navigator.clipboard.writeText(k.value).then(()=>{toastSuccess(__t("toast.post.link_copied"),1e3)})},reportPost:()=>{A.emit("report:open",{type:"post",reportableId:n.value.id})},quotePost:()=>{A.emit("post-editor:open",{quotePostId:n.value.id})},sharePost:async()=>{debounce(()=>{c.isSharePostOpen=!0},50)},cancelSharePost:()=>{c.isSharePostOpen=!1},isOnPostPage:u(()=>h.name==="publication_index")}},components:{AvatarSmall:pe,DropdownButton:ce,DropdownMenu:ue,DropdownMenuItem:de,DropdownReactions:be,PrimaryIconButton:re,TextTranslateButton:ke,PublicationQuote:Pe,ReactionsViewer:m(()=>p(()=>import("./ReactionsViewer-BgT-ASy9.js"),__vite__mapDeps([0,1,2,3,4]))),ViewsCounter:ve,TranslationService:_e,ReactionsPicker:m(()=>p(()=>import("./ReactionsPicker-B_sulSG4.js"),__vite__mapDeps([5,4,6,1,2,3,7,8,9,10,11,12]))),PublicationImage:m(()=>p(()=>import("./PublicationImage-D1NE2IFm.js"),__vite__mapDeps([13,14,1,2,3,4,15,16]))),PublicationGif:m(()=>p(()=>import("./PublicationGif-DBnOPKt4.js"),__vite__mapDeps([17,18,1,2,3,4]))),PublicationVideo:m(()=>p(()=>import("./PublicationVideo-BTtpk4iC.js"),__vite__mapDeps([19,1,2,3,4,20,21,9,10,11,12,22,16]))),PublicationDocument:m(()=>p(()=>import("./PublicationDocument-Ujbo64j_.js"),__vite__mapDeps([23,9,1,2,3,4,10,11,12]))),PublicationAudio:m(()=>p(()=>import("./PublicationAudio-BSs7M1C_.js"),__vite__mapDeps([24,1,2,3,4,25,20,9,10,11,12]))),PublicationPoll:m(()=>p(()=>import("./PublicationPoll-RwlZ424U.js"),__vite__mapDeps([26,1,2,3,4,9,10,11,12]))),PublicationText:m(()=>p(()=>import("./PublicationText-B2zNzT87.js"),__vite__mapDeps([27,28,29,2,1,3,4]))),AvatarExtraSmall:m(()=>p(()=>import("./AvatarExtraSmall-CDoWzwp5.js"),__vite__mapDeps([30,4,1,2,3]))),PublicationShare:m(()=>p(()=>import("./PublicationShare-BJw5WGmA.js"),__vite__mapDeps([31,9,1,2,3,4,10,11,12,8,32,33]))),PublicationQuotePlaceholder:m(()=>p(()=>import("./PublicationQuotePlaceholder-CUz2fQQg.js"),__vite__mapDeps([34,1,2,3,4]))),LinkSnapshot:m(()=>p(()=>import("./LinkSnapshot-FVQp6Fpk.js"),__vite__mapDeps([35,36,1,2,3,4])))}}),ye={class:"relative border-b border-b-bord-tr last:border-none"},Te={class:"absolute overflow-hidden top-4 left-4"},De={class:"px-4 pt-4 max-w-full"},ge={class:"ml-small-avatar pl-2"},Ce={class:"overflow-hidden mb-1"},Le={class:"flex items-center overflow-hidden"},Se={class:"leading-4 flex-1 overflow-hidden"},we={class:"text-par-m text-lab-pr2 truncate"},Re={class:"flex items-center gap-1"},Ae={class:"shrink-0 font-semibold"},Me=["title"],Ie={class:"text-par-n text-lab-sc truncate"},Ee={key:0,class:"size-icon-x-small inline-block text-brand-900 ml-1"},Ve={class:"max-w-full"},Oe={key:0,class:"overflow-hidden mb-4"},$e={key:0,class:"leading-none mb-1"},Ne={key:1,class:"mt-2"},Be={key:1,class:"overflow-hidden mb-2"},qe={key:2,class:"overflow-hidden mb-4"},ze={key:3,class:"overflow-hidden mb-2"},Ue={key:4,class:"overflow-hidden mb-2"},He=["href"],Qe={key:5,class:"block"},Ge={class:"block mb-3 -ml-1"},Fe={class:"flex items-center"},je={class:"shrink-0 relative leading-zero"},Je={class:"absolute left-0 bottom-8 origin-top-left z-20"},Ke={class:"shrink-0 leading-zero relative"},We={class:"absolute left-0 bottom-8 origin-top-left z-20"},Xe={key:0,class:"shrink-0"},Ye={class:"flex-1 overflow-hidden"},Ze={key:0,class:"flex items-center h-x-small-avatar"},xe={key:0,class:"flex ml-1"},et={class:"flex-1 overflow-hidden ml-2"},tt={class:"shrink-0 self-end"},ot={class:"absolute top-2 right-2.5"},nt={class:"relative leading-none"},at={class:"opacity-30 hover:opacity-100"},st={key:0,class:"absolute top-full right-0 z-50"};function it(e,h,c,T,n,I){const S=a("AvatarSmall"),D=a("VerificationBadge"),v=a("SvgIcon"),k=a("RouterLink"),d=a("TextTranslateButton"),P=a("PublicationText"),$=a("TranslationService"),N=a("PublicationImage"),B=a("PublicationGif"),q=a("PublicationVideo"),z=a("PublicationDocument"),U=a("PublicationAudio"),H=a("PublicationPoll"),Q=a("PublicationQuote"),G=a("PublicationQuotePlaceholder"),F=a("LinkSnapshot"),j=a("ReactionsViewer"),g=a("PrimaryIconButton"),J=a("ReactionsPicker"),E=a("PrimaryTransition"),K=a("PublicationShare"),W=a("AvatarExtraSmall"),X=a("ViewsCounter"),Y=a("DropdownButton"),Z=a("DropdownReactions"),_=a("DropdownMenuItem"),w=a("Border"),x=a("DropdownMenu"),R=ne("outside-click");return t(),l("div",ye,[s("div",Te,[o(S,{avatarSrc:e.postData.relations.user.avatar_url},null,8,["avatarSrc"])]),s("div",De,[s("div",ge,[s("div",Ce,[s("div",Le,[s("div",Se,[o(k,{to:{name:"profile_index",params:{id:e.postData.relations.user.username}},class:"flex cursor-pointer gap-1"},{default:b(()=>[s("h3",we,[s("span",Re,[s("span",Ae,f(e.postData.relations.user.name),1),e.postData.relations.user.verified?(t(),r(D,{key:0})):i("",!0),e.postData.meta.is_ai_generated?(t(),l("span",{key:1,title:e.$t("labels.ai_generated"),class:"size-icon-x-small inline-block text-amber-500"},[o(v,{name:"ai-icon"})],8,Me)):i("",!0)])]),s("span",Ie,f(e.postUserCaption)+" Â· "+f(e.postData.date.time_ago),1),e.isPinned?(t(),l("span",Ee,[o(v,{name:"pin-02"})])):i("",!0)]),_:1},8,["to"])])])]),s("div",Ve,[e.postHasContent?(t(),l("div",Oe,[e.postData.meta.is_translatable?(t(),l("div",$e,[e.state.isTranslated?(t(),r(d,{key:0,onClick:e.cancelTranslation,buttonText:e.$t("labels.show_untranslated")},null,8,["onClick","buttonText"])):(t(),r(d,{key:1,onClick:e.translate,buttonText:e.state.isTranslating?e.$t("labels.translating"):e.$t("labels.translate_to",{language_name:e.userLocaleName})},null,8,["onClick","buttonText"]))])):i("",!0),o(P,{postContent:e.postContent},null,8,["postContent"]),e.state.isTranslated?(t(),l("div",Ne,[o($)])):i("",!0)])):i("",!0),e.postHasMedia?(t(),l("div",Be,[e.PostTypeUtils.isImage(e.postData.type)?(t(),l("div",{key:0,onClick:h[0]||(h[0]=(...y)=>e.lightboxImages&&e.lightboxImages(...y)),class:"block cursor-pointer rounded-2xl overflow-hidden border border-bord-card"},[(t(),r(N,{key:e.postData.hash_id,isSensitive:e.isSensitive,postMedia:e.postMedia},null,8,["isSensitive","postMedia"]))])):i("",!0),e.PostTypeUtils.isGif(e.postData.type)?(t(),r(B,{key:1,onClick:e.lightboxImages,postMedia:e.postMedia},null,8,["onClick","postMedia"])):e.PostTypeUtils.isVideo(e.postData.type)?(t(),r(q,{key:2,postMedia:e.postMedia},null,8,["postMedia"])):e.PostTypeUtils.isDocument(e.postData.type)?(t(),r(z,{key:3,postMedia:e.postMedia},null,8,["postMedia"])):e.PostTypeUtils.isAudio(e.postData.type)?(t(),r(U,{postMedia:e.postMedia,key:e.postData.id},null,8,["postMedia"])):i("",!0)])):e.postHasPoll?(t(),l("div",qe,[o(H,{postPoll:e.postPoll},null,8,["postPoll"])])):e.postData.meta.is_quoting?(t(),l("div",ze,[e.quotedPost?(t(),r(Q,{quotedPost:e.quotedPost,key:e.postData.id},null,8,["quotedPost"])):(t(),r(G,{key:1}))])):e.postLinkSnapshot?(t(),l("div",Ue,[s("a",{href:e.postLinkSnapshot.url,target:"_blank"},[o(F,{linkSnapshot:e.postLinkSnapshot},null,8,["linkSnapshot"])],8,He)])):i("",!0),e.postReactions.length?(t(),l("div",Qe,[o(j,{onAdd:e.addReaction,reactions:e.postReactions},null,8,["onAdd","reactions"])])):i("",!0),s("div",Ge,[s("div",Fe,[s("div",je,[o(g,{iconSize:"icon-normal",onClick:C(e.openReactionsPicker,["stop"]),iconName:"heart-rounded",iconType:"line"},null,8,["onClick"]),e.state.isReactionPickerOpen?(t(),r(E,{key:0},{default:b(()=>[s("div",Je,[M(o(J,{onAdd:e.addReaction},null,8,["onAdd"]),[[R,e.closeReactionsPicker]])])]),_:1})):i("",!0)]),s("div",Ke,[o(g,{onClick:C(e.sharePost,["stop"]),iconSize:"icon-normal",iconName:"share-06",iconType:"line"},null,8,["onClick"]),e.state.isSharePostOpen?(t(),r(E,{key:0},{default:b(()=>[s("div",We,[M(o(K,{onClick:C(e.cancelSharePost,["stop"]),postLink:e.postLink},null,8,["onClick","postLink"]),[[R,e.cancelSharePost]])])]),_:1})):i("",!0)]),!e.postData.relations.comments.length&&!e.isOnPostPage?(t(),l("div",Xe,[o(k,{to:{name:"publication_index",params:{hash_id:e.postData.hash_id}}},{default:b(()=>[o(g,{iconSize:"icon-normal",iconName:"message-circle-02",iconType:"line"})]),_:1},8,["to"])])):i("",!0),e.isOnPostPage?(t(),r(g,{key:1,disabled:!0,iconSize:"icon-normal",iconName:"message-circle-02",iconType:"line"})):i("",!0),s("div",Ye,[e.isOnPostPage?i("",!0):(t(),l("div",Ze,[e.postData.relations.comments.length?(t(),l("div",xe,[(t(!0),l(L,null,ae(e.postData.relations.comments,y=>(t(),l("div",{key:y.id,class:"-ml-2 first:ml-0 border rounded-full border-fill-pr"},[o(W,{avatarSrc:y.user.avatar_url},null,8,["avatarSrc"])]))),128))])):i("",!0),s("div",et,[o(k,{to:{name:"publication_index",params:{hash_id:e.postData.hash_id}},class:"text-par-s text-lab-sc truncate block hover:text-brand-900"},{default:b(()=>[e.postData.relations.comments.length?(t(),l(L,{key:0},[O(f(e.$t("labels.show_all_comments"))+" ("+f(e.postData.comments_count.formatted)+") ",1)],64)):(t(),l(L,{key:1},[O(f(e.$t("labels.leave_comment")),1)],64))]),_:1},8,["to"])])]))]),s("div",tt,[o(X,{counterValue:e.postData.views_count.formatted},null,8,["counterValue"])])])])])])]),s("div",ot,[s("div",nt,[s("div",at,[o(Y,{onClick:C(e.toggleMenu,["stop"])},null,8,["onClick"])]),e.state.isMenuOpen?(t(),l("div",st,[M((t(),r(x,{onClick:e.toggleMenu},{default:b(()=>[o(Z,{onAdd:e.addReaction},null,8,["onAdd"]),o(_,{onClick:e.openReactionsPicker,iconName:"heart-rounded",textLabel:e.$t("dd.add_reaction")},null,8,["onClick","textLabel"]),e.postHasContent&&e.isTranslatable?(t(),l(L,{key:0},[e.state.isTranslated?(t(),r(_,{key:0,onClick:e.cancelTranslation,iconName:"translate-01",textLabel:e.$t("labels.show_untranslated")},null,8,["onClick","textLabel"])):(t(),r(_,{key:1,onClick:e.translate,iconName:"translate-01",textLabel:e.$t("dd.translate")},null,8,["onClick","textLabel"]))],64)):i("",!0),o(w),e.isOnPostPage?i("",!0):(t(),r(k,{key:1,to:{name:"publication_index",params:{hash_id:e.postData.hash_id}}},{default:b(()=>[o(_,{iconName:"arrow-up-right",textLabel:e.$t("dd.post.open_post")},null,8,["textLabel"])]),_:1},8,["to"])),o(_,{onClick:e.quotePost,iconName:"pencil-line",textLabel:e.$t("dd.post.quote_post")},null,8,["onClick","textLabel"]),o(_,{onClick:e.mentionAuthor,iconName:"at-sign",textLabel:e.$t("dd.post.mention_author",{name:`@${e.postData.relations.user.name}`})},null,8,["onClick","textLabel"]),o(w),o(_,{onClick:e.bookmarkPost,iconName:e.postData.meta.activity.bookmarked?"bookmark-minus":"bookmark",textLabel:e.postData.meta.activity.bookmarked?e.$t("dd.post.unbookmark"):e.$t("dd.post.bookmark")},null,8,["onClick","iconName","textLabel"]),o(_,{onClick:e.sharePost,iconName:"share-06",textLabel:e.$t("dd.post.share")},null,8,["onClick","textLabel"]),o(_,{onClick:e.copyLink,iconName:"copy-06",textLabel:e.$t("dd.post.copy_link")},null,8,["onClick","textLabel"]),e.postHasContent?(t(),r(_,{key:2,onClick:e.copyContent,iconName:"type-01",textLabel:e.$t("dd.copy_text")},null,8,["onClick","textLabel"])):i("",!0),o(w),e.canReportPost?(t(),r(_,{key:3,onClick:e.reportPost,itemColor:"text-red-900",iconName:"annotation-alert",textLabel:e.$t("dd.post.report_post")},null,8,["onClick","textLabel"])):i("",!0),e.canDeletePost?(t(),r(_,{key:4,onClick:h[1]||(h[1]=y=>e.$emit("delete",e.postData)),itemColor:"text-red-900",iconName:"trash-04",textLabel:e.$t("dd.post.delete_post")},null,8,["textLabel"])):i("",!0)]),_:1},8,["onClick"])),[[R,e.toggleMenu]])])):i("",!0)])])])}const mt=ee(fe,[["render",it]]);export{mt as T};
