import{_ as S,d as P,c as p,j as n,a as l,r as m,t as u,w as c,u as $,F as E,q as h,g as k,h as V,l as f,H as B,o as d,p as g}from"./global.properties-ieI6Xwik.js";import{a as D,f as w}from"./application-DnsIlr-S.js";import{T as x}from"./TextInput-CE1Bv1lI.js";import{S as F}from"./SectionToggle-DEryNKJ4.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./inbox.store-DKf8FrGP.js";import"./index-CaocF3Et.js";const I=P({setup:function(){const e=h({}),s=B(),o=k({isLoading:!0,isSubmitting:!1,formErrors:{phone:[]}}),i=h({phone:"",phone_privacy:!0});return V(async()=>{await f().userSettings().getFrom("phone/settings").then(t=>{let a=t.data.data;e.value=a.validation_rules,i.value.phone=a.phone,i.value.phone_privacy=a.privacy_settings.phone_privacy}),o.isLoading=!1}),{state:o,formData:i,validationRules:e,submitForm:async()=>{o.isSubmitting===!1&&(o.isSubmitting=!0,Object.keys(o.formErrors).forEach(t=>{o.formErrors[t]=[]}),await f().userSettings().with(i.value).putTo("phone/update").then(t=>{t.data.data.confirmation_required?s.push({name:"settings_phone_confirm"}):toastSuccess(__t("toast.forms.changes_saved"))}).catch(t=>{t.response&&(toastError(t.response.data.message),t.response.data.errors&&Object.keys(t.response.data.errors).forEach(a=>{o.formErrors[a]=t.response.data.errors[a]}))}),o.isSubmitting=!1)}}},components:{PrimaryPillButton:w,TextInput:x,PageTitle:D,SectionToggle:F}}),L={class:"mb-8"},N={key:0,class:"block"},R={class:"mb-8"},j={class:"text-par-m text-lab-sc"},A={class:"mb-10"},C={class:"mb-10"},q={class:"block mb-16"},M={key:1,class:"block"},O={class:"flex-center h-96"};function U(e,s,o,i,t,a){const _=m("PageTitle"),b=m("TextInput"),v=m("SectionToggle"),T=m("PrimaryPillButton"),y=m("PrimarySpinAnimation");return d(),p(E,null,[n("div",L,[l(_,{hasBack:!0,titleText:e.$t("settings.phone_settings")},null,8,["titleText"])]),e.state.isLoading?(d(),p("div",M,[n("div",O,[l(y)])])):(d(),p("div",N,[n("div",R,[n("h6",j,u(e.$t("settings.forms.phone_number.page_desc")),1)]),n("form",{onSubmit:s[2]||(s[2]=$((...r)=>e.submitForm&&e.submitForm(...r),["prevent"]))},[n("div",A,[l(b,{textLength:e.validationRules.phone.max,inputErrors:e.state.formErrors.phone,modelValue:e.formData.phone,"onUpdate:modelValue":s[0]||(s[0]=r=>e.formData.phone=r),labelText:e.$t("settings.forms.phone_number.phone_number"),placeholder:e.$t("settings.forms.phone_number.phone_number_placeholder")},{feedbackInfo:c(()=>[g(u(e.$t("settings.forms.phone_number.phone_number_helper")),1)]),_:1},8,["textLength","inputErrors","modelValue","labelText","placeholder"])]),n("div",C,[l(v,{iconName:"shield-01",modelValue:e.formData.phone_privacy,"onUpdate:modelValue":s[1]||(s[1]=r=>e.formData.phone_privacy=r),titleText:e.$t("labels.privacy")},{captionText:c(()=>[g(u(e.$t("settings.forms.phone_number.privacy_helper")),1)]),_:1},8,["modelValue","titleText"])]),n("div",q,[l(T,{loading:e.state.isSubmitting,buttonType:"submit",buttonText:e.$t("labels.save_changes")},null,8,["loading","buttonText"])])],32)]))],64)}const X=S(I,[["render",U]]);export{X as default};
