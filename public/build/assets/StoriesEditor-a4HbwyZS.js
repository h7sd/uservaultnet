const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VideoDurationTime-DjdOjCKw.js","assets/global.properties-DKM1fd6s.js","assets/editor-CpZ7vO5P.js","assets/media-D4ZD3EDk.js","assets/vendor-20TtR0Rd.js"])))=>i.map(i=>d[i]);
import{_ as v,a as T}from"./global.properties-DKM1fd6s.js";import{c as d,d as c,s as e,t as u,k as x,e as n,i as s,v as h,z as $,K as D,y as I,j as V,B as k,r as f,H as M,b as P,o as E,l as p}from"./vendor-20TtR0Rd.js";import{u as B}from"./index-ciglwFMH.js";import{b as F,P as w,h as C}from"./application-C3zsOS77.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./swiper-element-bundle-DBu82uhE.js";const H={},z={class:"block px-4 py-4"},j={class:"text-lab-pr2 text-par-m mb-1 font-bold"},N={class:"text-lab-sc text-par-n"};function R(t,o){return c(),d("div",z,[e("h5",j,u(t.$t("story.story_privacy_alert.title")),1),e("p",N,u(t.$t("story.story_privacy_alert.desc",{app_name:t.$embedder("config.app.name")})),1)])}const A=v(H,[["render",R]]),K=x({setup:function(){const t=C(),o=f(null),l=M(),r=P({isSubmitting:!1}),{autoResize:y}=B(),_=f(t.storyData),m=()=>{try{t.deleteMedia()}catch(i){toastError(i.message)}};return E(()=>{t.storyMedia||l.push({name:"home_index"})}),{state:r,storyMedia:p(()=>t.storyMedia),isVideo:p(()=>t.storyMedia.type==="video"),isFormValid:p(()=>t.isFormValid),storyData:_,storyTextInputField:o,submitForm:async()=>{try{r.isSubmitting=!0,await t.publishStory(),r.isSubmitting=!1,toastSuccess(__t("toast.story.story_published")),t.resetEditor(),l.push({name:"home_index"})}catch(i){r.isSubmitting=!1,toastError(i.message)}},textInputHandler:()=>{y(o.value)},leaveEditor:()=>{m(),l.push({name:"home_index"})}}},components:{PrimaryTextButton:w,StoryPrivacyInfo:A,VideoDurationTime:k(()=>T(()=>import("./VideoDurationTime-DjdOjCKw.js"),__vite__mapDeps([0,1,2,3,4]))),Toolbar:F}}),L={class:"shrink-0"},O={class:"pb-4 flex justify-center"},U={class:"w-6/12"},q={key:0,class:"bg-black h-full rounded-md overflow-hidden"},G={class:"h-full flex items-center"},J=["src"],Q={key:0,class:"absolute bottom-4 right-4"},W={class:"block"},X={class:"block"},Y=["placeholder"],Z={class:"flex items-center px-4 py-2"},tt={class:"shrink-0"},et={class:"text-lab-sc text-cap-l"},ot={class:"p-4"};function st(t,o,l,r,y,_){const m=n("Toolbar"),i=n("VideoDurationTime"),b=n("Border"),S=n("StoryPrivacyInfo"),g=n("PrimaryTextButton");return c(),d("div",{class:V({"pb-safe-bottom":t.$isStandalone()})},[e("div",L,[s(m,{title:t.$t("labels.new_story"),onClose:t.leaveEditor},null,8,["title","onClose"])]),e("form",{onSubmit:o[2]||(o[2]=I((...a)=>t.submitForm&&t.submitForm(...a),["prevent"]))},[e("div",O,[e("div",U,[t.storyMedia?(c(),d("div",q,[e("div",G,[e("img",{class:"w-full object-cover",src:t.storyMedia.source_url,alt:"Image"},null,8,J),t.isVideo?(c(),d("div",Q,[s(i,{videoDuration:t.storyMedia.duration},null,8,["videoDuration"])])):h("",!0)])])):h("",!0)])]),s(b,{height:"h-3",opacity:"opacity-70"}),e("div",W,[e("div",X,[$(e("textarea",{onInput:o[0]||(o[0]=(...a)=>t.textInputHandler&&t.textInputHandler(...a)),"onUpdate:modelValue":o[1]||(o[1]=a=>t.storyData.content=a),ref:"storyTextInputField",class:"resize-none bg-transparent block min-h-24 w-full max-h-60 overflow-y-auto outline-hidden px-4 py-4 placeholder:text-par-m text-lab-pr text-par-m placeholder:text-lab-sc",placeholder:t.$t("story.editor.add_caption")},null,40,Y),[[D,t.storyData.content]])]),e("div",Z,[e("div",tt,[e("span",et,u(t.storyData.content.length)+"/"+u(1200),1)])])]),s(b),s(S),e("div",ot,[s(g,{buttonFluid:!0,disabled:!t.isFormValid,loading:t.state.isSubmitting,buttonText:t.$t("story.editor.publish_story"),type:"submit"},null,8,["disabled","loading","buttonText"])])],32)],2)}const ut=v(K,[["render",st]]);export{ut as default};
