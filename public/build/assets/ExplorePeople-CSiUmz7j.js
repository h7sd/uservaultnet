import{k as I,l as w,_ as Q,d as $,r as i,e as C,o,w as d,j as l,c as a,a as s,p as L,t as u,F as p,i as m,m as g,q as M,g as q,b as V,h as x,I as A}from"./global.properties-ieI6Xwik.js";import{u as B}from"./index-Dl0ZWYHh.js";import{T as E}from"./TimelineContainer-Cj8RYrtQ.js";import{P as F}from"./PeopleListItem-q67tTG6c.js";import{P as N}from"./PeopleListItemSkeleton-Cg2wog8e.js";import{Q as R}from"./QuickSearch-B9lUtVfZ.js";import{C as j}from"./TabsItem-BjTkiLQH.js";import{T as z}from"./TabsLink-BILPIXUq.js";import{A as D}from"./AdCard-eGzQ-765.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./AvatarRightSided-DIsCtZes.js";import"./application-B35z453N.js";import"./swiper-element-bundle-DBu82uhE.js";import"./ClearButton-pgQ229dk.js";const U=I("mobile_explore_people_store",{state:function(){return{people:[],filter:{query:"",page:1}}},actions:{makeLoadRequest:async function(){return await w().explore().with({filter:this.filter}).sendTo("people")},fetchPeople:async function(){await this.makeLoadRequest().then(e=>{this.people=e.data.data})},loadMorePeople:async function(){return await this.makeLoadRequest().then(e=>{let t=e.data.data;return t.length?(this.people=this.people.concat(t),!0):!1}).catch(()=>!1)},getLastPersonId:function(){return this.people.at(-1).id},resetFilter:function(){this.filter={query:"",page:1}}}}),G=$({setup:function(){const e=M(""),t=q({noMoreContent:!1,isLoadingContent:!1,isEmpty:!1,isLoading:!0,isSearchLoading:!1}),c=V(()=>n.people),n=U();x(async()=>{n.resetFilter(),await n.fetchPeople(),debounce(()=>{c.value.length||(t.isEmpty=!0)},500),t.isLoading=!1}),A(e,()=>{n.filter.query=e.value,debounce(async()=>{await f()},500)});const f=async()=>{n.filter.page=1,t.noMoreContent=!1,t.isSearchLoading=!0,await n.fetchPeople(),t.isSearchLoading=!1};return B({callback:()=>{debounce(async()=>{!t.isLoadingContent&&!t.noMoreContent&&c.value.length&&(t.isLoadingContent=!0,n.filter.page+=1,t.noMoreContent=!await n.loadMorePeople(),t.isLoadingContent=!1)},200)}}),{people:c,state:t,peopleSearchQuery:e,handleSearchCancel:()=>{e.value=""}}},components:{TimelineContainer:E,PeopleListItem:F,QuickSearch:R,PeopleListItemSkeleton:N,ContentTabs:j,TabsLink:z,AdCard:D}}),H={class:"sticky top-0 popup-background-tr z-10"},J={class:"px-4 pt-4"},K={key:1,class:"py-32"},O={class:"text-lab-sc text-par-s text-center"},W={key:1,class:"block"},X={key:1,class:"py-32"},Y={class:"text-lab-sc text-par-s text-center"},Z={key:2};function ee(e,t,c,n,f,te){const b=i("QuickSearch"),h=i("TabsLink"),S=i("ContentTabs"),y=i("Border"),k=i("PeopleListItemSkeleton"),P=i("PeopleListItem"),T=i("AdCard"),v=i("TimelineContainer");return o(),C(v,null,{default:d(()=>[l("div",H,[l("div",J,[s(b,{onCancel:e.handleSearchCancel,modelValue:e.peopleSearchQuery,"onUpdate:modelValue":t[0]||(t[0]=r=>e.peopleSearchQuery=r),modelModifiers:{lazy:!0},placeholder:e.$t("labels.search")},null,8,["onCancel","modelValue","placeholder"])]),s(S,{cols:2},{default:d(()=>[s(h,{link:{name:"explore_posts"}},{default:d(()=>[L(u(e.$t("labels.posts")),1)]),_:1}),s(h,{link:{name:"explore_people"}},{default:d(()=>[L(u(e.$t("labels.people")),1)]),_:1})]),_:1}),s(y)]),e.state.isLoading?(o(),a(p,{key:0},m(15,r=>s(k,{key:r})),64)):e.state.isEmpty?(o(),a("div",K,[l("p",O,u(e.$t("empty_state.empty")),1)])):(o(),a(p,{key:2},[e.state.isSearchLoading?(o(),a(p,{key:0},m(15,r=>s(k,{key:r})),64)):(o(),a("div",W,[e.people.length?(o(!0),a(p,{key:0},m(e.people,(r,_)=>(o(),a(p,{key:r.id},[s(P,{userData:r},null,8,["userData"]),(_+1)%15===0?(o(),a(p,{key:0},[(o(),C(T,{key:_})),s(y,{height:"h-2",opacity:"opacity-30"})],64)):g("",!0)],64))),128)):(o(),a("div",X,[l("p",Y,u(e.$t("empty_state.explore.people.filter")),1)]))])),e.state.isLoadingContent?(o(),a("div",Z,t[1]||(t[1]=[l("div",{class:"flex justify-center my-4"},[l("div",{class:"colibri-primary-animation"})],-1)]))):g("",!0)],64))]),_:1})}const ye=Q(G,[["render",ee]]);export{ye as default};
