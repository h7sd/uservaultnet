import{u as w,k as I,e as i,p as C,d as o,q as d,s as l,c as a,i as s,x as L,t as m,F as p,f as u,v as g,r as Q,b as $,l as M,o as q,w as x}from"./vendor-20TtR0Rd.js";import{c as V,_ as A}from"./global.properties-DKM1fd6s.js";import{u as B}from"./index-B5kc-12x.js";import{T as E}from"./TimelineContainer-DF9R5tCB.js";import{P as F}from"./PeopleListItem-DOFLjTB9.js";import{P as N}from"./PeopleListItemSkeleton-Bt4vg_BW.js";import{Q as R}from"./QuickSearch-MAT95vR0.js";import{C as z}from"./TabsItem-QNQmzGR_.js";import{T as D}from"./TabsLink-Cj64FPul.js";import{A as j}from"./AdCard-D48AMbS6.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./AvatarRightSided-DB-VHCky.js";import"./application-C3zsOS77.js";import"./swiper-element-bundle-DBu82uhE.js";import"./ClearButton-BVb3OBYL.js";const U=w("mobile_explore_people_store",{state:function(){return{people:[],filter:{query:"",page:1}}},actions:{makeLoadRequest:async function(){return await V().explore().with({filter:this.filter}).sendTo("people")},fetchPeople:async function(){await this.makeLoadRequest().then(e=>{this.people=e.data.data})},loadMorePeople:async function(){return await this.makeLoadRequest().then(e=>{let t=e.data.data;return t.length?(this.people=this.people.concat(t),!0):!1}).catch(()=>!1)},getLastPersonId:function(){return this.people.at(-1).id},resetFilter:function(){this.filter={query:"",page:1}}}}),G=I({setup:function(){const e=Q(""),t=$({noMoreContent:!1,isLoadingContent:!1,isEmpty:!1,isLoading:!0,isSearchLoading:!1}),c=M(()=>n.people),n=U();q(async()=>{n.resetFilter(),await n.fetchPeople(),debounce(()=>{c.value.length||(t.isEmpty=!0)},500),t.isLoading=!1}),x(e,()=>{n.filter.query=e.value,debounce(async()=>{await f()},500)});const f=async()=>{n.filter.page=1,t.noMoreContent=!1,t.isSearchLoading=!0,await n.fetchPeople(),t.isSearchLoading=!1};return B({callback:()=>{debounce(async()=>{!t.isLoadingContent&&!t.noMoreContent&&c.value.length&&(t.isLoadingContent=!0,n.filter.page+=1,t.noMoreContent=!await n.loadMorePeople(),t.isLoadingContent=!1)},200)}}),{people:c,state:t,peopleSearchQuery:e,handleSearchCancel:()=>{e.value=""}}},components:{TimelineContainer:E,PeopleListItem:F,QuickSearch:R,PeopleListItemSkeleton:N,ContentTabs:z,TabsLink:D,AdCard:j}}),H={class:"sticky top-0 popup-background-tr z-10"},J={class:"px-4 pt-4"},K={key:1,class:"py-32"},O={class:"text-lab-sc text-par-s text-center"},W={key:1,class:"block"},X={key:1,class:"py-32"},Y={class:"text-lab-sc text-par-s text-center"},Z={key:2};function ee(e,t,c,n,f,te){const b=i("QuickSearch"),h=i("TabsLink"),S=i("ContentTabs"),y=i("Border"),k=i("PeopleListItemSkeleton"),P=i("PeopleListItem"),T=i("AdCard"),v=i("TimelineContainer");return o(),C(v,null,{default:d(()=>[l("div",H,[l("div",J,[s(b,{onCancel:e.handleSearchCancel,modelValue:e.peopleSearchQuery,"onUpdate:modelValue":t[0]||(t[0]=r=>e.peopleSearchQuery=r),modelModifiers:{lazy:!0},placeholder:e.$t("labels.search")},null,8,["onCancel","modelValue","placeholder"])]),s(S,{cols:2},{default:d(()=>[s(h,{link:{name:"explore_posts"}},{default:d(()=>[L(m(e.$t("labels.posts")),1)]),_:1}),s(h,{link:{name:"explore_people"}},{default:d(()=>[L(m(e.$t("labels.people")),1)]),_:1})]),_:1}),s(y)]),e.state.isLoading?(o(),a(p,{key:0},u(15,r=>s(k,{key:r})),64)):e.state.isEmpty?(o(),a("div",K,[l("p",O,m(e.$t("empty_state.empty")),1)])):(o(),a(p,{key:2},[e.state.isSearchLoading?(o(),a(p,{key:0},u(15,r=>s(k,{key:r})),64)):(o(),a("div",W,[e.people.length?(o(!0),a(p,{key:0},u(e.people,(r,_)=>(o(),a(p,{key:r.id},[s(P,{userData:r},null,8,["userData"]),(_+1)%15===0?(o(),a(p,{key:0},[(o(),C(T,{key:_})),s(y,{height:"h-2",opacity:"opacity-30"})],64)):g("",!0)],64))),128)):(o(),a("div",X,[l("p",Y,m(e.$t("empty_state.explore.people.filter")),1)]))])),e.state.isLoadingContent?(o(),a("div",Z,t[1]||(t[1]=[l("div",{class:"flex justify-center my-4"},[l("div",{class:"colibri-primary-animation"})],-1)]))):g("",!0)],64))]),_:1})}const _e=A(G,[["render",ee]]);export{_e as default};
