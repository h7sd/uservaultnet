import{_ as y,d as V,c,m as h,j as s,t as m,a as l,w as d,F as E,i as S,e as D,n as P,r as f,f as T,q as _,I as R,o as u,u as w,g as M,h as O,l as k,p as g}from"./global.properties-ieI6Xwik.js";import{a as B,f as G,d as U}from"./application-DnsIlr-S.js";import{T as C}from"./TextInput-CE1Bv1lI.js";import{O as F,h as A}from"./radio-group-CeU3FEIT.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./inbox.store-DKf8FrGP.js";import"./index-CaocF3Et.js";import"./form-C7kFQr8W.js";const H=V({props:{hasLabel:{type:Boolean,default:!0},hasFeedback:{type:Boolean,default:!0},labelText:{type:String,default:""},classes:{type:String,default:""},name:{type:String,default:""},modelValue:{type:String,default:""},options:{type:Array,default:[]}},emits:["update:modelValue"],components:{RadioGroup:A,RadioGroupOption:F},setup:function(e,t){const a=_(e.modelValue);return R(a,n=>{t.emit("update:modelValue",n)}),{selectedOption:a}}}),N={class:"block"},j={key:0,class:"mb-2 font-medium block text-lab-pr2 text-par-m"},z={class:"block"},q={key:1,class:"block"},x={key:0,class:"inline-flex"},J={key:0,class:"mr-2.5"},K={class:"text-par-s text-lab-sc"};function Q(e,t,a,n,v,r){const p=f("RadioGroupOption"),$=f("RadioGroup");return u(),c("div",N,[e.hasLabel?(u(),c("label",j,m(e.labelText),1)):h("",!0),s("div",z,[l($,{modelValue:e.selectedOption,"onUpdate:modelValue":t[0]||(t[0]=i=>e.selectedOption=i),class:"inline-flex divide-x divide-bord-card overflow-hidden rounded-xl"},{default:d(()=>[(u(!0),c(E,null,S(e.options,i=>(u(),D(p,{key:i.value,value:i.value},{default:d(({checked:b})=>[s("span",{class:P(["bg-input-pr cursor-pointer px-6 py-4 inline-block text-par-m font-semibold",[b?"text-brand-900":"text-lab-sc font-medium"]])},m(i.label)+" "+m(b?"âœ“":""),3)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),e.hasFeedback?(u(),c("div",q,[e.$slots.feedbackInfo?(u(),c("span",x,[e.$slots.feedbackIcon?(u(),c("span",J,[T(e.$slots,"feedbackIcon")])):h("",!0),s("span",K,[T(e.$slots,"feedbackInfo")])])):h("",!0)])):h("",!0)])}const W=y(H,[["render",Q]]),X=V({setup:function(){const e=_({}),t=U(),a=M({isLoading:!0,isSubmitting:!1,formErrors:{username:[],caption:[],first_name:[],last_name:[],bio:[],website:[],gender:[]}}),n=_({}),v=_([{value:"male",label:__t("settings.forms.account_settings.gender_male"),isChecked:n.value.gender=="male"},{value:"female",label:__t("settings.forms.account_settings.gender_female"),isChecked:n.value.gender=="female"},{value:"not-specified",label:__t("settings.forms.account_settings.gender_not_specified"),isChecked:n.value.gender=="not-specified"}]);return O(async()=>{await k().userSettings().getFrom("account/settings").then(r=>{let p=r.data.data;n.value=p.user_data,e.value=p.validation_rules}),a.isLoading=!1}),{state:a,validationRules:e,formData:n,userGenderOptions:v,submitForm:async()=>{a.isSubmitting===!1&&(a.isSubmitting=!0,Object.keys(a.formErrors).forEach(r=>{a.formErrors[r]=[]}),await k().userSettings().with(n.value).putTo("account/update").then(r=>{t.setProperty("first_name",n.value.first_name),t.setProperty("last_name",n.value.last_name),t.setProperty("username",n.value.username),toastSuccess(__t("toast.forms.changes_saved"))}).catch(r=>{r.response&&(toastError(r.response.data.message),r.response.data.errors&&Object.keys(r.response.data.errors).forEach(p=>{a.formErrors[p]=r.response.data.errors[p]}))}),a.isSubmitting=!1)}}},components:{RadioInput:W,PrimaryPillButton:G,TextInput:C,PageTitle:B}}),Y={class:"mb-8"},Z={key:0,class:"block"},ee={class:"mb-8"},te=["innerHTML"],se={class:"mb-6"},oe={class:"block mb-2 text-brand-900 font-semibold"},ae={class:"mb-6"},ne=["innerHTML"],re={class:"mb-6"},ie={class:"mb-6"},le={class:"mb-6"},de={class:"mb-6"},me={class:"mb-10"},ue={class:"block mb-16"},pe={key:1,class:"block"},ce={class:"flex-center h-96"};function fe(e,t,a,n,v,r){const p=f("PageTitle"),$=f("SvgIcon"),i=f("TextInput"),b=f("RadioInput"),I=f("PrimaryPillButton"),L=f("PrimarySpinAnimation");return u(),c(E,null,[s("div",Y,[l(p,{hasBack:!0,titleText:e.$t("settings.your_account")},null,8,["titleText"])]),e.state.isLoading?(u(),c("div",pe,[s("div",ce,[l(L)])])):(u(),c("div",Z,[s("div",ee,[s("h6",{class:"text-par-m text-lab-sc",innerHTML:e.$t("settings.forms.account_settings.page_desc")},null,8,te)]),s("form",{onSubmit:t[7]||(t[7]=w((...o)=>e.submitForm&&e.submitForm(...o),["prevent"]))},[s("div",se,[l(i,{modelValue:e.formData.username,"onUpdate:modelValue":t[0]||(t[0]=o=>e.formData.username=o),modelModifiers:{trim:!0},textLength:e.validationRules.username.max,inputErrors:e.state.formErrors.username,labelText:e.$t("settings.forms.account_settings.username"),placeholder:e.$t("settings.forms.account_settings.username_placeholder")},{feedbackIcon:d(()=>[l($,{name:"info-circle",classes:"size-5 text-lab-tr"})]),feedbackInfo:d(()=>[s("span",oe,m(e.$baseUrl("@"+e.formData.username)),1),g(" "+m(e.$t("settings.forms.account_settings.username_helper")),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",ae,[l(i,{modelValue:e.formData.caption,"onUpdate:modelValue":t[1]||(t[1]=o=>e.formData.caption=o),modelModifiers:{trim:!0},textLength:e.validationRules.caption.max,inputErrors:e.state.formErrors.caption,labelText:e.$t("settings.forms.account_settings.caption"),placeholder:e.$t("settings.forms.account_settings.caption_placeholder")},{feedbackInfo:d(()=>[s("span",{innerHTML:e.$t("settings.forms.account_settings.caption_helper")},null,8,ne)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",re,[l(i,{modelValue:e.formData.first_name,"onUpdate:modelValue":t[2]||(t[2]=o=>e.formData.first_name=o),modelModifiers:{trim:!0},textLength:e.validationRules.first_name.max,inputErrors:e.state.formErrors.first_name,labelText:e.$t("settings.forms.account_settings.name"),placeholder:e.$t("settings.forms.account_settings.name_placeholder")},{feedbackInfo:d(()=>[g(m(e.$t("settings.forms.account_settings.name_helper",{days:10})),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",ie,[l(i,{modelValue:e.formData.last_name,"onUpdate:modelValue":t[3]||(t[3]=o=>e.formData.last_name=o),modelModifiers:{trim:!0},textLength:e.validationRules.last_name.max,inputErrors:e.state.formErrors.last_name,labelText:e.$t("settings.forms.account_settings.surname"),placeholder:e.$t("settings.forms.account_settings.surname_placeholder")},{feedbackInfo:d(()=>[g(m(e.$t("settings.forms.account_settings.surname_helper")),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",le,[l(i,{modelValue:e.formData.bio,"onUpdate:modelValue":t[4]||(t[4]=o=>e.formData.bio=o),modelModifiers:{trim:!0},textLength:e.validationRules.bio.max,asText:!0,inputErrors:e.state.formErrors.bio,labelText:e.$t("settings.forms.account_settings.bio"),placeholder:e.$t("settings.forms.account_settings.bio_placeholder")},{feedbackInfo:d(()=>[g(m(e.$t("settings.forms.account_settings.bio_helper")),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",de,[l(i,{modelValue:e.formData.website,"onUpdate:modelValue":t[5]||(t[5]=o=>e.formData.website=o),modelModifiers:{trim:!0},textLength:e.validationRules.website.max,inputErrors:e.state.formErrors.website,labelText:e.$t("settings.forms.account_settings.website"),inputType:"text",placeholder:e.$t("settings.forms.account_settings.website_placeholder")},{feedbackInfo:d(()=>[g(m(e.$t("settings.forms.account_settings.website_helper")),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",me,[l(b,{modelValue:e.formData.gender,"onUpdate:modelValue":t[6]||(t[6]=o=>e.formData.gender=o),options:e.userGenderOptions,inputErrors:e.state.formErrors.gender,labelText:e.$t("settings.forms.account_settings.gender")},{feedbackInfo:d(()=>[g(m(e.$t("settings.forms.account_settings.gender_helper")),1)]),_:1},8,["modelValue","options","inputErrors","labelText"])]),s("div",ue,[l(I,{loading:e.state.isSubmitting,buttonType:"submit",buttonText:e.$t("labels.save_changes")},null,8,["loading","buttonText"])])],32)]))],64)}const ye=y(X,[["render",fe]]);export{ye as default};
