import{c as z,g as ze}from"./editor-CpZ7vO5P.js";var Xe={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(Ae){(function(){var M=function(){this.init()};M.prototype={init:function(){var e=this||i;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var r=this||i;if(e=parseFloat(e),r.ctx||N(),typeof e<"u"&&e>=0&&e<=1){if(r._volume=e,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e,i.ctx.currentTime);for(var n=0;n<r._howls.length;n++)if(!r._howls[n]._webAudio)for(var s=r._howls[n]._getSoundIds(),p=0;p<s.length;p++){var g=r._howls[n]._soundById(s[p]);g&&g._node&&(g._node.volume=g._volume*e)}return r}return r._volume},mute:function(e){var r=this||i;r.ctx||N(),r._muted=e,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e?0:r._volume,i.ctx.currentTime);for(var n=0;n<r._howls.length;n++)if(!r._howls[n]._webAudio)for(var s=r._howls[n]._getSoundIds(),p=0;p<s.length;p++){var g=r._howls[n]._soundById(s[p]);g&&g._node&&(g._node.muted=e?!0:g._muted)}return r},stop:function(){for(var e=this||i,r=0;r<e._howls.length;r++)e._howls[r].stop();return e},unload:function(){for(var e=this||i,r=e._howls.length-1;r>=0;r--)e._howls[r].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,N()),e},codecs:function(e){return(this||i)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||i;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var r=new Audio;typeof r.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var r=new Audio;r.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||i,r=null;try{r=typeof Audio<"u"?new Audio:null}catch{return e}if(!r||typeof r.canPlayType!="function")return e;var n=r.canPlayType("audio/mpeg;").replace(/^no$/,""),s=e._navigator?e._navigator.userAgent:"",p=s.match(/OPR\/(\d+)/g),g=p&&parseInt(p[0].split("/")[1],10)<33,f=s.indexOf("Safari")!==-1&&s.indexOf("Chrome")===-1,I=s.match(/Version\/(.*?) /),W=f&&I&&parseInt(I[1],10)<15;return e._codecs={mp3:!!(!g&&(n||r.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!n,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!W&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!W&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||i;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var s=new Audio;s._unlocked=!0,e._releaseHtml5Audio(s)}catch{e.noAudio=!0;break}for(var p=0;p<e._howls.length;p++)if(!e._howls[p]._webAudio)for(var g=e._howls[p]._getSoundIds(),f=0;f<g.length;f++){var I=e._howls[p]._soundById(g[f]);I&&I._node&&!I._node._unlocked&&(I._node._unlocked=!0,I._node.load())}e._autoResume();var W=e.ctx.createBufferSource();W.buffer=e._scratchBuffer,W.connect(e.ctx.destination),typeof W.start>"u"?W.noteOn(0):W.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),W.onended=function(){W.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var G=0;G<e._howls.length;G++)e._howls[G]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),e}},_obtainHtml5Audio:function(){var e=this||i;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var r=new Audio().play();return r&&typeof Promise<"u"&&(r instanceof Promise||typeof r.then=="function")&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var r=this||i;return e._unlocked&&r._html5AudioPool.push(e),r},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!i.usingWebAudio)){for(var r=0;r<e._howls.length;r++)if(e._howls[r]._webAudio){for(var n=0;n<e._howls[r]._sounds.length;n++)if(!e._howls[r]._sounds[n]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var s=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(s,s)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!i.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var i=new M,_=function(e){var r=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}r.init(e)};_.prototype={init:function(e){var r=this;return i.ctx||N(),r._autoplay=e.autoplay||!1,r._format=typeof e.format!="string"?e.format:[e.format],r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src=typeof e.src!="string"?e.src:[e.src],r._volume=e.volume!==void 0?e.volume:1,r._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=e.onend?[{fn:e.onend}]:[],r._onfade=e.onfade?[{fn:e.onfade}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._onstop=e.onstop?[{fn:e.onstop}]:[],r._onmute=e.onmute?[{fn:e.onmute}]:[],r._onvolume=e.onvolume?[{fn:e.onvolume}]:[],r._onrate=e.onrate?[{fn:e.onrate}]:[],r._onseek=e.onseek?[{fn:e.onseek}]:[],r._onunlock=e.onunlock?[{fn:e.onunlock}]:[],r._onresume=[],r._webAudio=i.usingWebAudio&&!r._html5,typeof i.ctx<"u"&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&r._preload!=="none"&&r.load(),r},load:function(){var e=this,r=null;if(i.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var s,p;if(e._format&&e._format[n])s=e._format[n];else{if(p=e._src[n],typeof p!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}s=/^data:audio\/([^;,]+);/i.exec(p),s||(s=/\.([^.]+)$/.exec(p.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(s||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),s&&i.codecs(s)){r=e._src[n];break}}if(!r){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=r,e._state="loading",window.location.protocol==="https:"&&r.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new l(e),e._webAudio&&D(e),e},play:function(e,r){var n=this,s=null;if(typeof e=="number")s=e,e=null;else{if(typeof e=="string"&&n._state==="loaded"&&!n._sprite[e])return null;if(typeof e>"u"&&(e="__default",!n._playLock)){for(var p=0,g=0;g<n._sounds.length;g++)n._sounds[g]._paused&&!n._sounds[g]._ended&&(p++,s=n._sounds[g]._id);p===1?e=null:s=null}}var f=s?n._soundById(s):n._inactiveSound();if(!f)return null;if(s&&!e&&(e=f._sprite||"__default"),n._state!=="loaded"){f._sprite=e,f._ended=!1;var I=f._id;return n._queue.push({event:"play",action:function(){n.play(I)}}),I}if(s&&!f._paused)return r||n._loadQueue("play"),f._id;n._webAudio&&i._autoResume();var W=Math.max(0,f._seek>0?f._seek:n._sprite[e][0]/1e3),G=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-W),re=G*1e3/Math.abs(f._rate),me=n._sprite[e][0]/1e3,ae=(n._sprite[e][0]+n._sprite[e][1])/1e3;f._sprite=e,f._ended=!1;var se=function(){f._paused=!1,f._seek=W,f._start=me,f._stop=ae,f._loop=!!(f._loop||n._sprite[e][2])};if(W>=ae){n._ended(f);return}var H=f._node;if(n._webAudio){var ve=function(){n._playLock=!1,se(),n._refreshBuffer(f);var Q=f._muted||n._muted?0:f._volume;H.gain.setValueAtTime(Q,i.ctx.currentTime),f._playStart=i.ctx.currentTime,typeof H.bufferSource.start>"u"?f._loop?H.bufferSource.noteGrainOn(0,W,86400):H.bufferSource.noteGrainOn(0,W,G):f._loop?H.bufferSource.start(0,W,86400):H.bufferSource.start(0,W,G),re!==1/0&&(n._endTimers[f._id]=setTimeout(n._ended.bind(n,f),re)),r||setTimeout(function(){n._emit("play",f._id),n._loadQueue()},0)};i.state==="running"&&i.ctx.state!=="interrupted"?ve():(n._playLock=!0,n.once("resume",ve),n._clearTimer(f._id))}else{var _e=function(){H.currentTime=W,H.muted=f._muted||n._muted||i._muted||H.muted,H.volume=f._volume*i.volume(),H.playbackRate=f._rate;try{var Q=H.play();if(Q&&typeof Promise<"u"&&(Q instanceof Promise||typeof Q.then=="function")?(n._playLock=!0,se(),Q.then(function(){n._playLock=!1,H._unlocked=!0,r?n._loadQueue():n._emit("play",f._id)}).catch(function(){n._playLock=!1,n._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),f._ended=!0,f._paused=!0})):r||(n._playLock=!1,se(),n._emit("play",f._id)),H.playbackRate=f._rate,H.paused){n._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||f._loop?n._endTimers[f._id]=setTimeout(n._ended.bind(n,f),re):(n._endTimers[f._id]=function(){n._ended(f),H.removeEventListener("ended",n._endTimers[f._id],!1)},H.addEventListener("ended",n._endTimers[f._id],!1))}catch(we){n._emit("playerror",f._id,we)}};H.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(H.src=n._src,H.load());var ye=window&&window.ejecta||!H.readyState&&i._navigator.isCocoonJS;if(H.readyState>=3||ye)_e();else{n._playLock=!0,n._state="loading";var be=function(){n._state="loaded",_e(),H.removeEventListener(i._canPlayEvent,be,!1)};H.addEventListener(i._canPlayEvent,be,!1),n._clearTimer(f._id)}}return f._id},pause:function(e){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(e)}}),r;for(var n=r._getSoundIds(e),s=0;s<n.length;s++){r._clearTimer(n[s]);var p=r._soundById(n[s]);if(p&&!p._paused&&(p._seek=r.seek(n[s]),p._rateSeek=0,p._paused=!0,r._stopFade(n[s]),p._node))if(r._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),r._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||r._emit("pause",p?p._id:null)}return r},stop:function(e,r){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var s=n._getSoundIds(e),p=0;p<s.length;p++){n._clearTimer(s[p]);var g=n._soundById(s[p]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,n._stopFade(s[p]),g._node&&(n._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),n._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&n._clearSound(g._node))),r||n._emit("stop",g._id))}return n},mute:function(e,r){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,r)}}),n;if(typeof r>"u")if(typeof e=="boolean")n._muted=e;else return n._muted;for(var s=n._getSoundIds(r),p=0;p<s.length;p++){var g=n._soundById(s[p]);g&&(g._muted=e,g._interval&&n._stopFade(g._id),n._webAudio&&g._node?g._node.gain.setValueAtTime(e?0:g._volume,i.ctx.currentTime):g._node&&(g._node.muted=i._muted?!0:e),n._emit("mute",g._id))}return n},volume:function(){var e=this,r=arguments,n,s;if(r.length===0)return e._volume;if(r.length===1||r.length===2&&typeof r[1]>"u"){var p=e._getSoundIds(),g=p.indexOf(r[0]);g>=0?s=parseInt(r[0],10):n=parseFloat(r[0])}else r.length>=2&&(n=parseFloat(r[0]),s=parseInt(r[1],10));var f;if(typeof n<"u"&&n>=0&&n<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,r)}}),e;typeof s>"u"&&(e._volume=n),s=e._getSoundIds(s);for(var I=0;I<s.length;I++)f=e._soundById(s[I]),f&&(f._volume=n,r[2]||e._stopFade(s[I]),e._webAudio&&f._node&&!f._muted?f._node.gain.setValueAtTime(n,i.ctx.currentTime):f._node&&!f._muted&&(f._node.volume=n*i.volume()),e._emit("volume",f._id))}else return f=s?e._soundById(s):e._sounds[0],f?f._volume:0;return e},fade:function(e,r,n,s){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(e,r,n,s)}}),p;e=Math.min(Math.max(0,parseFloat(e)),1),r=Math.min(Math.max(0,parseFloat(r)),1),n=parseFloat(n),p.volume(e,s);for(var g=p._getSoundIds(s),f=0;f<g.length;f++){var I=p._soundById(g[f]);if(I){if(s||p._stopFade(g[f]),p._webAudio&&!I._muted){var W=i.ctx.currentTime,G=W+n/1e3;I._volume=e,I._node.gain.setValueAtTime(e,W),I._node.gain.linearRampToValueAtTime(r,G)}p._startFadeInterval(I,e,r,n,g[f],typeof s>"u")}}return p},_startFadeInterval:function(e,r,n,s,p,g){var f=this,I=r,W=n-r,G=Math.abs(W/.01),re=Math.max(4,G>0?s/G:s),me=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var ae=(Date.now()-me)/s;me=Date.now(),I+=W*ae,I=Math.round(I*100)/100,W<0?I=Math.max(n,I):I=Math.min(n,I),f._webAudio?e._volume=I:f.volume(I,e._id,!0),g&&(f._volume=I),(n<r&&I<=n||n>r&&I>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,f.volume(n,e._id),f._emit("fade",e._id))},re)},_stopFade:function(e){var r=this,n=r._soundById(e);return n&&n._interval&&(r._webAudio&&n._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(n._interval),n._interval=null,r.volume(n._fadeTo,e),n._fadeTo=null,r._emit("fade",e)),r},loop:function(){var e=this,r=arguments,n,s,p;if(r.length===0)return e._loop;if(r.length===1)if(typeof r[0]=="boolean")n=r[0],e._loop=n;else return p=e._soundById(parseInt(r[0],10)),p?p._loop:!1;else r.length===2&&(n=r[0],s=parseInt(r[1],10));for(var g=e._getSoundIds(s),f=0;f<g.length;f++)p=e._soundById(g[f]),p&&(p._loop=n,e._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=n,n&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,e.playing(g[f])&&(e.pause(g[f],!0),e.play(g[f],!0)))));return e},rate:function(){var e=this,r=arguments,n,s;if(r.length===0)s=e._sounds[0]._id;else if(r.length===1){var p=e._getSoundIds(),g=p.indexOf(r[0]);g>=0?s=parseInt(r[0],10):n=parseFloat(r[0])}else r.length===2&&(n=parseFloat(r[0]),s=parseInt(r[1],10));var f;if(typeof n=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,r)}}),e;typeof s>"u"&&(e._rate=n),s=e._getSoundIds(s);for(var I=0;I<s.length;I++)if(f=e._soundById(s[I]),f){e.playing(s[I])&&(f._rateSeek=e.seek(s[I]),f._playStart=e._webAudio?i.ctx.currentTime:f._playStart),f._rate=n,e._webAudio&&f._node&&f._node.bufferSource?f._node.bufferSource.playbackRate.setValueAtTime(n,i.ctx.currentTime):f._node&&(f._node.playbackRate=n);var W=e.seek(s[I]),G=(e._sprite[f._sprite][0]+e._sprite[f._sprite][1])/1e3-W,re=G*1e3/Math.abs(f._rate);(e._endTimers[s[I]]||!f._paused)&&(e._clearTimer(s[I]),e._endTimers[s[I]]=setTimeout(e._ended.bind(e,f),re)),e._emit("rate",f._id)}}else return f=e._soundById(s),f?f._rate:e._rate;return e},seek:function(){var e=this,r=arguments,n,s;if(r.length===0)e._sounds.length&&(s=e._sounds[0]._id);else if(r.length===1){var p=e._getSoundIds(),g=p.indexOf(r[0]);g>=0?s=parseInt(r[0],10):e._sounds.length&&(s=e._sounds[0]._id,n=parseFloat(r[0]))}else r.length===2&&(n=parseFloat(r[0]),s=parseInt(r[1],10));if(typeof s>"u")return 0;if(typeof n=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,r)}}),e;var f=e._soundById(s);if(f)if(typeof n=="number"&&n>=0){var I=e.playing(s);I&&e.pause(s,!0),f._seek=n,f._ended=!1,e._clearTimer(s),!e._webAudio&&f._node&&!isNaN(f._node.duration)&&(f._node.currentTime=n);var W=function(){I&&e.play(s,!0),e._emit("seek",s)};if(I&&!e._webAudio){var G=function(){e._playLock?setTimeout(G,0):W()};setTimeout(G,0)}else W()}else if(e._webAudio){var re=e.playing(s)?i.ctx.currentTime-f._playStart:0,me=f._rateSeek?f._rateSeek-f._seek:0;return f._seek+(me+re*Math.abs(f._rate))}else return f._node.currentTime;return e},playing:function(e){var r=this;if(typeof e=="number"){var n=r._soundById(e);return n?!n._paused:!1}for(var s=0;s<r._sounds.length;s++)if(!r._sounds[s]._paused)return!0;return!1},duration:function(e){var r=this,n=r._duration,s=r._soundById(e);return s&&(n=r._sprite[s._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,r=e._sounds,n=0;n<r.length;n++)r[n]._paused||e.stop(r[n]._id),e._webAudio||(e._clearSound(r[n]._node),r[n]._node.removeEventListener("error",r[n]._errorFn,!1),r[n]._node.removeEventListener(i._canPlayEvent,r[n]._loadFn,!1),r[n]._node.removeEventListener("ended",r[n]._endFn,!1),i._releaseHtml5Audio(r[n]._node)),delete r[n]._node,e._clearTimer(r[n]._id);var s=i._howls.indexOf(e);s>=0&&i._howls.splice(s,1);var p=!0;for(n=0;n<i._howls.length;n++)if(i._howls[n]._src===e._src||e._src.indexOf(i._howls[n]._src)>=0){p=!1;break}return P&&p&&delete P[e._src],i.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,r,n,s){var p=this,g=p["_on"+e];return typeof r=="function"&&g.push(s?{id:n,fn:r,once:s}:{id:n,fn:r}),p},off:function(e,r,n){var s=this,p=s["_on"+e],g=0;if(typeof r=="number"&&(n=r,r=null),r||n)for(g=0;g<p.length;g++){var f=n===p[g].id;if(r===p[g].fn&&f||!r&&f){p.splice(g,1);break}}else if(e)s["_on"+e]=[];else{var I=Object.keys(s);for(g=0;g<I.length;g++)I[g].indexOf("_on")===0&&Array.isArray(s[I[g]])&&(s[I[g]]=[])}return s},once:function(e,r,n){var s=this;return s.on(e,r,n,1),s},_emit:function(e,r,n){for(var s=this,p=s["_on"+e],g=p.length-1;g>=0;g--)(!p[g].id||p[g].id===r||e==="load")&&(setTimeout((function(f){f.call(this,r,n)}).bind(s,p[g].fn),0),p[g].once&&s.off(e,p[g].fn,p[g].id));return s._loadQueue(e),s},_loadQueue:function(e){var r=this;if(r._queue.length>0){var n=r._queue[0];n.event===e&&(r._queue.shift(),r._loadQueue()),e||n.action()}return r},_ended:function(e){var r=this,n=e._sprite;if(!r._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(r._ended.bind(r,e),100),r;var s=!!(e._loop||r._sprite[n][2]);if(r._emit("end",e._id),!r._webAudio&&s&&r.stop(e._id,!0).play(e._id),r._webAudio&&s){r._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=i.ctx.currentTime;var p=(e._stop-e._start)*1e3/Math.abs(e._rate);r._endTimers[e._id]=setTimeout(r._ended.bind(r,e),p)}return r._webAudio&&!s&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,r._clearTimer(e._id),r._cleanBuffer(e._node),i._autoSuspend()),!r._webAudio&&!s&&r.stop(e._id,!0),r},_clearTimer:function(e){var r=this;if(r._endTimers[e]){if(typeof r._endTimers[e]!="function")clearTimeout(r._endTimers[e]);else{var n=r._soundById(e);n&&n._node&&n._node.removeEventListener("ended",r._endTimers[e],!1)}delete r._endTimers[e]}return r},_soundById:function(e){for(var r=this,n=0;n<r._sounds.length;n++)if(e===r._sounds[n]._id)return r._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var r=0;r<e._sounds.length;r++)if(e._sounds[r]._ended)return e._sounds[r].reset();return new l(e)},_drain:function(){var e=this,r=e._pool,n=0,s=0;if(!(e._sounds.length<r)){for(s=0;s<e._sounds.length;s++)e._sounds[s]._ended&&n++;for(s=e._sounds.length-1;s>=0;s--){if(n<=r)return;e._sounds[s]._ended&&(e._webAudio&&e._sounds[s]._node&&e._sounds[s]._node.disconnect(0),e._sounds.splice(s,1),n--)}}},_getSoundIds:function(e){var r=this;if(typeof e>"u"){for(var n=[],s=0;s<r._sounds.length;s++)n.push(r._sounds[s]._id);return n}else return[e]},_refreshBuffer:function(e){var r=this;return e._node.bufferSource=i.ctx.createBufferSource(),e._node.bufferSource.buffer=P[r._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,i.ctx.currentTime),r},_cleanBuffer:function(e){var r=this,n=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return r;if(i._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),n))try{e.bufferSource.buffer=i._scratchBuffer}catch{}return e.bufferSource=null,r},_clearSound:function(e){var r=/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent);r||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var l=function(e){this._parent=e,this.init()};l.prototype={init:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++i._counter,r._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,n=i._muted||e._muted||e._parent._muted?0:e._volume;return r._webAudio?(e._node=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),e._node.gain.setValueAtTime(n,i.ctx.currentTime),e._node.paused=!0,e._node.connect(i.masterGain)):i.noAudio||(e._node=i._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(i._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=r._src,e._node.preload=r._preload===!0?"auto":r._preload,e._node.volume=n*i.volume(),e._node.load()),e},reset:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++i._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,r=e._parent;r._duration=Math.ceil(e._node.duration*10)/10,Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue()),e._node.removeEventListener(i._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,r=e._parent;r._duration===1/0&&(r._duration=Math.ceil(e._node.duration*10)/10,r._sprite.__default[1]===1/0&&(r._sprite.__default[1]=r._duration*1e3),r._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var P={},D=function(e){var r=e._src;if(P[r]){e._duration=P[r].duration,L(e);return}if(/^data:[^;]+;base64,/.test(r)){for(var n=atob(r.split(",")[1]),s=new Uint8Array(n.length),p=0;p<n.length;++p)s[p]=n.charCodeAt(p);F(s.buffer,e)}else{var g=new XMLHttpRequest;g.open(e._xhr.method,r,!0),g.withCredentials=e._xhr.withCredentials,g.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(f){g.setRequestHeader(f,e._xhr.headers[f])}),g.onload=function(){var f=(g.status+"")[0];if(f!=="0"&&f!=="2"&&f!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}F(g.response,e)},g.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete P[r],e.load())},X(g)}},X=function(e){try{e.send()}catch{e.onerror()}},F=function(e,r){var n=function(){r._emit("loaderror",null,"Decoding audio data failed.")},s=function(p){p&&r._sounds.length>0?(P[r._src]=p,L(r,p)):n()};typeof Promise<"u"&&i.ctx.decodeAudioData.length===1?i.ctx.decodeAudioData(e).then(s).catch(n):i.ctx.decodeAudioData(e,s,n)},L=function(e,r){r&&!e._duration&&(e._duration=r.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},N=function(){if(i.usingWebAudio){try{typeof AudioContext<"u"?i.ctx=new AudioContext:typeof webkitAudioContext<"u"?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch{i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),r=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=r?parseInt(r[1],10):null;if(e&&n&&n<9){var s=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!s&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};Ae.Howler=i,Ae.Howl=_,typeof z<"u"?(z.HowlerGlobal=M,z.Howler=i,z.Howl=_,z.Sound=l):typeof window<"u"&&(window.HowlerGlobal=M,window.Howler=i,window.Howl=_,window.Sound=l)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(i){var _=this;if(!_.ctx||!_.ctx.listener)return _;for(var l=_._howls.length-1;l>=0;l--)_._howls[l].stereo(i);return _},HowlerGlobal.prototype.pos=function(i,_,l){var P=this;if(!P.ctx||!P.ctx.listener)return P;if(_=typeof _!="number"?P._pos[1]:_,l=typeof l!="number"?P._pos[2]:l,typeof i=="number")P._pos=[i,_,l],typeof P.ctx.listener.positionX<"u"?(P.ctx.listener.positionX.setTargetAtTime(P._pos[0],Howler.ctx.currentTime,.1),P.ctx.listener.positionY.setTargetAtTime(P._pos[1],Howler.ctx.currentTime,.1),P.ctx.listener.positionZ.setTargetAtTime(P._pos[2],Howler.ctx.currentTime,.1)):P.ctx.listener.setPosition(P._pos[0],P._pos[1],P._pos[2]);else return P._pos;return P},HowlerGlobal.prototype.orientation=function(i,_,l,P,D,X){var F=this;if(!F.ctx||!F.ctx.listener)return F;var L=F._orientation;if(_=typeof _!="number"?L[1]:_,l=typeof l!="number"?L[2]:l,P=typeof P!="number"?L[3]:P,D=typeof D!="number"?L[4]:D,X=typeof X!="number"?L[5]:X,typeof i=="number")F._orientation=[i,_,l,P,D,X],typeof F.ctx.listener.forwardX<"u"?(F.ctx.listener.forwardX.setTargetAtTime(i,Howler.ctx.currentTime,.1),F.ctx.listener.forwardY.setTargetAtTime(_,Howler.ctx.currentTime,.1),F.ctx.listener.forwardZ.setTargetAtTime(l,Howler.ctx.currentTime,.1),F.ctx.listener.upX.setTargetAtTime(P,Howler.ctx.currentTime,.1),F.ctx.listener.upY.setTargetAtTime(D,Howler.ctx.currentTime,.1),F.ctx.listener.upZ.setTargetAtTime(X,Howler.ctx.currentTime,.1)):F.ctx.listener.setOrientation(i,_,l,P,D,X);else return L;return F},Howl.prototype.init=function(i){return function(_){var l=this;return l._orientation=_.orientation||[1,0,0],l._stereo=_.stereo||null,l._pos=_.pos||null,l._pannerAttr={coneInnerAngle:typeof _.coneInnerAngle<"u"?_.coneInnerAngle:360,coneOuterAngle:typeof _.coneOuterAngle<"u"?_.coneOuterAngle:360,coneOuterGain:typeof _.coneOuterGain<"u"?_.coneOuterGain:0,distanceModel:typeof _.distanceModel<"u"?_.distanceModel:"inverse",maxDistance:typeof _.maxDistance<"u"?_.maxDistance:1e4,panningModel:typeof _.panningModel<"u"?_.panningModel:"HRTF",refDistance:typeof _.refDistance<"u"?_.refDistance:1,rolloffFactor:typeof _.rolloffFactor<"u"?_.rolloffFactor:1},l._onstereo=_.onstereo?[{fn:_.onstereo}]:[],l._onpos=_.onpos?[{fn:_.onpos}]:[],l._onorientation=_.onorientation?[{fn:_.onorientation}]:[],i.call(this,_)}}(Howl.prototype.init),Howl.prototype.stereo=function(i,_){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"stereo",action:function(){l.stereo(i,_)}}),l;var P=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof _>"u")if(typeof i=="number")l._stereo=i,l._pos=[i,0,0];else return l._stereo;for(var D=l._getSoundIds(_),X=0;X<D.length;X++){var F=l._soundById(D[X]);if(F)if(typeof i=="number")F._stereo=i,F._pos=[i,0,0],F._node&&(F._pannerAttr.panningModel="equalpower",(!F._panner||!F._panner.pan)&&M(F,P),P==="spatial"?typeof F._panner.positionX<"u"?(F._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),F._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),F._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):F._panner.setPosition(i,0,0):F._panner.pan.setValueAtTime(i,Howler.ctx.currentTime)),l._emit("stereo",F._id);else return F._stereo}return l},Howl.prototype.pos=function(i,_,l,P){var D=this;if(!D._webAudio)return D;if(D._state!=="loaded")return D._queue.push({event:"pos",action:function(){D.pos(i,_,l,P)}}),D;if(_=typeof _!="number"?0:_,l=typeof l!="number"?-.5:l,typeof P>"u")if(typeof i=="number")D._pos=[i,_,l];else return D._pos;for(var X=D._getSoundIds(P),F=0;F<X.length;F++){var L=D._soundById(X[F]);if(L)if(typeof i=="number")L._pos=[i,_,l],L._node&&((!L._panner||L._panner.pan)&&M(L,"spatial"),typeof L._panner.positionX<"u"?(L._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),L._panner.positionY.setValueAtTime(_,Howler.ctx.currentTime),L._panner.positionZ.setValueAtTime(l,Howler.ctx.currentTime)):L._panner.setPosition(i,_,l)),D._emit("pos",L._id);else return L._pos}return D},Howl.prototype.orientation=function(i,_,l,P){var D=this;if(!D._webAudio)return D;if(D._state!=="loaded")return D._queue.push({event:"orientation",action:function(){D.orientation(i,_,l,P)}}),D;if(_=typeof _!="number"?D._orientation[1]:_,l=typeof l!="number"?D._orientation[2]:l,typeof P>"u")if(typeof i=="number")D._orientation=[i,_,l];else return D._orientation;for(var X=D._getSoundIds(P),F=0;F<X.length;F++){var L=D._soundById(X[F]);if(L)if(typeof i=="number")L._orientation=[i,_,l],L._node&&(L._panner||(L._pos||(L._pos=D._pos||[0,0,-.5]),M(L,"spatial")),typeof L._panner.orientationX<"u"?(L._panner.orientationX.setValueAtTime(i,Howler.ctx.currentTime),L._panner.orientationY.setValueAtTime(_,Howler.ctx.currentTime),L._panner.orientationZ.setValueAtTime(l,Howler.ctx.currentTime)):L._panner.setOrientation(i,_,l)),D._emit("orientation",L._id);else return L._orientation}return D},Howl.prototype.pannerAttr=function(){var i=this,_=arguments,l,P,D;if(!i._webAudio)return i;if(_.length===0)return i._pannerAttr;if(_.length===1)if(typeof _[0]=="object")l=_[0],typeof P>"u"&&(l.pannerAttr||(l.pannerAttr={coneInnerAngle:l.coneInnerAngle,coneOuterAngle:l.coneOuterAngle,coneOuterGain:l.coneOuterGain,distanceModel:l.distanceModel,maxDistance:l.maxDistance,refDistance:l.refDistance,rolloffFactor:l.rolloffFactor,panningModel:l.panningModel}),i._pannerAttr={coneInnerAngle:typeof l.pannerAttr.coneInnerAngle<"u"?l.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:typeof l.pannerAttr.coneOuterAngle<"u"?l.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:typeof l.pannerAttr.coneOuterGain<"u"?l.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:typeof l.pannerAttr.distanceModel<"u"?l.pannerAttr.distanceModel:i._distanceModel,maxDistance:typeof l.pannerAttr.maxDistance<"u"?l.pannerAttr.maxDistance:i._maxDistance,refDistance:typeof l.pannerAttr.refDistance<"u"?l.pannerAttr.refDistance:i._refDistance,rolloffFactor:typeof l.pannerAttr.rolloffFactor<"u"?l.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:typeof l.pannerAttr.panningModel<"u"?l.pannerAttr.panningModel:i._panningModel});else return D=i._soundById(parseInt(_[0],10)),D?D._pannerAttr:i._pannerAttr;else _.length===2&&(l=_[0],P=parseInt(_[1],10));for(var X=i._getSoundIds(P),F=0;F<X.length;F++)if(D=i._soundById(X[F]),D){var L=D._pannerAttr;L={coneInnerAngle:typeof l.coneInnerAngle<"u"?l.coneInnerAngle:L.coneInnerAngle,coneOuterAngle:typeof l.coneOuterAngle<"u"?l.coneOuterAngle:L.coneOuterAngle,coneOuterGain:typeof l.coneOuterGain<"u"?l.coneOuterGain:L.coneOuterGain,distanceModel:typeof l.distanceModel<"u"?l.distanceModel:L.distanceModel,maxDistance:typeof l.maxDistance<"u"?l.maxDistance:L.maxDistance,refDistance:typeof l.refDistance<"u"?l.refDistance:L.refDistance,rolloffFactor:typeof l.rolloffFactor<"u"?l.rolloffFactor:L.rolloffFactor,panningModel:typeof l.panningModel<"u"?l.panningModel:L.panningModel};var N=D._panner;N||(D._pos||(D._pos=i._pos||[0,0,-.5]),M(D,"spatial"),N=D._panner),N.coneInnerAngle=L.coneInnerAngle,N.coneOuterAngle=L.coneOuterAngle,N.coneOuterGain=L.coneOuterGain,N.distanceModel=L.distanceModel,N.maxDistance=L.maxDistance,N.refDistance=L.refDistance,N.rolloffFactor=L.rolloffFactor,N.panningModel=L.panningModel}return i},Sound.prototype.init=function(i){return function(){var _=this,l=_._parent;_._orientation=l._orientation,_._stereo=l._stereo,_._pos=l._pos,_._pannerAttr=l._pannerAttr,i.call(this),_._stereo?l.stereo(_._stereo):_._pos&&l.pos(_._pos[0],_._pos[1],_._pos[2],_._id)}}(Sound.prototype.init),Sound.prototype.reset=function(i){return function(){var _=this,l=_._parent;return _._orientation=l._orientation,_._stereo=l._stereo,_._pos=l._pos,_._pannerAttr=l._pannerAttr,_._stereo?l.stereo(_._stereo):_._pos?l.pos(_._pos[0],_._pos[1],_._pos[2],_._id):_._panner&&(_._panner.disconnect(0),_._panner=void 0,l._refreshBuffer(_)),i.call(this)}}(Sound.prototype.reset);var M=function(i,_){_=_||"spatial",_==="spatial"?(i._panner=Howler.ctx.createPanner(),i._panner.coneInnerAngle=i._pannerAttr.coneInnerAngle,i._panner.coneOuterAngle=i._pannerAttr.coneOuterAngle,i._panner.coneOuterGain=i._pannerAttr.coneOuterGain,i._panner.distanceModel=i._pannerAttr.distanceModel,i._panner.maxDistance=i._pannerAttr.maxDistance,i._panner.refDistance=i._pannerAttr.refDistance,i._panner.rolloffFactor=i._pannerAttr.rolloffFactor,i._panner.panningModel=i._pannerAttr.panningModel,typeof i._panner.positionX<"u"?(i._panner.positionX.setValueAtTime(i._pos[0],Howler.ctx.currentTime),i._panner.positionY.setValueAtTime(i._pos[1],Howler.ctx.currentTime),i._panner.positionZ.setValueAtTime(i._pos[2],Howler.ctx.currentTime)):i._panner.setPosition(i._pos[0],i._pos[1],i._pos[2]),typeof i._panner.orientationX<"u"?(i._panner.orientationX.setValueAtTime(i._orientation[0],Howler.ctx.currentTime),i._panner.orientationY.setValueAtTime(i._orientation[1],Howler.ctx.currentTime),i._panner.orientationZ.setValueAtTime(i._orientation[2],Howler.ctx.currentTime)):i._panner.setOrientation(i._orientation[0],i._orientation[1],i._orientation[2])):(i._panner=Howler.ctx.createStereoPanner(),i._panner.pan.setValueAtTime(i._stereo,Howler.ctx.currentTime)),i._panner.connect(i._node),i._paused||i._parent.pause(i._id,!0).play(i._id,!0)}})()})(Xe);var Ue={exports:{}};(function(Ae){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function M(a,t){if(!a)throw"First parameter is required.";t=t||{type:"video"},t=new i(a,t);var o=this;function h(c){return t.disableLogs||console.log("RecordRTC version: ",o.version),c&&(t=new i(a,c)),t.disableLogs||console.log("started recording "+t.type+" stream."),A?(A.clearRecordedData(),A.record(),k("recording"),o.recordingDuration&&w(),o):(v(function(){o.recordingDuration&&w()}),o)}function v(c){c&&(t.initCallback=function(){c(),c=t.initCallback=null});var x=new _(a,t);A=new x(a,t),A.record(),k("recording"),t.disableLogs||console.log("Initialized recorderType:",A.constructor.name,"for output-type:",t.type)}function m(c){if(c=c||function(){},!A){S();return}if(o.state==="paused"){o.resumeRecording(),setTimeout(function(){m(c)},1);return}o.state!=="recording"&&!t.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',o.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),t.type!=="gif"?A.stop(x):(A.stop(),x()),k("stopped");function x(U){if(!A){typeof c.call=="function"?c.call(o,""):c("");return}Object.keys(A).forEach(function(B){typeof A[B]!="function"&&(o[B]=A[B])});var d=A.blob;if(!d)if(U)A.blob=d=U;else throw"Recording failed.";if(d&&!t.disableLogs&&console.log(d.type,"->",f(d.size)),c){var y;try{y=N.createObjectURL(d)}catch{}typeof c.call=="function"?c.call(o,y):c(y)}t.autoWriteToDisk&&C(function(B){var O={};O[t.type+"Blob"]=B,Q.Store(O)})}}function b(){if(!A){S();return}if(o.state!=="recording"){t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",o.state);return}k("paused"),A.pause(),t.disableLogs||console.log("Paused recording.")}function u(){if(!A){S();return}if(o.state!=="paused"){t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",o.state);return}k("recording"),A.resume(),t.disableLogs||console.log("Resumed recording.")}function T(c){postMessage(new FileReaderSync().readAsDataURL(c))}function C(c,x){if(!c)throw"Pass a callback function over getDataURL.";var U=x?x.blob:(A||{}).blob;if(!U){t.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){C(c,x)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var d=B(T);d.onmessage=function(O){c(O.data)},d.postMessage(U)}else{var y=new FileReader;y.readAsDataURL(U),y.onload=function(O){c(O.target.result)}}function B(O){try{var q=N.createObjectURL(new Blob([O.toString(),"this.onmessage =  function (eee) {"+O.name+"(eee.data);}"],{type:"application/javascript"})),V=new Worker(q);return N.revokeObjectURL(q),V}catch{}}}function w(c){if(c=c||0,o.state==="paused"){setTimeout(function(){w(c)},1e3);return}if(o.state!=="stopped"){if(c>=o.recordingDuration){m(o.onRecordingStopped);return}c+=1e3,setTimeout(function(){w(c)},1e3)}}function k(c){o&&(o.state=c,typeof o.onStateChanged.call=="function"?o.onStateChanged.call(o,c):o.onStateChanged(c))}var R='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function S(){t.disableLogs!==!0&&console.warn(R)}var A,E={startRecording:h,stopRecording:m,pauseRecording:b,resumeRecording:u,initRecorder:v,setRecordingDuration:function(c,x){if(typeof c>"u")throw"recordingDuration is required.";if(typeof c!="number")throw"recordingDuration must be a number.";return o.recordingDuration=c,o.onRecordingStopped=x||function(){},{onRecordingStopped:function(U){o.onRecordingStopped=U}}},clearRecordedData:function(){if(!A){S();return}A.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!A){S();return}return A.blob},getDataURL:C,toURL:function(){if(!A){S();return}return N.createObjectURL(A.blob)},getInternalRecorder:function(){return A},save:function(c){if(!A){S();return}I(A.blob,c)},getFromDisk:function(c){if(!A){S();return}M.getFromDisk(t.type,c)},setAdvertisementArray:function(c){t.advertisement=[];for(var x=c.length,U=0;U<x;U++)t.advertisement.push({duration:U,image:c[U]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){o.state==="recording"&&!t.disableLogs&&console.warn("Stop an active recorder."),A&&typeof A.clearRecordedData=="function"&&A.clearRecordedData(),A=null,k("inactive"),o.blob=null},onStateChanged:function(c){t.disableLogs||console.log("Recorder state changed:",c)},state:"inactive",getState:function(){return o.state},destroy:function(){var c=t.disableLogs;t={disableLogs:!0},o.reset(),k("destroyed"),E=o=null,ae.AudioContextConstructor&&(ae.AudioContextConstructor.close(),ae.AudioContextConstructor=null),t.disableLogs=c,t.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return o=E,E;for(var j in E)this[j]=E[j];return o=this,E}M.version="5.6.2",Ae.exports=M,M.getFromDisk=function(a,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+(a==="all"?"blobs":a+" blob ")+" from disk!"),Q.Fetch(function(o,h){a!=="all"&&h===a+"Blob"&&t&&t(o),a==="all"&&t&&t(o,h.replace("Blob",""))})},M.writeToDisk=function(a){console.log("Writing recorded blob(s) to disk!"),a=a||{},a.audio&&a.video&&a.gif?a.audio.getDataURL(function(t){a.video.getDataURL(function(o){a.gif.getDataURL(function(h){Q.Store({audioBlob:t,videoBlob:o,gifBlob:h})})})}):a.audio&&a.video?a.audio.getDataURL(function(t){a.video.getDataURL(function(o){Q.Store({audioBlob:t,videoBlob:o})})}):a.audio&&a.gif?a.audio.getDataURL(function(t){a.gif.getDataURL(function(o){Q.Store({audioBlob:t,gifBlob:o})})}):a.video&&a.gif?a.video.getDataURL(function(t){a.gif.getDataURL(function(o){Q.Store({videoBlob:t,gifBlob:o})})}):a.audio?a.audio.getDataURL(function(t){Q.Store({audioBlob:t})}):a.video?a.video.getDataURL(function(t){Q.Store({videoBlob:t})}):a.gif&&a.gif.getDataURL(function(t){Q.Store({gifBlob:t})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function i(a,t){return!t.recorderType&&!t.type&&(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===ye||t.recorderType===_e||typeof Te<"u"&&t.recorderType===Te?t.type="video":t.recorderType===we?t.type="gif":t.recorderType===ve?t.type="audio":t.recorderType===H&&(G(a,"audio").length&&G(a,"video").length||!G(a,"audio").length&&G(a,"video").length?t.type="video":G(a,"audio").length&&!G(a,"video").length&&(t.type="audio"))),typeof H<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function _(a,t){var o;return(s||e||r)&&(o=ve),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!s&&(o=H),t.type==="video"&&(s||r)&&(o=ye,typeof Te<"u"&&typeof ReadableStream<"u"&&(o=Te)),t.type==="gif"&&(o=we),t.type==="canvas"&&(o=_e),se()&&o!==_e&&o!==we&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(G(a,"video").length||G(a,"audio").length)&&(t.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(o=H):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(o=H)),a instanceof Array&&a.length&&(o=Fe),t.recorderType&&(o=t.recorderType),!t.disableLogs&&o&&o.name&&console.log("Using recorderType:",o.name||o.constructor.name),!o&&p&&(o=H),o}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function l(a){this.addStream=function(t){t&&(a=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t=this.mediaType,o,h=this.mimeType||{audio:null,video:null,gif:null};if(typeof t.audio!="function"&&se()&&!G(a,"audio").length&&(t.audio=!1),typeof t.video!="function"&&se()&&!G(a,"video").length&&(t.video=!1),typeof t.gif!="function"&&se()&&!G(a,"video").length&&(t.gif=!1),!t.audio&&!t.video&&!t.gif)throw"MediaStream must have either audio or video tracks.";if(t.audio&&(o=null,typeof t.audio=="function"&&(o=t.audio),this.audioRecorder=new M(a,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:o,mimeType:h.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),t.video||this.audioRecorder.startRecording()),t.video){o=null,typeof t.video=="function"&&(o=t.video);var v=a;if(se()&&t.audio&&typeof t.audio=="function"){var m=G(a,"video")[0];n?(v=new g,v.addTrack(m),o&&o===ye&&(o=H)):(v=new g,v.addTrack(m))}this.videoRecorder=new M(v,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:o,mimeType:h.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),t.audio||this.videoRecorder.startRecording()}if(t.audio&&t.video){var b=this,u=se()===!0;(t.audio instanceof ve&&t.video||t.audio!==!0&&t.video!==!0&&t.audio!==t.video)&&(u=!1),u===!0?(b.audioRecorder=null,b.videoRecorder.startRecording()):b.videoRecorder.initRecorder(function(){b.audioRecorder.initRecorder(function(){b.videoRecorder.startRecording(),b.audioRecorder.startRecording()})})}t.gif&&(o=null,typeof t.gif=="function"&&(o=t.gif),this.gifRecorder=new M(a,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:o,mimeType:h.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(t){t=t||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(o){t(o,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(o){t(o,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(o){t(o,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(t){var o={};return this.audioRecorder&&(o.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(o.video=this.videoRecorder.getBlob()),this.gifRecorder&&(o.gif=this.gifRecorder.getBlob()),t&&t(o),o},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(t){this.getBlob(function(v){v.audio&&v.video?o(v.audio,function(m){o(v.video,function(b){t({audio:m,video:b})})}):v.audio?o(v.audio,function(m){t({audio:m})}):v.video&&o(v.video,function(m){t({video:m})})});function o(v,m){if(typeof Worker<"u"){var b=h(function(C){postMessage(new FileReaderSync().readAsDataURL(C))});b.onmessage=function(T){m(T.data)},b.postMessage(v)}else{var u=new FileReader;u.readAsDataURL(v),u.onload=function(T){m(T.target.result)}}}function h(v){var m=N.createObjectURL(new Blob([v.toString(),"this.onmessage =  function (eee) {"+v.name+"(eee.data);}"],{type:"application/javascript"})),b=new Worker(m),u;if(typeof N<"u")u=N;else if(typeof webkitURL<"u")u=webkitURL;else throw"Neither URL nor webkitURL detected.";return u.revokeObjectURL(m),b}},this.writeToDisk=function(){M.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(t){t=t||{audio:!0,video:!0,gif:!0},t.audio&&this.audioRecorder&&this.audioRecorder.save(typeof t.audio=="string"?t.audio:""),t.video&&this.videoRecorder&&this.videoRecorder.save(typeof t.video=="string"?t.video:""),t.gif&&this.gifRecorder&&this.gifRecorder.save(typeof t.gif=="string"?t.gif:"")}}l.getFromDisk=M.getFromDisk,l.writeToDisk=M.writeToDisk,typeof M<"u"&&(M.MRecordRTC=l);var P="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(a){a&&(typeof window<"u"||typeof z>"u"||(z.navigator={userAgent:P,getUserMedia:function(){}},z.console||(z.console={}),(typeof z.console.log>"u"||typeof z.console.error>"u")&&(z.console.error=z.console.log=z.console.log||function(){console.log(arguments)}),typeof document>"u"&&(a.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var t={getContext:function(){return t},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return t},a.HTMLVideoElement=function(){}),typeof location>"u"&&(a.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(a.screen={width:0,height:0}),typeof N>"u"&&(a.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),a.window=z))})(typeof z<"u"?z:null);var D=window.requestAnimationFrame;if(typeof D>"u"){if(typeof webkitRequestAnimationFrame<"u")D=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")D=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")D=msRequestAnimationFrame;else if(typeof D>"u"){var X=0;D=function(a,t){var o=new Date().getTime(),h=Math.max(0,16-(o-X)),v=setTimeout(function(){a(o+h)},h);return X=o+h,v}}}var F=window.cancelAnimationFrame;typeof F>"u"&&(typeof webkitCancelAnimationFrame<"u"?F=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?F=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?F=msCancelAnimationFrame:typeof F>"u"&&(F=function(a){clearTimeout(a)}));var L=window.AudioContext;typeof L>"u"&&(typeof webkitAudioContext<"u"&&(L=webkitAudioContext),typeof mozAudioContext<"u"&&(L=mozAudioContext));var N=window.URL;typeof N>"u"&&typeof webkitURL<"u"&&(N=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var e=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),r=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),s=!r&&!e&&!!navigator.webkitGetUserMedia||W()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,p=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);p&&!s&&navigator.userAgent.indexOf("CriOS")!==-1&&(p=!1,s=!0);var g=window.MediaStream;typeof g>"u"&&typeof webkitMediaStream<"u"&&(g=webkitMediaStream),typeof g<"u"&&typeof g.prototype.stop>"u"&&(g.prototype.stop=function(){this.getTracks().forEach(function(a){a.stop()})});function f(a){var t=1e3,o=["Bytes","KB","MB","GB","TB"];if(a===0)return"0 Bytes";var h=parseInt(Math.floor(Math.log(a)/Math.log(t)),10);return(a/Math.pow(t,h)).toPrecision(3)+" "+o[h]}function I(a,t){if(!a)throw"Blob object is required.";if(!a.type)try{a.type="video/webm"}catch{}var o=(a.type||"video/webm").split("/")[1];if(o.indexOf(";")!==-1&&(o=o.split(";")[0]),t&&t.indexOf(".")!==-1){var h=t.split(".");t=h[0],o=h[1]}var v=(t||Math.round(Math.random()*9999999999)+888888888)+"."+o;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(a,v);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(a,v);var m=document.createElement("a");m.href=N.createObjectURL(a),m.download=v,m.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(m),typeof m.click=="function"?m.click():(m.target="_blank",m.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),N.revokeObjectURL(m.href)}function W(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}function G(a,t){return!a||!a.getTracks?[]:a.getTracks().filter(function(o){return o.kind===(t||"audio")})}function re(a,t){"srcObject"in t?t.srcObject=a:"mozSrcObject"in t?t.mozSrcObject=a:t.srcObject=a}function me(a,t){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var o=new EBML.Reader,h=new EBML.Decoder,v=EBML.tools,m=new FileReader;m.onload=function(b){var u=h.decode(this.result);u.forEach(function(k){o.read(k)}),o.stop();var T=v.makeMetadataSeekable(o.metadatas,o.duration,o.cues),C=this.result.slice(o.metadataSize),w=new Blob([T,C],{type:"video/webm"});t(w)},m.readAsArrayBuffer(a)}typeof M<"u"&&(M.invokeSaveAsDialog=I,M.getTracks=G,M.getSeekableBlob=me,M.bytesToSize=f,M.isElectron=W);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var ae={};typeof L<"u"?ae.AudioContext=L:typeof webkitAudioContext<"u"&&(ae.AudioContext=webkitAudioContext),typeof M<"u"&&(M.Storage=ae);function se(){if(n||p||e)return!0;var a=navigator.userAgent,t=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10),h,v;return(s||r)&&(h=a.indexOf("Chrome"),t=a.substring(h+7)),(v=t.indexOf(";"))!==-1&&(t=t.substring(0,v)),(v=t.indexOf(" "))!==-1&&(t=t.substring(0,v)),o=parseInt(""+t,10),isNaN(o)&&(t=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10)),o>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function H(a,t){var w=this;if(typeof a>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(t=t||{mimeType:"video/webm"},t.type==="audio"){if(G(a,"video").length&&G(a,"audio").length){var o;navigator.mozGetUserMedia?(o=new g,o.addTrack(G(a,"audio")[0])):o=new g(G(a,"audio")),a=o}(!t.mimeType||t.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(t.mimeType=s?"audio/webm":"audio/ogg"),t.mimeType&&t.mimeType.toString().toLowerCase()!=="audio/ogg"&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var h=[];this.getArrayOfBlobs=function(){return h},this.record=function(){w.blob=null,w.clearRecordedData(),w.timestamps=[],C=[],h=[];var k=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",k),u&&(u=null),s&&!se()&&(k="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&k.mimeType&&(MediaRecorder.isTypeSupported(k.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",k.mimeType),k.mimeType=t.type==="audio"?"audio/webm":"video/webm"));try{u=new MediaRecorder(a,k),t.mimeType=k.mimeType}catch{u=new MediaRecorder(a)}k.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in u&&u.canRecordMimeType(k.mimeType)===!1&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",k.mimeType)),u.ondataavailable=function(R){if(R.data&&C.push("ondataavailable: "+f(R.data.size)),typeof t.timeSlice=="number"){if(R.data&&R.data.size&&(h.push(R.data),v(),typeof t.ondataavailable=="function")){var S=t.getNativeBlob?R.data:new Blob([R.data],{type:m(k)});t.ondataavailable(S)}return}if(!R.data||!R.data.size||R.data.size<100||w.blob){w.recordingCallback&&(w.recordingCallback(new Blob([],{type:m(k)})),w.recordingCallback=null);return}w.blob=t.getNativeBlob?R.data:new Blob([R.data],{type:m(k)}),w.recordingCallback&&(w.recordingCallback(w.blob),w.recordingCallback=null)},u.onstart=function(){C.push("started")},u.onpause=function(){C.push("paused")},u.onresume=function(){C.push("resumed")},u.onstop=function(){C.push("stopped")},u.onerror=function(R){R&&(R.name||(R.name="UnknownError"),C.push("error: "+R),t.disableLogs||(R.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",R):R.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",k.mimeType,") is not supported.",R):R.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",R):R.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",R):R.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",R):R.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",R):R.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",R):console.error("MediaRecorder Error",R)),function(S){if(!w.manuallyStopped&&u&&u.state==="inactive"){delete t.timeslice,u.start(10*60*1e3);return}setTimeout(S,1e3)}(),u.state!=="inactive"&&u.state!=="stopped"&&u.stop())},typeof t.timeSlice=="number"?(v(),u.start(t.timeSlice)):u.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[];function v(){w.timestamps.push(new Date().getTime()),typeof t.onTimeStamp=="function"&&t.onTimeStamp(w.timestamps[w.timestamps.length-1],w.timestamps)}function m(k){return u&&u.mimeType?u.mimeType:k.mimeType||"video/webm"}this.stop=function(k){k=k||function(){},w.manuallyStopped=!0,u&&(this.recordingCallback=k,u.state==="recording"&&u.stop(),typeof t.timeSlice=="number"&&setTimeout(function(){w.blob=new Blob(h,{type:m(t)}),w.recordingCallback(w.blob)},100))},this.pause=function(){u&&u.state==="recording"&&u.pause()},this.resume=function(){u&&u.state==="paused"&&u.resume()},this.clearRecordedData=function(){u&&u.state==="recording"&&w.stop(b),b()};function b(){h=[],u=null,w.timestamps=[]}var u;this.getInternalRecorder=function(){return u};function T(){if("active"in a){if(!a.active)return!1}else if("ended"in a&&a.ended)return!1;return!0}this.blob=null,this.getState=function(){return u&&u.state||"inactive"};var C=[];this.getAllStates=function(){return C},typeof t.checkForInactiveTracks>"u"&&(t.checkForInactiveTracks=!1);var w=this;(function k(){if(!(!u||t.checkForInactiveTracks===!1)){if(T()===!1){t.disableLogs||console.log("MediaStream seems stopped."),w.stop();return}setTimeout(k,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof M<"u"&&(M.MediaStreamRecorder=H);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function ve(a,t){if(!G(a,"audio").length)throw"Your stream has no audio tracks.";t=t||{};var o=this,h=[],v=[],m=!1,b=0,u,T=2,C=t.desiredSampRate;t.leftChannel===!0&&(T=1),t.numberOfAudioChannels===1&&(T=1),(!T||T<1)&&(T=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+T),typeof t.checkForInactiveTracks>"u"&&(t.checkForInactiveTracks=!0);function w(){if(t.checkForInactiveTracks===!1)return!0;if("active"in a){if(!a.active)return!1}else if("ended"in a&&a.ended)return!1;return!0}this.record=function(){if(w()===!1)throw"Please make sure MediaStream is active.";U(),y=x=!1,m=!0,typeof t.timeSlice<"u"&&q()};function k(V,Z){function K($,Re){var ue=$.numberOfAudioChannels,te=$.leftBuffers.slice(0),ce=$.rightBuffers.slice(0),ne=$.sampleRate,pe=$.internalInterleavedLength,de=$.desiredSampRate;ue===2&&(te=Le(te,pe),ce=Le(ce,pe),de&&(te=Se(te,de,ne),ce=Se(ce,de,ne))),ue===1&&(te=Le(te,pe),de&&(te=Se(te,de,ne))),de&&(ne=de);function Se(Y,fe,ie){var oe=Math.round(Y.length*(fe/ie)),ee=[],he=Number((Y.length-1)/(oe-1));ee[0]=Y[0];for(var ge=1;ge<oe-1;ge++){var Be=ge*he,Pe=Number(Math.floor(Be)).toFixed(),Ne=Number(Math.ceil(Be)).toFixed(),qe=Be-Pe;ee[ge]=Ge(Y[Pe],Y[Ne],qe)}return ee[oe-1]=Y[Y.length-1],ee}function Ge(Y,fe,ie){return Y+(fe-Y)*ie}function Le(Y,fe){for(var ie=new Float64Array(fe),oe=0,ee=Y.length,he=0;he<ee;he++){var ge=Y[he];ie.set(ge,oe),oe+=ge.length}return ie}function He(Y,fe){for(var ie=Y.length+fe.length,oe=new Float64Array(ie),ee=0,he=0;he<ie;)oe[he++]=Y[ee],oe[he++]=fe[ee],ee++;return oe}function xe(Y,fe,ie){for(var oe=ie.length,ee=0;ee<oe;ee++)Y.setUint8(fe+ee,ie.charCodeAt(ee))}var ke;ue===2&&(ke=He(te,ce)),ue===1&&(ke=te);var Ce=ke.length,Ve=44+Ce*2,Me=new ArrayBuffer(Ve),J=new DataView(Me);xe(J,0,"RIFF"),J.setUint32(4,36+Ce*2,!0),xe(J,8,"WAVE"),xe(J,12,"fmt "),J.setUint32(16,16,!0),J.setUint16(20,1,!0),J.setUint16(22,ue,!0),J.setUint32(24,ne,!0),J.setUint32(28,ne*ue*2,!0),J.setUint16(32,ue*2,!0),J.setUint16(34,16,!0),xe(J,36,"data"),J.setUint32(40,Ce*2,!0);for(var je=Ce,Oe=44,We=1,De=0;De<je;De++)J.setInt16(Oe,ke[De]*(32767*We),!0),Oe+=2;if(Re)return Re({buffer:Me,view:J});postMessage({buffer:Me,view:J})}if(V.noWorker){K(V,function($){Z($.buffer,$.view)});return}var le=R(K);le.onmessage=function($){Z($.data.buffer,$.data.view),N.revokeObjectURL(le.workerURL),le.terminate()},le.postMessage(V)}function R(V){var Z=N.createObjectURL(new Blob([V.toString(),";this.onmessage =  function (eee) {"+V.name+"(eee.data);}"],{type:"application/javascript"})),K=new Worker(Z);return K.workerURL=Z,K}this.stop=function(V){V=V||function(){},m=!1,k({desiredSampRate:C,sampleRate:c,numberOfAudioChannels:T,internalInterleavedLength:b,leftBuffers:h,rightBuffers:T===1?[]:v,noWorker:t.noWorker},function(Z,K){o.blob=new Blob([K],{type:"audio/wav"}),o.buffer=new ArrayBuffer(K.buffer.byteLength),o.view=K,o.sampleRate=C||c,o.bufferSize=j,o.length=b,y=!1,V&&V(o.blob)})},typeof M.Storage>"u"&&(M.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!M.Storage.AudioContextConstructor||M.Storage.AudioContextConstructor.state==="closed")&&(M.Storage.AudioContextConstructor=new M.Storage.AudioContext);var S=M.Storage.AudioContextConstructor,A=S.createMediaStreamSource(a),E=[0,256,512,1024,2048,4096,8192,16384],j=typeof t.bufferSize>"u"?4096:t.bufferSize;if(E.indexOf(j)===-1&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(E,null,"	"))),S.createJavaScriptNode)u=S.createJavaScriptNode(j,T,T);else if(S.createScriptProcessor)u=S.createScriptProcessor(j,T,T);else throw"WebAudio API has no support on this browser.";A.connect(u),t.bufferSize||(j=u.bufferSize);var c=typeof t.sampleRate<"u"?t.sampleRate:S.sampleRate||44100;(c<22050||c>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var x=!1;this.pause=function(){x=!0},this.resume=function(){if(w()===!1)throw"Please make sure MediaStream is active.";if(!m){t.disableLogs||console.log("Seems recording has been restarted."),this.record();return}x=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,m&&this.stop(d),d()};function U(){h=[],v=[],b=0,y=!1,m=!1,x=!1,S=null,o.leftchannel=h,o.rightchannel=v,o.numberOfAudioChannels=T,o.desiredSampRate=C,o.sampleRate=c,o.recordingLength=b,O={left:[],right:[],recordingLength:0}}function d(){u&&(u.onaudioprocess=null,u.disconnect(),u=null),A&&(A.disconnect(),A=null),U()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var y=!1;function B(V){if(!x){if(w()===!1&&(t.disableLogs||console.log("MediaStream seems stopped."),u.disconnect(),m=!1),!m){A&&(A.disconnect(),A=null);return}y||(y=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var Z=V.inputBuffer.getChannelData(0),K=new Float32Array(Z);if(h.push(K),T===2){var le=V.inputBuffer.getChannelData(1),$=new Float32Array(le);v.push($)}b+=j,o.recordingLength=b,typeof t.timeSlice<"u"&&(O.recordingLength+=j,O.left.push(K),T===2&&O.right.push($))}}u.onaudioprocess=B,S.createMediaStreamDestination?u.connect(S.createMediaStreamDestination()):u.connect(S.destination),this.leftchannel=h,this.rightchannel=v,this.numberOfAudioChannels=T,this.desiredSampRate=C,this.sampleRate=c,o.recordingLength=b;var O={left:[],right:[],recordingLength:0};function q(){!m||typeof t.ondataavailable!="function"||typeof t.timeSlice>"u"||(O.left.length?(k({desiredSampRate:C,sampleRate:c,numberOfAudioChannels:T,internalInterleavedLength:O.recordingLength,leftBuffers:O.left,rightBuffers:T===1?[]:O.right},function(V,Z){var K=new Blob([Z],{type:"audio/wav"});t.ondataavailable(K),setTimeout(q,t.timeSlice)}),O={left:[],right:[],recordingLength:0}):setTimeout(q,t.timeSlice))}}typeof M<"u"&&(M.StereoAudioRecorder=ve);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function _e(a,t){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";t=t||{},t.frameInterval||(t.frameInterval=10);var o=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(E){E in document.createElement("canvas")&&(o=!0)});var h=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,v=50,m=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);h&&m&&m[2]&&(v=parseInt(m[2],10)),h&&v<52&&(o=!1),t.useWhammyRecorder&&(o=!1);var b,u;if(o)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),a instanceof HTMLCanvasElement)b=a;else if(a instanceof CanvasRenderingContext2D)b=a.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var T;this.record=function(){if(T=!0,o&&!t.useWhammyRecorder){var E;"captureStream"in b?E=b.captureStream(25):"mozCaptureStream"in b?E=b.mozCaptureStream(25):"webkitCaptureStream"in b&&(E=b.webkitCaptureStream(25));try{var j=new g;j.addTrack(G(E,"video")[0]),E=j}catch{}if(!E)throw"captureStream API are NOT available.";u=new H(E,{mimeType:t.mimeType||"video/webm"}),u.record()}else A.frames=[],S=new Date().getTime(),R();t.initCallback&&t.initCallback()},this.getWebPImages=function(E){if(a.nodeName.toLowerCase()!=="canvas"){E();return}var j=A.frames.length;A.frames.forEach(function(c,x){var U=j-x;t.disableLogs||console.log(U+"/"+j+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(U,j);var d=c.image.toDataURL("image/webp",1);A.frames[x].image=d}),t.disableLogs||console.log("Generating WebM"),E()},this.stop=function(E){T=!1;var j=this;if(o&&u){u.stop(E);return}this.getWebPImages(function(){A.compile(function(c){t.disableLogs||console.log("Recording finished!"),j.blob=c,j.blob.forEach&&(j.blob=new Blob([],{type:"video/webm"})),E&&E(j.blob),A.frames=[]})})};var C=!1;this.pause=function(){if(C=!0,u instanceof H){u.pause();return}},this.resume=function(){if(C=!1,u instanceof H){u.resume();return}T||this.record()},this.clearRecordedData=function(){T&&this.stop(w),w()};function w(){A.frames=[],T=!1,C=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function k(){var E=document.createElement("canvas"),j=E.getContext("2d");return E.width=a.width,E.height=a.height,j.drawImage(a,0,0),E}function R(){if(C)return S=new Date().getTime(),setTimeout(R,500);if(a.nodeName.toLowerCase()==="canvas"){var E=new Date().getTime()-S;S=new Date().getTime(),A.frames.push({image:k(),duration:E}),T&&setTimeout(R,t.frameInterval);return}html2canvas(a,{grabMouse:typeof t.showMousePointer>"u"||t.showMousePointer,onrendered:function(j){var c=new Date().getTime()-S;if(!c)return setTimeout(R,t.frameInterval);S=new Date().getTime(),A.frames.push({image:j.toDataURL("image/webp",1),duration:c}),T&&setTimeout(R,t.frameInterval)}})}var S=new Date().getTime(),A=new be.Video(100)}typeof M<"u"&&(M.CanvasRecorder=_e);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function ye(a,t){t=t||{},t.frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),T.width=t.canvas.width||320,T.height=t.canvas.height||240,C=T.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(w=t.video.cloneNode(),t.initCallback&&t.initCallback()):(w=document.createElement("video"),re(a,w),w.onloadedmetadata=function(){t.initCallback&&t.initCallback()},w.width=t.video.width,w.height=t.video.height),w.muted=!0,w.play(),k=new Date().getTime(),R=new be.Video,t.disableLogs||(console.log("canvas resolutions",T.width,"*",T.height),console.log("video width/height",w.width||T.width,"*",w.height||T.height)),o(t.frameInterval)};function o(S){S=typeof S<"u"?S:10;var A=new Date().getTime()-k;if(!A)return setTimeout(o,S,S);if(b)return k=new Date().getTime(),setTimeout(o,100);k=new Date().getTime(),w.paused&&w.play(),C.drawImage(w,0,0,T.width,T.height),R.frames.push({duration:A,image:T.toDataURL("image/webp")}),m||setTimeout(o,S,S)}function h(S){var A=-1,E=S.length;(function j(){if(A++,A===E){S.callback();return}setTimeout(function(){S.functionToLoop(j,A)},1)})()}function v(S,A,E,j,c){var x=document.createElement("canvas");x.width=T.width,x.height=T.height;var U=x.getContext("2d"),d=[],y=S.length,B={r:0,g:0,b:0},O=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),q=0,V=0,Z=!1;h({length:y,functionToLoop:function(K,le){var $,Re,ue,te=function(){!Z&&ue-$<=ue*V||(Z=!0,d.push(S[le])),K()};if(Z)te();else{var ce=new Image;ce.onload=function(){U.drawImage(ce,0,0,T.width,T.height);var ne=U.getImageData(0,0,T.width,T.height);$=0,Re=ne.data.length,ue=ne.data.length/4;for(var pe=0;pe<Re;pe+=4){var de={r:ne.data[pe],g:ne.data[pe+1],b:ne.data[pe+2]},Se=Math.sqrt(Math.pow(de.r-B.r,2)+Math.pow(de.g-B.g,2)+Math.pow(de.b-B.b,2));Se<=O*q&&$++}te()},ce.src=S[le].image}},callback:function(){d=d.concat(S.slice(y)),d.length<=0&&d.push(S[S.length-1]),c(d)}})}var m=!1;this.stop=function(S){S=S||function(){},m=!0;var A=this;setTimeout(function(){v(R.frames,-1,null,null,function(E){R.frames=E,t.advertisement&&t.advertisement.length&&(R.frames=t.advertisement.concat(R.frames)),R.compile(function(j){A.blob=j,A.blob.forEach&&(A.blob=new Blob([],{type:"video/webm"})),S&&S(A.blob)})})},10)};var b=!1;this.pause=function(){b=!0},this.resume=function(){b=!1,m&&this.record()},this.clearRecordedData=function(){m||this.stop(u),u()};function u(){R.frames=[],m=!0,b=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var T=document.createElement("canvas"),C=T.getContext("2d"),w,k,R}typeof M<"u"&&(M.WhammyRecorder=ye);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var be=function(){function a(h){this.frames=[],this.duration=h||1,this.quality=.8}a.prototype.add=function(h,v){if("canvas"in h&&(h=h.canvas),"toDataURL"in h&&(h=h.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(h))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:h,duration:v||this.duration})};function t(h){var v=N.createObjectURL(new Blob([h.toString(),"this.onmessage =  function (eee) {"+h.name+"(eee.data);}"],{type:"application/javascript"})),m=new Worker(v);return N.revokeObjectURL(v),m}function o(h){function v(c){var x=b(c);if(!x)return[];for(var U=3e4,d=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:E(x.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:x.width,id:176},{data:x.height,id:186}]}]}]}]}],y=0,B=0;y<c.length;){var O=[],q=0;do O.push(c[y]),q+=c[y].duration,y++;while(y<c.length&&q<U);var V=0,Z={id:524531317,data:m(B,V,O)};d[1].data.push(Z),B+=q}return w(d)}function m(c,x,U){return[{data:c,id:231}].concat(U.map(function(d){var y=k({frame:d.data.slice(4),trackNum:1,timecode:Math.round(x)});return x+=d.duration,{data:y,id:163}}))}function b(c){if(!c[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var x=c[0].width,U=c[0].height,d=c[0].duration,y=1;y<c.length;y++)d+=c[y].duration;return{duration:d,width:x,height:U}}function u(c){for(var x=[];c>0;)x.push(c&255),c=c>>8;return new Uint8Array(x.reverse())}function T(c){return new Uint8Array(c.split("").map(function(x){return x.charCodeAt(0)}))}function C(c){var x=[],U=c.length%8?new Array(9-c.length%8).join("0"):"";c=U+c;for(var d=0;d<c.length;d+=8)x.push(parseInt(c.substr(d,8),2));return new Uint8Array(x)}function w(c){for(var x=[],U=0;U<c.length;U++){var d=c[U].data;typeof d=="object"&&(d=w(d)),typeof d=="number"&&(d=C(d.toString(2))),typeof d=="string"&&(d=T(d));var y=d.size||d.byteLength||d.length,B=Math.ceil(Math.ceil(Math.log(y)/Math.log(2))/8),O=y.toString(2),q=new Array(B*7+7+1-O.length).join("0")+O,V=new Array(B).join("0")+"1"+q;x.push(u(c[U].id)),x.push(C(V)),x.push(d)}return new Blob(x,{type:"video/webm"})}function k(c){var x=0;x|=128;var U=[c.trackNum|128,c.timecode>>8,c.timecode&255,x].map(function(d){return String.fromCharCode(d)}).join("")+c.frame;return U}function R(c){for(var x=c.RIFF[0].WEBP[0],U=x.indexOf("*"),d=0,y=[];d<4;d++)y[d]=x.charCodeAt(U+3+d);var B,O,q;return q=y[1]<<8|y[0],B=q&16383,q=y[3]<<8|y[2],O=q&16383,{width:B,height:O,data:x,riff:c}}function S(c,x){return parseInt(c.substr(x+4,4).split("").map(function(U){var d=U.charCodeAt(0).toString(2);return new Array(8-d.length+1).join("0")+d}).join(""),2)}function A(c){for(var x=0,U={};x<c.length;){var d=c.substr(x,4),y=S(c,x),B=c.substr(x+4+4,y);x+=8+y,U[d]=U[d]||[],d==="RIFF"||d==="LIST"?U[d].push(A(B)):U[d].push(B)}return U}function E(c){return[].slice.call(new Uint8Array(new Float64Array([c]).buffer),0).map(function(x){return String.fromCharCode(x)}).reverse().join("")}var j=new v(h.map(function(c){var x=R(A(atob(c.image.slice(23))));return x.duration=c.duration,x}));postMessage(j)}return a.prototype.compile=function(h){var v=t(o);v.onmessage=function(m){if(m.data.error){console.error(m.data.error);return}h(m.data)},v.postMessage(this.frames)},{Video:a}}();typeof M<"u"&&(M.Whammy=be);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var Q={init:function(){var a=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var t=1,o=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),h,v=indexedDB.open(o,t);function m(u){u.createObjectStore(a.dataStoreName)}function b(){var u=h.transaction([a.dataStoreName],"readwrite");a.videoBlob&&u.objectStore(a.dataStoreName).put(a.videoBlob,"videoBlob"),a.gifBlob&&u.objectStore(a.dataStoreName).put(a.gifBlob,"gifBlob"),a.audioBlob&&u.objectStore(a.dataStoreName).put(a.audioBlob,"audioBlob");function T(C){u.objectStore(a.dataStoreName).get(C).onsuccess=function(w){a.callback&&a.callback(w.target.result,C)}}T("audioBlob"),T("videoBlob"),T("gifBlob")}v.onerror=a.onError,v.onsuccess=function(){if(h=v.result,h.onerror=a.onError,h.setVersion)if(h.version!==t){var u=h.setVersion(t);u.onsuccess=function(){m(h),b()}}else b();else b()},v.onupgradeneeded=function(u){m(u.target.result)}},Fetch:function(a){return this.callback=a,this.init(),this},Store:function(a){return this.audioBlob=a.audioBlob,this.videoBlob=a.videoBlob,this.gifBlob=a.gifBlob,this.init(),this},onError:function(a){console.error(JSON.stringify(a,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof M<"u"&&(M.DiskStorage=Q);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function we(a,t){if(typeof GIFEncoder>"u"){var o=document.createElement("script");o.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(o)}t=t||{};var h=a instanceof CanvasRenderingContext2D||a instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(S.record,1e3);return}if(!T){setTimeout(S.record,1e3);return}h||(t.width||(t.width=C.offsetWidth||320),t.height||(t.height=C.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),b.width=t.canvas.width||320,b.height=t.canvas.height||240,C.width=t.video.width||320,C.height=t.video.height||240),R=new GIFEncoder,R.setRepeat(0),R.setDelay(t.frameRate||200),R.setQuality(t.quality||10),R.start(),typeof t.onGifRecordingStarted=="function"&&t.onGifRecordingStarted();function A(E){if(S.clearedRecordedData!==!0){if(v)return setTimeout(function(){A(E)},100);w=D(A),typeof k===void 0&&(k=E),!(E-k<90)&&(!h&&C.paused&&C.play(),h||u.drawImage(C,0,0,b.width,b.height),t.onGifPreview&&t.onGifPreview(b.toDataURL("image/png")),R.addFrame(u),k=E)}}w=D(A),t.initCallback&&t.initCallback()},this.stop=function(A){A=A||function(){},w&&F(w),this.blob=new Blob([new Uint8Array(R.stream().bin)],{type:"image/gif"}),A(this.blob),R.stream().bin=[]};var v=!1;this.pause=function(){v=!0},this.resume=function(){v=!1},this.clearRecordedData=function(){S.clearedRecordedData=!0,m()};function m(){R&&(R.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var b=document.createElement("canvas"),u=b.getContext("2d");h&&(a instanceof CanvasRenderingContext2D?(u=a,b=u.canvas):a instanceof HTMLCanvasElement&&(u=a.getContext("2d"),b=a));var T=!0;if(!h){var C=document.createElement("video");C.muted=!0,C.autoplay=!0,C.playsInline=!0,T=!1,C.onloadedmetadata=function(){T=!0},re(a,C),C.play()}var w=null,k,R,S=this}typeof M<"u"&&(M.GifRecorder=we);function Ie(a,t){var o="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(d){typeof M<"u"||d&&(typeof window<"u"||typeof z>"u"||(z.navigator={userAgent:o,getUserMedia:function(){}},z.console||(z.console={}),(typeof z.console.log>"u"||typeof z.console.error>"u")&&(z.console.error=z.console.log=z.console.log||function(){console.log(arguments)}),typeof document>"u"&&(d.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var y={getContext:function(){return y},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return y},d.HTMLVideoElement=function(){}),typeof location>"u"&&(d.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(d.screen={width:0,height:0}),typeof C>"u"&&(d.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),d.window=z))})(typeof z<"u"?z:null),t=t||"multi-streams-mixer";var h=[],v=!1,m=document.createElement("canvas"),b=m.getContext("2d");m.style.opacity=0,m.style.position="absolute",m.style.zIndex=-1,m.style.top="-1000em",m.style.left="-1000em",m.className=t,(document.body||document.documentElement).appendChild(m),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var u=this,T=window.AudioContext;typeof T>"u"&&(typeof webkitAudioContext<"u"&&(T=webkitAudioContext),typeof mozAudioContext<"u"&&(T=mozAudioContext));var C=window.URL;typeof C>"u"&&typeof webkitURL<"u"&&(C=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var w=window.MediaStream;typeof w>"u"&&typeof webkitMediaStream<"u"&&(w=webkitMediaStream),typeof w<"u"&&typeof w.prototype.stop>"u"&&(w.prototype.stop=function(){this.getTracks().forEach(function(d){d.stop()})});var k={};typeof T<"u"?k.AudioContext=T:typeof webkitAudioContext<"u"&&(k.AudioContext=webkitAudioContext);function R(d,y){"srcObject"in y?y.srcObject=d:"mozSrcObject"in y?y.mozSrcObject=d:y.srcObject=d}this.startDrawingFrames=function(){S()};function S(){if(!v){var d=h.length,y=!1,B=[];if(h.forEach(function(q){q.stream||(q.stream={}),q.stream.fullcanvas?y=q:B.push(q)}),y)m.width=y.stream.width,m.height=y.stream.height;else if(B.length){m.width=d>1?B[0].width*2:B[0].width;var O=1;(d===3||d===4)&&(O=2),(d===5||d===6)&&(O=3),(d===7||d===8)&&(O=4),(d===9||d===10)&&(O=5),m.height=B[0].height*O}else m.width=u.width||360,m.height=u.height||240;y&&y instanceof HTMLVideoElement&&A(y),B.forEach(function(q,V){A(q,V)}),setTimeout(S,u.frameInterval)}}function A(d,y){if(!v){var B=0,O=0,q=d.width,V=d.height;y===1&&(B=d.width),y===2&&(O=d.height),y===3&&(B=d.width,O=d.height),y===4&&(O=d.height*2),y===5&&(B=d.width,O=d.height*2),y===6&&(O=d.height*3),y===7&&(B=d.width,O=d.height*3),typeof d.stream.left<"u"&&(B=d.stream.left),typeof d.stream.top<"u"&&(O=d.stream.top),typeof d.stream.width<"u"&&(q=d.stream.width),typeof d.stream.height<"u"&&(V=d.stream.height),b.drawImage(d,B,O,q,V),typeof d.stream.onRender=="function"&&d.stream.onRender(b,B,O,q,V,y)}}function E(){v=!1;var d=j(),y=c();return y&&y.getTracks().filter(function(B){return B.kind==="audio"}).forEach(function(B){d.addTrack(B)}),a.forEach(function(B){B.fullcanvas}),d}function j(){U();var d;"captureStream"in m?d=m.captureStream():"mozCaptureStream"in m?d=m.mozCaptureStream():u.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var y=new w;return d.getTracks().filter(function(B){return B.kind==="video"}).forEach(function(B){y.addTrack(B)}),m.stream=y,y}function c(){k.AudioContextConstructor||(k.AudioContextConstructor=new k.AudioContext),u.audioContext=k.AudioContextConstructor,u.audioSources=[],u.useGainNode===!0&&(u.gainNode=u.audioContext.createGain(),u.gainNode.connect(u.audioContext.destination),u.gainNode.gain.value=0);var d=0;if(a.forEach(function(y){if(y.getTracks().filter(function(O){return O.kind==="audio"}).length){d++;var B=u.audioContext.createMediaStreamSource(y);u.useGainNode===!0&&B.connect(u.gainNode),u.audioSources.push(B)}}),!!d)return u.audioDestination=u.audioContext.createMediaStreamDestination(),u.audioSources.forEach(function(y){y.connect(u.audioDestination)}),u.audioDestination.stream}function x(d){var y=document.createElement("video");return R(d,y),y.className=t,y.muted=!0,y.volume=0,y.width=d.width||u.width||360,y.height=d.height||u.height||240,y.play(),y}this.appendStreams=function(d){if(!d)throw"First parameter is required.";d instanceof Array||(d=[d]),d.forEach(function(y){var B=new w;if(y.getTracks().filter(function(V){return V.kind==="video"}).length){var O=x(y);O.stream=y,h.push(O),B.addTrack(y.getTracks().filter(function(V){return V.kind==="video"})[0])}if(y.getTracks().filter(function(V){return V.kind==="audio"}).length){var q=u.audioContext.createMediaStreamSource(y);u.audioDestination=u.audioContext.createMediaStreamDestination(),q.connect(u.audioDestination),B.addTrack(u.audioDestination.stream.getTracks().filter(function(V){return V.kind==="audio"})[0])}a.push(B)})},this.releaseStreams=function(){h=[],v=!0,u.gainNode&&(u.gainNode.disconnect(),u.gainNode=null),u.audioSources.length&&(u.audioSources.forEach(function(d){d.disconnect()}),u.audioSources=[]),u.audioDestination&&(u.audioDestination.disconnect(),u.audioDestination=null),u.audioContext&&u.audioContext.close(),u.audioContext=null,b.clearRect(0,0,m.width,m.height),m.stream&&(m.stream.stop(),m.stream=null)},this.resetVideoStreams=function(d){d&&!(d instanceof Array)&&(d=[d]),U(d)};function U(d){h=[],d=d||a,d.forEach(function(y){if(y.getTracks().filter(function(O){return O.kind==="video"}).length){var B=x(y);B.stream=y,h.push(B)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=E}typeof M>"u"&&(Ae.exports=Ie);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function Fe(a,t){a=a||[];var o=this,h,v;t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},t.frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){h=new Ie(a,t.elementClass||"multi-streams-mixer"),m().length&&(h.frameInterval=t.frameInterval||10,h.width=t.video.width||360,h.height=t.video.height||240,h.startDrawingFrames()),t.previewStream&&typeof t.previewStream=="function"&&t.previewStream(h.getMixedStream()),v=new H(h.getMixedStream(),t),v.record()};function m(){var b=[];return a.forEach(function(u){G(u,"video").forEach(function(T){b.push(T)})}),b}this.stop=function(b){v&&v.stop(function(u){o.blob=u,b(u),o.clearRecordedData()})},this.pause=function(){v&&v.pause()},this.resume=function(){v&&v.resume()},this.clearRecordedData=function(){v&&(v.clearRecordedData(),v=null),h&&(h.releaseStreams(),h=null)},this.addStreams=function(b){if(!b)throw"First parameter is required.";b instanceof Array||(b=[b]),a.concat(b),!(!v||!h)&&(h.appendStreams(b),t.previewStream&&typeof t.previewStream=="function"&&t.previewStream(h.getMixedStream()))},this.resetVideoStreams=function(b){h&&(b&&!(b instanceof Array)&&(b=[b]),h.resetVideoStreams(b))},this.getMixer=function(){return h},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof M<"u"&&(M.MultiStreamRecorder=Fe);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function Ee(a,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof a>"u")throw'First argument "MediaStream" is required.';var o=this;o.recordRTC=new M(a,t),this.startRecording=function(){return new Promise(function(h,v){try{o.recordRTC.startRecording(),h()}catch(m){v(m)}})},this.stopRecording=function(){return new Promise(function(h,v){try{o.recordRTC.stopRecording(function(m){if(o.blob=o.recordRTC.getBlob(),!o.blob||!o.blob.size){v("Empty blob.",o.blob);return}h(m)})}catch(m){v(m)}})},this.pauseRecording=function(){return new Promise(function(h,v){try{o.recordRTC.pauseRecording(),h()}catch(m){v(m)}})},this.resumeRecording=function(){return new Promise(function(h,v){try{o.recordRTC.resumeRecording(),h()}catch(m){v(m)}})},this.getDataURL=function(h){return new Promise(function(v,m){try{o.recordRTC.getDataURL(function(b){v(b)})}catch(b){m(b)}})},this.getBlob=function(){return new Promise(function(h,v){try{h(o.recordRTC.getBlob())}catch(m){v(m)}})},this.getInternalRecorder=function(){return new Promise(function(h,v){try{h(o.recordRTC.getInternalRecorder())}catch(m){v(m)}})},this.reset=function(){return new Promise(function(h,v){try{h(o.recordRTC.reset())}catch(m){v(m)}})},this.destroy=function(){return new Promise(function(h,v){try{h(o.recordRTC.destroy())}catch(m){v(m)}})},this.getState=function(){return new Promise(function(h,v){try{h(o.recordRTC.getState())}catch(m){v(m)}})},this.blob=null,this.version="5.6.2"}typeof M<"u"&&(M.RecordRTCPromisesHandler=Ee);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function Te(a,t){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),t=t||{},t.width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0;var o;function h(){return new ReadableStream({start:function(C){var w=document.createElement("canvas"),k=document.createElement("video"),R=!0;k.srcObject=a,k.muted=!0,k.height=t.height,k.width=t.width,k.volume=0,k.onplaying=function(){w.width=t.width,w.height=t.height;var S=w.getContext("2d"),A=1e3/t.frameRate,E=setInterval(function(){if(o&&(clearInterval(E),C.close()),R&&(R=!1,t.onVideoProcessStarted&&t.onVideoProcessStarted()),S.drawImage(k,0,0),C._controlledReadableStream.state!=="closed")try{C.enqueue(S.getImageData(0,0,t.width,t.height))}catch{}},A)},k.play()}})}var v;function m(C,w){if(!t.workerPath&&!w){o=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(R){R.arrayBuffer().then(function(S){m(C,S)})});return}if(!t.workerPath&&w instanceof ArrayBuffer){var k=new Blob([w],{type:"text/javascript"});t.workerPath=N.createObjectURL(k)}t.workerPath||console.error("workerPath parameter is missing."),v=new Worker(t.workerPath),v.postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),v.addEventListener("message",function(R){R.data==="READY"?(v.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),h().pipeTo(new WritableStream({write:function(S){if(o){console.error("Got image, but recorder is finished!");return}v.postMessage(S.data.buffer,[S.data.buffer])}}))):R.data&&(b||T.push(R.data))})}this.record=function(){T=[],b=!1,this.blob=null,m(a),typeof t.initCallback=="function"&&t.initCallback()};var b;this.pause=function(){b=!0},this.resume=function(){b=!1};function u(C){if(!v){C&&C();return}v.addEventListener("message",function(w){w.data===null&&(v.terminate(),v=null,C&&C())}),v.postMessage(null)}var T=[];this.stop=function(C){o=!0;var w=this;u(function(){w.blob=new Blob(T,{type:"video/webm"}),C(w.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){T=[],b=!1,this.blob=null},this.blob=null}typeof M<"u"&&(M.WebAssemblyRecorder=Te)})(Ue);var $e=Ue.exports;const Qe=ze($e);export{Qe as R,Xe as h};
