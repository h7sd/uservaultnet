const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatLauncher-D_3-fz5N.js","assets/global.properties-DKM1fd6s.js","assets/editor-CpZ7vO5P.js","assets/media-D4ZD3EDk.js","assets/vendor-20TtR0Rd.js","assets/index-ciglwFMH.js","assets/AvatarMedium-Dt88Ycme.js","assets/application-DEz9sPnz.js","assets/inbox.store-CHx7CB4w.js","assets/ui-Bp8YvxdW.js"])))=>i.map(i=>d[i]);
import{_ as f,a as V,d as M}from"./global.properties-DKM1fd6s.js";import{k as w,p as g,e as s,d as n,c as u,s as o,F as k,f as A,i as r,y as E,v as _,t as i,q as b,r as T,b as L,l as m,x as C,j as z,o as B,D as S,Q as F,B as N,H as j}from"./vendor-20TtR0Rd.js";import{u as x}from"./market.store-Dx0xlhSP.js";import{P as q}from"./PageHeader-DKtQQhA9.js";import{A as G,T as Q,S as J}from"./AdGridItem-Caaf0ZJU.js";import{F as K}from"./FollowRecommendationList-UjQQknis.js";import{r as U}from"./swiper-element-bundle-DBu82uhE.js";import{e as W,P as X,f as Y,u as Z,g as tt}from"./application-DEz9sPnz.js";import{V as et}from"./ViewsCounter-DDf6U7Tj.js";import{c as ot}from"./index-DyH4rDzV.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./inbox.store-CHx7CB4w.js";import"./index-ciglwFMH.js";import"./ui-Bp8YvxdW.js";const at=w({components:{PageHeader:q}});function st(t,a,e,d,p,v){const l=s("PageHeader");return n(),g(l,{hasBack:!0,titleText:t.$t("market.product_title")},null,8,["titleText"])}const rt=f(at,[["render",st]]),nt=w({props:{productData:{type:Object,required:!0}},emits:["ask"],setup(t){U();const a=Z(),e=T(t.productData),d=e.value.relations.merchant.is_store,p=x(),v=L({isSubmitting:!1}),l=m(()=>e.value.relations.merchant);return{state:v,slidesPerView:m(()=>e.value.relations.media.length==1?1:e.value.relations.media.length==2?2:2.4),bookmarkProduct:async function(){v.isSubmitting=!0,await p.bookmarkProduct(e.value.id).then(c=>{c.data.data.bookmarked?(e.value.meta.activity.bookmarked=!0,toastSuccess(__t("toast.product.product_bookmarked"))):(e.value.meta.activity.bookmarked=!1,toastSuccess(__t("toast.product.product_unbookmarked")))}).catch(c=>{c.response&&alert(c.response.data.message)}),v.isSubmitting=!1},productData:e,isStore:d,price:m(()=>e.value.sale_price?e.value.sale_price.formatted:e.value.price.formatted),hasBookmarked:m(()=>e.value.meta.activity.bookmarked),merchantRoute:m(()=>({name:d?"market_store_page":"profile_index",params:{id:e.value.relations.merchant.username}})),merchantData:l,productMedia:m(()=>e.value.relations.media.length?e.value.relations.media:[{source_url:e.value.preview_image_url}]),lightboxImages:function(){a.add({albumName:`${l.value.name} ${l.value.caption}`,images:e.value.relations.media.map(c=>c.source_url),date:e.value.date.iso})}}},components:{PrimaryPillButton:Y,PrimaryIconButton:X,AvatarRightSided:W,ViewsCounter:et}}),it={class:"border-b border-bord-pr"},dt={class:"overflow-hidden relative group bg-fill-tr"},lt=["slides-per-view"],ct=["src"],ut={class:"p-4"},pt={class:"flex justify-between items-center mb-2"},mt={class:"shrink-0"},vt={class:"shrink-0"},_t={class:"mb-2"},ht=["innerHTML"],bt={class:"mb-1"},kt={class:"leading-tight flex gap-2 items-center"},ft={class:"text-title-3 text-lab-pr font-bold"},$t={key:0,class:"text-cap-l text-lab-sc line-through"},gt={class:"mb-3"},wt={class:"text-par-n text-lab-sc cursor-pointer"},Pt={class:"flex gap-3 leading-none"},yt={class:"shrink-0 self-end ml-auto"};function Dt(t,a,e,d,p,v){const l=s("AvatarRightSided"),c=s("PrimaryIconButton"),$=s("PrimaryPillButton"),P=s("RouterLink"),y=s("ViewsCounter");return n(),u(k,null,[o("div",it,[o("div",dt,[o("swiper-container",{"slides-per-view":t.slidesPerView,"space-between":"1",mousewheel:"true"},[(n(!0),u(k,null,A(t.productMedia,h=>(n(),u("swiper-slide",{key:h.id},[o("div",{onClick:a[0]||(a[0]=(...D)=>t.lightboxImages&&t.lightboxImages(...D)),class:"cursor-pointer overflow-hidden"},[o("img",{class:"w-full hover:scale-105 smoothing",src:h.source_url,alt:"Image"},null,8,ct)])]))),128))],8,lt)])]),o("div",ut,[o("div",pt,[o("div",mt,[r(l,{name:t.merchantData.name,verified:t.merchantData.verified,avatarSrc:t.merchantData.avatar_url,linkRoute:t.merchantRoute,caption:t.merchantData.caption},null,8,["name","verified","avatarSrc","linkRoute","caption"])]),o("div",vt,[r(c,{onClick:E(t.bookmarkProduct,["prevent"]),iconName:"bookmark",hoverText:"hover:text-brand-900",iconSize:"icon-normal",buttonColor:t.hasBookmarked?"text-brand-900":"text-lab-pr2",iconType:t.hasBookmarked?"solid":"line"},null,8,["onClick","buttonColor","iconType"])])]),o("div",_t,[o("h4",{class:"text-title-3 text-lab-pr2 leading-snug font-medium max-w-11/12",innerHTML:t.productData.title},null,8,ht)]),o("div",bt,[o("span",kt,[o("span",ft,i(t.price),1),t.productData.sale_price?(n(),u("span",$t,i(t.productData.price.formatted),1)):_("",!0)])]),o("div",gt,[o("span",wt,i(t.productData.category_name)+", "+i(t.$t("market.in_stock"))+" Â· "+i(t.productData.date.time_ago),1)]),o("div",Pt,[t.productData.meta.is_owner?_("",!0):(n(),g($,{key:0,onClick:a[1]||(a[1]=h=>t.$emit("ask")),buttonSize:"lm",buttonText:t.$t("market.ask_seller")},null,8,["buttonText"])),r(P,{to:t.merchantRoute},{default:b(()=>[r($,{buttonRole:"stroked",buttonSize:"lm",buttonText:t.isStore?t.$t("market.view_store"):t.$t("labels.view_profile")},null,8,["buttonText"])]),_:1},8,["to"]),o("div",yt,[r(y,{counterValue:t.productData.views_count.formatted},null,8,["counterValue"])])])])],64)}const Ct=f(nt,[["render",Dt]]),St=w({props:{productData:{type:Object,required:!0}},setup(t){const a=T(t.productData),e=T(null),d=L({textExpanded:!1,textOverflow:!1});return B(()=>{d.textOverflow=ot(e.value,12)}),{state:d,productData:a,productDescriptionHolder:e}},components:{PrimaryTextButton:tt}}),Tt={class:"block p-4"},Lt={class:"text-title-3 text-lab-pr2 font-semibold mb-4"},Bt={class:"text-par-m text-lab-pr2"},xt={class:"mb-3 flex flex-col gap-2 text-lab-sc"},Rt={class:"text-par-s"},Ht={class:"font-semibold text-lab-pr2"},It={class:"text-par-s"},Ot={class:"font-semibold text-lab-pr2"},Vt={key:0,class:"text-par-s"},Mt={class:"font-semibold text-lab-pr2"},At={class:"block break-words"},Et=["innerHTML"],zt={key:0,class:"block mt-2"};function Ft(t,a,e,d,p,v){const l=s("PrimaryTextButton");return n(),u("div",Tt,[o("h3",Lt,i(t.$t("labels.description")),1),o("div",Bt,[o("ul",xt,[o("li",Rt,[o("span",Ht,i(t.$t("labels.condition"))+":",1),C(" "+i(t.productData.condition),1)]),o("li",It,[o("span",Ot,i(t.$t("labels.published_at"))+":",1),C(" "+i(t.productData.date.iso),1)]),t.productData.address?(n(),u("li",Vt,[o("span",Mt,i(t.$t("labels.address"))+":",1),C(" "+i(t.productData.address),1)])):_("",!0)]),o("div",At,[o("p",{ref:"productDescriptionHolder",class:z([t.state.textExpanded?"":"line-clamp-[12]"]),innerHTML:t.$mdInline(t.productData.description)},null,10,Et)]),t.state.textOverflow?(n(),u("div",zt,[r(l,{onClick:a[0]||(a[0]=c=>t.state.textExpanded=!t.state.textExpanded),buttonRole:"marginal",buttonText:t.state.textExpanded?t.$t("labels.see_less_description"):t.$t("labels.see_full_description")},null,8,["buttonText"])])):_("",!0)])])}const Nt=f(St,[["render",Ft]]),jt={},qt={class:"block"};function Gt(t,a){const e=s("Border");return n(),u("div",qt,[a[0]||(a[0]=S('<div class="p-4"><div class="flex justify-between items-center mb-4"><div class="inline-flex items-center gap-2"><div class="skeleton-circle size-small-avatar"></div><div class="skeleton h-4 w-16"></div></div><div class="skeleton-circle size-icon-normal"></div></div><div class="block"><div class="h-52 skeleton-rounded"></div></div></div>',1)),r(e),a[1]||(a[1]=S('<div class="p-4"><div class="block mb-4"><div class="skeleton h-4 w-20 mb-2"></div><div class="skeleton h-4 w-8/12"></div></div><div class="flex gap-3"><div class="skeleton-circle h-9 w-20"></div><div class="skeleton-circle h-9 w-24"></div></div></div>',1)),r(e),a[2]||(a[2]=S('<div class="block p-4"><div class="skeleton h-4 w-20 mb-2"></div><div class="skeleton h-4 w-8/12 mb-2"></div><div class="skeleton h-4 w-6/12 mb-2"></div><div class="skeleton h-4 w-4/12"></div></div>',1))])}const Qt=f(jt,[["render",Gt]]),Jt=w({props:{product_id:{type:String,required:!0}},setup:function(t){const a=L({isLoading:!0,chatMenu:M()}),e=x(),d=j(),p=m(()=>e.product);return B(async()=>{await e.fetchProduct(t.product_id),p.value||d.push({name:"error_404"}),a.isLoading=!1}),{state:a,productData:p,chatLauncherPayload:m(()=>({type:"product",id:p.value.id}))}},components:{ProductHeader:rt,SidedContentLayout:J,TimelineContainer:Q,FollowRecommendationList:K,AdGridItem:G,ProductOverviewCard:Ct,ProductDescriptionCard:Nt,ProductOverviewSkeleton:Qt,ChatLauncher:N(function(){return V(()=>import("./ChatLauncher-D_3-fz5N.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))})}}),Kt={class:"sticky top-0 popup-background-tr z-10 border-b border-bord-pr"};function Ut(t,a,e,d,p,v){const l=s("ProductHeader"),c=s("ProductOverviewSkeleton"),$=s("ProductOverviewCard"),P=s("Border"),y=s("ProductDescriptionCard"),h=s("TimelineContainer"),D=s("FollowRecommendationList"),R=s("AdGridItem"),H=s("SidedContentLayout"),I=s("ChatLauncher"),O=s("PrimaryTransition");return n(),u(k,null,[r(H,null,{content:b(()=>[r(h,null,{default:b(()=>[o("div",Kt,[r(l)]),t.state.isLoading?(n(),g(c,{key:0})):(n(),u(k,{key:1},[r($,{onAsk:t.state.chatMenu.open,productData:t.productData},null,8,["onAsk","productData"]),r(P),r(y,{productData:t.productData},null,8,["productData"])],64))]),_:1})]),sidebar:b(()=>[r(D),r(R)]),_:1}),t.state.isLoading?_("",!0):(n(),u(k,{key:0},[t.state.chatMenu.status?(n(),g(F,{key:0,to:"body"},[r(O,null,{default:b(()=>[r(I,{userId:t.productData.relations.merchant.id,payload:t.chatLauncherPayload,onClose:t.state.chatMenu.close},null,8,["userId","payload","onClose"])]),_:1})])):_("",!0)],64))],64)}const ue=f(Jt,[["render",Ut]]);export{ue as default};
