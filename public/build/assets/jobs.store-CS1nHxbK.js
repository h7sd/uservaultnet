import{k as a,l as s}from"./global.properties-ieI6Xwik.js";const n=a("jobs",{state:()=>({categories:[],jobs:[],filter:{},job:null,metadata:{},bookmarkedJobs:[]}),getters:{activeFiltersCount:function(){let t=0;return this.filter.category_id&&t++,this.filter.query&&t++,t}},actions:{fetchCategories:async function(){this.categories.length||await s().jobs().getFrom("categories").then(t=>{this.categories=t.data.data}).catch(t=>{t.response&&console.error(t.response.data.message)})},getLastJobId:function(){return this.jobs.length?this.jobs[this.jobs.length-1].id:null},loadMoreJobs:async function(){return await this.makeLoadRequest().then(t=>{let e=t.data.data;return e.length?(this.jobs=this.jobs.concat(e),!0):!1}).catch(t=>!1)},makeLoadRequest:async function(){return await s().jobs().with({filter:this.filter}).sendTo("jobs")},fetchJobs:async function(){await this.makeLoadRequest().then(t=>{this.jobs=t.data.data}).catch(t=>{this.jobs=[]})},fetchJob:async function(t){if(this.job&&this.job.id==t)return!1;await s().jobs().getFrom(`jobs/${t}`).then(e=>{this.job=e.data.data,this.jobs.find(o=>o.hash_id==this.job.hash_id)||this.jobs.unshift(this.job)}).catch(e=>{this.job=null})},bookmarkJob:async function(t){return await s().jobs().with({id:t}).sendTo("bookmarks/add")},resetFilter:function(){this.filter={}}}});export{n as u};
