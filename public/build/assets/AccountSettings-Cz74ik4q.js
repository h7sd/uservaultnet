import{_ as T,d as V,r as d,c as u,o as l,m as y,j as s,t as p,f as I,a,w as c,F as E,i as L,e as R,q as _,I as w,p as b,u as P,g as B,h as O,l as k}from"./global.properties-ieI6Xwik.js";import{b as M,P as F,c as G}from"./application-B35z453N.js";import{S as U}from"./SettingsDesc-DEUPbs60.js";import{T as C}from"./TextInput-B4zdhJy8.js";import{O as A,h as N}from"./radio-group-CeU3FEIT.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./swiper-element-bundle-DBu82uhE.js";import"./form-C7kFQr8W.js";const j=V({props:{hasLabel:{type:Boolean,default:!0},hasFeedback:{type:Boolean,default:!0},labelText:{type:String,default:""},classes:{type:String,default:""},name:{type:String,default:""},modelValue:{type:String,default:""},options:{type:Array,default:[]}},emits:["update:modelValue"],components:{RadioGroup:N,RadioGroupOption:A},setup:function(e,t){const n=_(e.modelValue);return w(n,r=>{t.emit("update:modelValue",r)}),{selectedOption:n}}}),z={class:"block"},H={key:0,class:"mb-1 font-medium block text-lab-pr text-par-m"},q={key:1,class:"block mb-3"},x={key:0,class:"inline-flex"},J={class:"text-par-s text-lab-tr"},K={class:"block"},Q={class:"truncate flex items-center gap-2 cursor-pointer text-par-m text-lab-pr2"},W={class:"flex-1"},X={key:0,class:"size-icon-normal shrink-0 text-lab-pr2"},Y={key:1,class:"size-icon-normal shrink-0 text-lab-sc"};function Z(e,t,n,r,h,i){const m=d("SvgIcon"),v=d("RadioGroupOption"),f=d("RadioGroup");return l(),u("div",z,[e.hasLabel?(l(),u("label",H,p(e.labelText),1)):y("",!0),e.hasFeedback?(l(),u("div",q,[e.$slots.feedbackInfo?(l(),u("span",x,[s("span",J,[I(e.$slots,"feedbackInfo")])])):y("",!0)])):y("",!0),s("div",K,[a(f,{modelValue:e.selectedOption,"onUpdate:modelValue":t[0]||(t[0]=g=>e.selectedOption=g),class:"flex flex-col gap-4"},{default:c(()=>[(l(!0),u(E,null,L(e.options,g=>(l(),R(v,{key:g.value,value:g.value},{default:c(({checked:$})=>[s("span",Q,[s("span",W,p(g.label),1),$?(l(),u("span",X,[a(m,{name:"circle-radio",type:"solid"})])):(l(),u("span",Y,[a(m,{name:"circle",type:"line"})]))])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])}const ee=T(j,[["render",Z]]),te=V({setup:function(){const e=_({}),t=G(),n=B({isLoading:!0,isSubmitting:!1,formErrors:{username:[],caption:[],first_name:[],last_name:[],bio:[],website:[],gender:[]}}),r=_({}),h=_([{value:"male",label:__t("settings.forms.account_settings.gender_male"),isChecked:r.value.gender=="male"},{value:"female",label:__t("settings.forms.account_settings.gender_female"),isChecked:r.value.gender=="female"},{value:"not-specified",label:__t("settings.forms.account_settings.gender_not_specified"),isChecked:r.value.gender=="not-specified"}]);return O(async()=>{await k().userSettings().getFrom("account/settings").then(i=>{let m=i.data.data;r.value=m.user_data,e.value=m.validation_rules}),n.isLoading=!1}),{state:n,validationRules:e,formData:r,userGenderOptions:h,submitForm:async()=>{n.isSubmitting===!1&&(n.isSubmitting=!0,Object.keys(n.formErrors).forEach(i=>{n.formErrors[i]=[]}),await k().userSettings().with(r.value).putTo("account/update").then(i=>{t.setProperty("first_name",r.value.first_name),t.setProperty("last_name",r.value.last_name),t.setProperty("username",r.value.username),toastSuccess(__t("toast.forms.changes_saved"))}).catch(i=>{i.response&&(toastError(i.response.data.message),i.response.data.errors&&Object.keys(i.response.data.errors).forEach(m=>{n.formErrors[m]=i.response.data.errors[m]}))}),n.isSubmitting=!1)}}},components:{RadioInput:ee,PrimaryPillButton:F,TextInput:C,SettingsDesc:U,Toolbar:M}}),se={key:0},oe={class:"px-4"},ae={class:"mb-6"},ne={class:"block font-semibold"},re={class:"mb-6"},ie=["innerHTML"],le={class:"mb-6"},me={class:"mb-6"},de={class:"mb-6"},ue={class:"mb-6"},pe={class:"mb-4"},ce={class:"px-4"},fe={class:"mb-6"},ge={class:"px-4 pb-4"},be={key:1,class:"block"},_e={class:"flex-center h-96"};function he(e,t,n,r,h,i){const m=d("Toolbar"),v=d("SettingsDesc"),f=d("TextInput"),g=d("Border"),$=d("RadioInput"),S=d("PrimaryPillButton"),D=d("PrimarySpinAnimation");return l(),u(E,null,[a(m,{onClose:t[0]||(t[0]=o=>e.$router.back()),title:e.$t("settings.your_account")},null,8,["title"]),e.state.isLoading?(l(),u("div",be,[s("div",_e,[a(D)])])):(l(),u("div",se,[a(v,{text:e.$t("settings.forms.account_settings.page_desc")},null,8,["text"]),s("form",{onSubmit:t[8]||(t[8]=P((...o)=>e.submitForm&&e.submitForm(...o),["prevent"]))},[s("div",oe,[s("div",ae,[a(f,{modelValue:e.formData.username,"onUpdate:modelValue":t[1]||(t[1]=o=>e.formData.username=o),modelModifiers:{trim:!0},textLength:e.validationRules.username.max,inputErrors:e.state.formErrors.username,labelText:e.$t("settings.forms.account_settings.username"),placeholder:e.$t("settings.forms.account_settings.username_placeholder")},{feedbackInfo:c(()=>[s("span",ne,p(e.$baseUrl("@"+e.formData.username)),1),b(" "+p(e.$t("settings.forms.account_settings.username_helper")),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",re,[a(f,{modelValue:e.formData.caption,"onUpdate:modelValue":t[2]||(t[2]=o=>e.formData.caption=o),modelModifiers:{trim:!0},textLength:e.validationRules.caption.max,inputErrors:e.state.formErrors.caption,labelText:e.$t("settings.forms.account_settings.caption"),placeholder:e.$t("settings.forms.account_settings.caption_placeholder")},{feedbackInfo:c(()=>[s("span",{innerHTML:e.$t("settings.forms.account_settings.caption_helper")},null,8,ie)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",le,[a(f,{modelValue:e.formData.first_name,"onUpdate:modelValue":t[3]||(t[3]=o=>e.formData.first_name=o),modelModifiers:{trim:!0},textLength:e.validationRules.first_name.max,inputErrors:e.state.formErrors.first_name,labelText:e.$t("settings.forms.account_settings.name"),placeholder:e.$t("settings.forms.account_settings.name_placeholder")},{feedbackInfo:c(()=>[b(p(e.$t("settings.forms.account_settings.name_helper",{days:10})),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",me,[a(f,{modelValue:e.formData.last_name,"onUpdate:modelValue":t[4]||(t[4]=o=>e.formData.last_name=o),modelModifiers:{trim:!0},textLength:e.validationRules.last_name.max,inputErrors:e.state.formErrors.last_name,labelText:e.$t("settings.forms.account_settings.surname"),placeholder:e.$t("settings.forms.account_settings.surname_placeholder")},{feedbackInfo:c(()=>[b(p(e.$t("settings.forms.account_settings.surname_helper")),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",de,[a(f,{modelValue:e.formData.bio,"onUpdate:modelValue":t[5]||(t[5]=o=>e.formData.bio=o),modelModifiers:{trim:!0},textLength:e.validationRules.bio.max,asText:!0,inputErrors:e.state.formErrors.bio,labelText:e.$t("settings.forms.account_settings.bio"),placeholder:e.$t("settings.forms.account_settings.bio_placeholder")},{feedbackInfo:c(()=>[b(p(e.$t("settings.forms.account_settings.bio_helper")),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])]),s("div",ue,[a(f,{modelValue:e.formData.website,"onUpdate:modelValue":t[6]||(t[6]=o=>e.formData.website=o),modelModifiers:{trim:!0},textLength:e.validationRules.website.max,inputErrors:e.state.formErrors.website,labelText:e.$t("settings.forms.account_settings.website"),inputType:"text",placeholder:e.$t("settings.forms.account_settings.website_placeholder")},{feedbackInfo:c(()=>[b(p(e.$t("settings.forms.account_settings.website_helper")),1)]),_:1},8,["modelValue","textLength","inputErrors","labelText","placeholder"])])]),s("div",pe,[a(g,{height:"h-2",opacity:"opacity-70"})]),s("div",ce,[s("div",fe,[a($,{modelValue:e.formData.gender,"onUpdate:modelValue":t[7]||(t[7]=o=>e.formData.gender=o),options:e.userGenderOptions,inputErrors:e.state.formErrors.gender,labelText:e.$t("settings.forms.account_settings.gender")},{feedbackInfo:c(()=>[b(p(e.$t("settings.forms.account_settings.gender_helper")),1)]),_:1},8,["modelValue","options","inputErrors","labelText"])])]),s("div",ge,[a(S,{buttonFluid:!0,loading:e.state.isSubmitting,buttonType:"submit",buttonText:e.$t("labels.save_changes")},null,8,["loading","buttonText"])])],32)]))],64)}const De=T(te,[["render",he]]);export{De as default};
