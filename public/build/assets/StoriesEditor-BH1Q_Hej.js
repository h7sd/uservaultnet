const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VideoDurationTime-CY2-hNg2.js","assets/global.properties-ieI6Xwik.js","assets/_commonjsHelpers-Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{_ as v,c as d,o as c,j as e,t as u,d as T,r as n,a as s,m as h,v as x,K as $,u as D,n as I,y as V,z as M,q as f,H as P,g as k,h as E,b as p}from"./global.properties-ieI6Xwik.js";import{u as F}from"./index-CaocF3Et.js";import{b as w,P as B,h as C}from"./application-B35z453N.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./swiper-element-bundle-DBu82uhE.js";const H={},z={class:"block px-4 py-4"},j={class:"text-lab-pr2 text-par-m mb-1 font-bold"},N={class:"text-lab-sc text-par-n"};function R(t,o){return c(),d("div",z,[e("h5",j,u(t.$t("story.story_privacy_alert.title")),1),e("p",N,u(t.$t("story.story_privacy_alert.desc",{app_name:t.$embedder("config.app.name")})),1)])}const A=v(H,[["render",R]]),q=T({setup:function(){const t=C(),o=f(null),l=P(),r=k({isSubmitting:!1}),{autoResize:y}=F(),_=f(t.storyData),m=()=>{try{t.deleteMedia()}catch(a){toastError(a.message)}};return E(()=>{t.storyMedia||l.push({name:"home_index"})}),{state:r,storyMedia:p(()=>t.storyMedia),isVideo:p(()=>t.storyMedia.type==="video"),isFormValid:p(()=>t.isFormValid),storyData:_,storyTextInputField:o,submitForm:async()=>{try{r.isSubmitting=!0,await t.publishStory(),r.isSubmitting=!1,toastSuccess(__t("toast.story.story_published")),t.resetEditor(),l.push({name:"home_index"})}catch(a){r.isSubmitting=!1,toastError(a.message)}},textInputHandler:()=>{y(o.value)},leaveEditor:()=>{m(),l.push({name:"home_index"})}}},components:{PrimaryTextButton:B,StoryPrivacyInfo:A,VideoDurationTime:V(()=>M(()=>import("./VideoDurationTime-CY2-hNg2.js"),__vite__mapDeps([0,1,2]))),Toolbar:w}}),K={class:"shrink-0"},L={class:"pb-4 flex justify-center"},O={class:"w-6/12"},U={key:0,class:"bg-black h-full rounded-md overflow-hidden"},G={class:"h-full flex items-center"},J=["src"],Q={key:0,class:"absolute bottom-4 right-4"},W={class:"block"},X={class:"block"},Y=["placeholder"],Z={class:"flex items-center px-4 py-2"},tt={class:"shrink-0"},et={class:"text-lab-sc text-cap-l"},ot={class:"p-4"};function st(t,o,l,r,y,_){const m=n("Toolbar"),a=n("VideoDurationTime"),b=n("Border"),g=n("StoryPrivacyInfo"),S=n("PrimaryTextButton");return c(),d("div",{class:I({"pb-safe-bottom":t.$isStandalone()})},[e("div",K,[s(m,{title:t.$t("labels.new_story"),onClose:t.leaveEditor},null,8,["title","onClose"])]),e("form",{onSubmit:o[2]||(o[2]=D((...i)=>t.submitForm&&t.submitForm(...i),["prevent"]))},[e("div",L,[e("div",O,[t.storyMedia?(c(),d("div",U,[e("div",G,[e("img",{class:"w-full object-cover",src:t.storyMedia.source_url,alt:"Image"},null,8,J),t.isVideo?(c(),d("div",Q,[s(a,{videoDuration:t.storyMedia.duration},null,8,["videoDuration"])])):h("",!0)])])):h("",!0)])]),s(b,{height:"h-3",opacity:"opacity-70"}),e("div",W,[e("div",X,[x(e("textarea",{onInput:o[0]||(o[0]=(...i)=>t.textInputHandler&&t.textInputHandler(...i)),"onUpdate:modelValue":o[1]||(o[1]=i=>t.storyData.content=i),ref:"storyTextInputField",class:"resize-none bg-transparent block min-h-24 w-full max-h-60 overflow-y-auto outline-hidden px-4 py-4 placeholder:text-par-m text-lab-pr text-par-m placeholder:text-lab-sc",placeholder:t.$t("story.editor.add_caption")},null,40,Y),[[$,t.storyData.content]])]),e("div",Z,[e("div",tt,[e("span",et,u(t.storyData.content.length)+"/"+u(1200),1)])])]),s(b),s(g),e("div",ot,[s(S,{buttonFluid:!0,disabled:!t.isFormValid,loading:t.state.isSubmitting,buttonText:t.$t("story.editor.publish_story"),type:"submit"},null,8,["disabled","loading","buttonText"])])],32)],2)}const dt=v(q,[["render",st]]);export{dt as default};
