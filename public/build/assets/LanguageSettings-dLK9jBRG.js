import{k,e as i,c as l,d as n,v as m,i as u,t as g,q as f,s as a,z as T,K as B,F as x,f as I,p as F,j as O,h as C,r as h,l as w,w as D,x as z,y as M,b as N,o as U}from"./vendor-20TtR0Rd.js";import{_ as L,c as S}from"./global.properties-DKM1fd6s.js";import{b as j}from"./application-C3zsOS77.js";import{S as A}from"./SettingsDesc-BsK5yx7U.js";import{F as Q,A as q,j as E,I as H}from"./listbox-DUieglFY.js";import"./editor-CpZ7vO5P.js";import"./media-D4ZD3EDk.js";import"./swiper-element-bundle-DBu82uhE.js";import"./form-C9UNAZed.js";const K=k({props:{hasLabel:{type:Boolean,default:!0},isSearchable:{type:Boolean,default:!1},labelText:{type:String,default:""},hasFeedback:{type:Boolean,default:!0},options:{type:Array,default:[]},modelValue:{type:[String,Number],default:""}},emits:["update:modelValue"],setup:function(e,t){const o=h(""),r=w(()=>e.options.find(s=>s.value==e.modelValue)),d=h([]);return D(o,s=>{d.value=e.options.filter(c=>c.label.toLowerCase().includes(s.toLowerCase()))}),{selectedOption:r,optionsToShow:w(()=>o.value.length>0?d.value:e.options),updateValue:function(s){t.emit("update:modelValue",s.value),o.value="",d.value=[]},searchQuery:o}},components:{Listbox:H,ListboxButton:E,ListboxOptions:q,ListboxOption:Q}}),P={key:0,class:"mb-1.5 font-medium block text-lab-pr2 text-par-m px-1"},R={class:"relative mt-1 inline-block max-w-full"},G={class:"flex items-center gap-2 w-full justify-between overflow-hidden"},J={key:0,class:"flex-1 text-lab-pr2 text-ellipsis truncate text-par-m font-medium text-left"},W={class:"shrink-0"},X={key:0,class:"block py-2 px-4 border-b border-bord-pr"},Y={class:"relative"},Z=["placeholder"],ee={class:"absolute top-0 left-4 bottom-0 inline-flex-center text-lab-tr"},te={class:"size-icon-small"},se={class:"overflow-y-auto max-h-80 divide-y divide-bord-sc"},oe=["innerHTML"],ae={key:1,class:"block text-center py-12 px-4 cursor-pointer text-par-n font-medium text-lab-sc"},ne={key:1,class:"mt-1 px-1"},le={key:0,class:"text-par-s text-lab-tr break-words flex-1 break-all"};function re(e,t,o,r,d,s){const c=i("SvgIcon"),v=i("ListboxButton"),_=i("ListboxOption"),y=i("ListboxOptions"),p=i("Listbox");return n(),l(x,null,[e.hasLabel?(n(),l("label",P,g(e.labelText),1)):m("",!0),u(p,{modelValue:e.selectedOption,"onUpdate:modelValue":e.updateValue,class:"relative w-full"},{default:f(()=>[a("div",R,[u(v,{class:"cursor-pointer w-full overflow-hidden bg-input-pr rounded-xl px-5 py-3"},{default:f(()=>[a("span",G,[e.selectedOption?(n(),l("span",J,g(e.selectedOption.label),1)):m("",!0),a("span",W,[u(c,{name:"chevron-down",classes:"size-icon-small text-lab-tr"})])])]),_:1}),u(y,{class:"absolute py-2 overflow-hidden right-0 left-0 w-full mb-2 rounded-2xl backdrop-blur-xs bg-bg-pr/85 shadow-2xl focus:outline-hidden z-50"},{default:f(()=>[e.isSearchable?(n(),l("div",X,[a("div",Y,[T(a("input",{class:"w-full pr-4 pl-10 py-3 text-par-m font-medium text-lab-sc outline-none border border-bord-card rounded-xl","onUpdate:modelValue":t[0]||(t[0]=b=>e.searchQuery=b),placeholder:e.$t("labels.search")},null,8,Z),[[B,e.searchQuery]]),a("div",ee,[a("span",te,[u(c,{name:"search-lg"})])])])])):m("",!0),a("div",se,[e.optionsToShow.length?(n(!0),l(x,{key:0},I(e.optionsToShow,b=>(n(),F(_,{key:b.value,value:b},{default:f(({active:$,selected:V})=>[a("span",{class:O([$||V?"bg-fill-qt":"","block py-3 px-4 cursor-pointer text-par-n font-medium text-lab-sc"]),innerHTML:b.label},null,10,oe)]),_:2},1032,["value"]))),128)):(n(),l("span",ae,g(e.$t("labels.nothing_found")),1))])]),_:1})])]),_:1},8,["modelValue","onUpdate:modelValue"]),e.hasFeedback?(n(),l("div",ne,[e.$slots.feedbackInfo?(n(),l("span",le,[C(e.$slots,"feedbackInfo")])):m("",!0)])):m("",!0)],64)}const ie=L(K,[["render",re]]),ue=k({setup:function(){const e=h([]),t=h(null),o=N({isLoading:!0,isSubmitting:!1});return U(async()=>{await S().userSettings().getFrom("languages").then(r=>{e.value=r.data.data.map(s=>({label:s.name,value:s.code,current:s.current==!0}));let d=e.value.find(s=>s.current==!0);d?t.value=d.value:t.value=e.value[0].value}),o.isLoading=!1}),{state:o,languages:e,currentLanguage:t,submitForm:async()=>{o.isSubmitting===!1&&(o.isSubmitting=!0,await S().userSettings().with({language:t.value}).putTo("languages/switch").then(r=>{toastSuccess(__t("toast.forms.changes_saved")),setTimeout(()=>{window.location.reload()},1e3)}).catch(r=>{r.response&&toastError(r.response.data.message),o.isSubmitting=!0}))}}},components:{SelectInput:ie,Toolbar:j,SettingsDesc:A}}),de={class:"mb-3"},ce={key:0,class:"px-4"},pe={class:"mb-10"};function me(e,t,o,r,d,s){const c=i("Toolbar"),v=i("SettingsDesc"),_=i("Border"),y=i("SelectInput");return n(),l(x,null,[u(c,{onClose:t[0]||(t[0]=p=>e.$router.back()),title:e.$t("settings.language_settings")},null,8,["title"]),u(v,{text:e.$t("settings.forms.language.page_desc")},null,8,["text"]),a("div",de,[u(_,{height:"h-2",opacity:"opacity-50"})]),e.state.isLoading?m("",!0):(n(),l("div",ce,[a("form",{onSubmit:t[2]||(t[2]=M((...p)=>e.submitForm&&e.submitForm(...p),["prevent"]))},[a("div",pe,[u(y,{modelValue:e.currentLanguage,"onUpdate:modelValue":[t[1]||(t[1]=p=>e.currentLanguage=p),e.submitForm],labelText:e.$t("settings.forms.language.display_language"),options:e.languages},{feedbackInfo:f(()=>[z(g(e.$t("settings.forms.language.display_language_helper")),1)]),_:1},8,["modelValue","onUpdate:modelValue","labelText","options"])])],32)]))],64)}const Se=L(ue,[["render",me]]);export{Se as default};
