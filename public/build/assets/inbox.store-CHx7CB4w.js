import{u as c}from"./vendor-20TtR0Rd.js";import{c as s}from"./global.properties-DKM1fd6s.js";const n=c("chats_inbox",{state:()=>({chatsHistory:[],chatRequests:[],chatsArchive:[],chatRequestsCount:0,unreadCount:{formatted:0,raw:0}}),actions:{fetchChatRequests:async function(){await s().messenger().getFrom("chats/requests").then(t=>{this.chatRequests=t.data.data}).catch(t=>{this.chatRequests=[]})},fetchChatRequestsCount:async function(){await s().messenger().getFrom("chats/requests/count").then(t=>{this.chatRequestsCount=t.data.data.count}).catch(t=>{this.chatRequestsCount=0})},fetchChatsHistory:async function(){let t=this;await s().messenger().getFrom("chats").then(function(e){t.chatsHistory=e.data.data}).catch(function(e){t.chatsHistory=[]})},fetchChatsArchive:async function(){await s().messenger().getFrom("archive").then(t=>{this.chatsArchive=t.data.data}).catch(t=>{this.chatsArchive=[]})},fetchUnreadCount:function(){s().messenger().getFrom("unread/count").then(t=>{this.unreadCount=t.data.data}).catch(()=>{this.unreadCount={formatted:0,raw:0}})},removeRequestFromHistory:function(t){let e=this.chatRequests.findIndex(a=>a.relations.chat.chat_id==t);e!==-1&&(this.chatRequestsCount--,this.chatRequests.splice(e,1))},removeChatFromHistory:function(t){let e=this.chatsHistory.findIndex(a=>a.chat_id==t);e!==-1&&this.chatsHistory.splice(e,1)}}});export{n as u};
