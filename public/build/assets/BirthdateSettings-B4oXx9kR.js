import{_,d as v,c as m,j as a,a as s,r as l,t as y,u as T,F as S,g as P,q as u,h as V,l as c,o as p}from"./global.properties-ieI6Xwik.js";import{a as $,f as D}from"./application-DnsIlr-S.js";import{S as B}from"./SelectInput-a7T_HM_x.js";import{S as k}from"./SectionToggle-DEryNKJ4.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./inbox.store-DKf8FrGP.js";import"./index-CaocF3Et.js";import"./listbox-YLrGfEqV.js";import"./form-C7kFQr8W.js";const w=v({setup:function(){const t=P({isLoading:!0,isSubmitting:!1}),e=u({}),n=u({});return V(async()=>{await c().userSettings().getFrom("personal/birthdate").then(i=>{let r=i.data.data;e.value=r.calendar,n.value.birth_date=r.birth_date,n.value.birthdate_privacy=r.privacy_settings.birthdate_privacy,t.isLoading=!1})}),{state:t,formData:n,calendar:e,submitForm:async()=>{t.isSubmitting===!1&&(t.isSubmitting=!0,await c().userSettings().with(n.value).putTo("personal/birthdate/update").then(i=>{toastSuccess(__t("toast.forms.changes_saved"))}).catch(i=>{i.response&&toastError(i.response.data.message)}),t.isSubmitting=!1)}}},components:{PrimaryPillButton:D,SelectInput:B,SectionToggle:k,PageTitle:$}}),F={class:"mb-8"},I={key:0,class:"block"},U={class:"mb-8"},A={class:"text-par-m text-lab-sc"},L={class:"mb-6"},N={class:"flex gap-4"},C={class:"w-4/12"},E={class:"w-4/12"},M={class:"w-4/12"},j={class:"mb-10"},q={class:"block mb-16"},z={key:1,class:"block"},G={class:"flex-center h-96"};function H(t,e,n,i,r,J){const b=l("PageTitle"),d=l("SelectInput"),g=l("SectionToggle"),h=l("PrimaryPillButton"),f=l("PrimarySpinAnimation");return p(),m(S,null,[a("div",F,[s(b,{hasBack:!0,titleText:t.$t("settings.birth_date_settings")},null,8,["titleText"])]),t.state.isLoading?(p(),m("div",z,[a("div",G,[s(f)])])):(p(),m("div",I,[a("div",U,[a("h6",A,y(t.$t("settings.forms.personal_info.birth_date_helper",{app_name:t.$embedder("config.app.name")})),1)]),a("form",{onSubmit:e[4]||(e[4]=T((...o)=>t.submitForm&&t.submitForm(...o),["prevent"]))},[a("div",L,[a("div",N,[a("div",C,[s(d,{modelValue:t.formData.birth_date.month,"onUpdate:modelValue":e[0]||(e[0]=o=>t.formData.birth_date.month=o),labelText:t.$t("labels.month"),options:t.calendar.months},null,8,["modelValue","labelText","options"])]),a("div",E,[s(d,{modelValue:t.formData.birth_date.day,"onUpdate:modelValue":e[1]||(e[1]=o=>t.formData.birth_date.day=o),labelText:t.$t("labels.day"),options:t.calendar.days},null,8,["modelValue","labelText","options"])]),a("div",M,[s(d,{modelValue:t.formData.birth_date.year,"onUpdate:modelValue":e[2]||(e[2]=o=>t.formData.birth_date.year=o),labelText:t.$t("labels.year"),options:t.calendar.years},null,8,["modelValue","labelText","options"])])])]),a("div",j,[s(g,{iconName:"shield-01",modelValue:t.formData.birthdate_privacy,"onUpdate:modelValue":e[3]||(e[3]=o=>t.formData.birthdate_privacy=o),captionText:t.$t("settings.forms.birth_date.privacy_helper"),titleText:t.$t("labels.privacy")},null,8,["modelValue","captionText","titleText"])]),a("div",q,[s(h,{loading:t.state.isSubmitting,buttonType:"submit",buttonText:t.$t("labels.save_changes")},null,8,["loading","buttonText"])])],32)]))],64)}const tt=_(w,[["render",H]]);export{tt as default};
